import{b as q}from"./chunk-ESPFCMXW.js";import{a as U}from"./chunk-PRCBLAI7.js";import{a as G}from"./chunk-SADESKDF.js";import{a as P}from"./chunk-DQ57PLDF.js";import{a as I}from"./chunk-TXAITGIS.js";import{a as V}from"./chunk-5CK75273.js";import{b as F}from"./chunk-UNE74JWY.js";import{b as e}from"./chunk-OI3KYR6B.js";import{a as Q,j as D,m as g}from"./chunk-HBP5N4FR.js";g();import t,{useEffect as Z,useState as u}from"react";import o from"classnames";import fe from"qrcode";g();import*as s from"react";var ge=m=>s.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 31.114 44.981",width:16,height:16,role:"img"},m),s.createElement("g",{transform:"translate(-47.168 -21.519)"},s.createElement("g",{transform:"translate(-247.872 -130.693)"},s.createElement("path",{d:"M355.676,152.213l-3.832,17.8h-9.661Z",transform:"translate(-40.089 1)",fillRule:"evenodd",fill:"#fff"}),s.createElement("path",{d:"M326.45,271.184l-7.053,9.379H295.04l7.054-9.379Z",transform:"translate(0 -101.17)",fillRule:"evenodd",fill:"#fff"}),s.createElement("path",{d:"M381.139,333.864l-13.493,17.8,3.832-17.8Z",transform:"translate(-61.742 -155.472)",fillRule:"evenodd",fill:"#fff"})))),H=ge;var Be=({callbackRoute:m,loginButtonText:_,title:y="Maiar Login",logoutRoute:x="/unlock",className:f="dapp-wallet-connect-login-modal",lead:j="Scan the QR code using Maiar",legacyMessage:A="Unable to login? Use the legacy version",wrapContentInsideModal:X=!0,isWalletConnectV2:C=!1,token:L,onClose:p,onLoginRedirect:M})=>{var B;let[z,{error:w},{uriDeepLink:J,walletConnectUri:v,cancelLogin:K}]=V({logoutRoute:x,callbackRoute:m,token:L,onLoginRedirect:M}),[O,{error:b},{connectExisting:Y,removeExistingPairing:$,cancelLogin:R,uriDeepLink:ee,walletConnectUri:h,wcPairings:d}]=F({logoutRoute:x,callbackRoute:m,token:L,onLoginRedirect:M}),[W,te]=u(""),[a,ne]=u(C),[oe,ae]=u(C),re=I(),S=a?(B=d==null?void 0:d.filter(r=>{let T=d.some(l=>{var i,c,k,E;return((i=r.peerMetadata)==null?void 0:i.name)===((c=l==null?void 0:l.peerMetadata)==null?void 0:c.name)&&((k=r.peerMetadata)==null?void 0:k.url)===((E=l==null?void 0:l.peerMetadata)==null?void 0:E.url)&&r.expiry<l.expiry});return Boolean(r.active)&&r.peerMetadata&&!T}))!=null?B:[]:[],n={loginText:e.textLeft,container:o(e.mAuto,q.loginContainer),card:o(e.card,e.my3,e.textCenter),cardBody:o(e.cardBody,e.p4,e.mxLg4),qrCodeSvgContainer:o(e.qrCodeSvgContainer,e.mxAuto,e.mb3),title:e.mb3,leadText:o(e.lead,e.mb0),mobileLoginButton:o(e.btn,e.btnPrimary,e.dInlineFlex,e.alignItemsCenter,e.px4,e.my4),mobileLoginButtonIcon:e.mr2,errorMessage:o(e.textDanger,e.dFlex,e.justifyContentCenter,e.alignItemsCenter),legacyMessageContainer:o(e.linkStyle,e.mt4,e.dFlex,e.justifyContentCenter,e.alignItemsCenter)},le=r=>{r.preventDefault(),ne(!1),ae(!1)},se=()=>D(void 0,null,function*(){if(!(a&&h||!a&&v))return;let i=a?h:v;if(i){let c=yield fe.toString(i,{type:"svg"});c&&te(c)}}),ie=()=>{a?R():K(),p==null||p()};Z(()=>{se()},[a,v,h]),Z(()=>{a?O():z()},[a]);let N=t.createElement("div",{className:n.container},t.createElement("div",{className:n.card},t.createElement("div",{className:n.cardBody},W?t.createElement("div",{className:n.qrCodeSvgContainer,dangerouslySetInnerHTML:{__html:W}}):t.createElement(G,null),t.createElement("h4",{className:o([e.h4,e.title])},y),re?t.createElement(t.Fragment,null,t.createElement("p",{className:n.leadText},_),t.createElement("a",{id:"accessWalletBtn","data-testid":"accessWalletBtn",className:n.mobileLoginButton,href:J||ee,rel:"noopener noreferrer nofollow",target:"_blank"},t.createElement(H,{className:n.mobileLoginButtonIcon,style:{width:"0.9rem",height:"0.9rem"}}),y)):t.createElement("p",{className:n.leadText},j),S.length>0&&t.createElement(U,{activePairings:S,connectExisting:Y,removeExistingPairing:$,className:f}),C&&oe&&t.createElement("a",{href:"/#",className:n.legacyMessageContainer,onClick:le},A),t.createElement("div",null,w&&t.createElement("p",{className:n.errorMessage},w),b&&t.createElement("p",{className:n.errorMessage},b)))));return X?t.createElement(P,{onClose:ie,modalConfig:{headerText:"Login with Maiar",showHeader:!0,modalDialogClassName:f},className:f},N):N};export{Be as a};
//# sourceMappingURL=chunk-DSL5OXES.js.map
