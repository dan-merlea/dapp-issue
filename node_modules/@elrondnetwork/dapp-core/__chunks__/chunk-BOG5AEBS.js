import{a as T}from"./chunk-LPXTFZID.js";import{c as w}from"./chunk-LY45FWEG.js";import{c as f,d as y}from"./chunk-HXERYGOO.js";import{g as u}from"./chunk-V2DQWH6R.js";import{a as M}from"./chunk-E37GJNPW.js";import{e as m,g as d}from"./chunk-K45F7SFK.js";import{g as L,h}from"./chunk-C32UB6VS.js";import{a as l,b as c,j as g,m as p}from"./chunk-HBP5N4FR.js";p();h();import{useState as W}from"react";M();var B=({callbackRoute:b,token:e,redirectDelayMilliseconds:I=100})=>{let[n,k]=W(""),[D,i]=W(!1),R=y(u),r=f(),s=T();function U(){return g(this,null,function*(){if(s)throw new Error(L);try{i(!0);let o=w(R.walletAddress),a=new Date,S=a.setMinutes(a.getMinutes()+3)/1e3;r(d({data:{},expires:S})),e&&r(m({loginToken:e}));let x=encodeURIComponent(`${window.location.origin}${b}`),E=c(l({callbackUrl:x},e&&{token:e}),{redirectDelayMilliseconds:I});yield o.login(E)}catch(o){console.error(o),k("error logging in"+o.message)}finally{i(!1)}})}let t=Boolean(n);return[U,{error:n,loginFailed:t,isLoading:D&&!t,isLoggedIn:s&&!t}]};export{B as a};
//# sourceMappingURL=chunk-BOG5AEBS.js.map
