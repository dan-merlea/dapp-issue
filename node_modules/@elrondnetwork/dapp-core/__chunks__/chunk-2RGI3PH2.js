import{a as T}from"./chunk-LPXTFZID.js";import{a as E}from"./chunk-JYRLELYC.js";import{c as w}from"./chunk-HXERYGOO.js";import{a as G}from"./chunk-E37GJNPW.js";import{e as u}from"./chunk-K45F7SFK.js";import{a as F}from"./chunk-MDICBPXF.js";import{a as y}from"./chunk-MP7NBSJV.js";import{b as L,c as D}from"./chunk-NPGLEYL5.js";import{g as f,h as A}from"./chunk-C32UB6VS.js";import{k as R}from"./chunk-P6M5SGWP.js";import{a as l,j as d,m}from"./chunk-HBP5N4FR.js";m();A();import{useState as I}from"react";import{ExtensionProvider as M}from"@elrondnetwork/erdjs-extension-provider";D();G();R();F();var V=({callbackRoute:o,token:i,onLoginRedirect:x})=>{let[s,h]=I(""),[S,e]=I(!1),g=w(),a=T();function v(){return d(this,null,function*(){if(a)throw new Error(f);e(!0);let n=M.getInstance();try{if(!(yield n.init())){console.warn("Something went wrong trying to redirect to wallet login..");return}let P=encodeURIComponent(`${window.location.origin}${o!=null?o:window.location.pathname}`),U=l({callbackUrl:P},i&&{token:i});yield n.login(U),E(n);let{signature:c,address:p}=n.account;if(!p){e(!1),console.warn("Login cancelled.");return}c&&g(u({loginToken:String(i),signature:c})),g(L({address:p,loginMethod:"extension"})),y(o,x)}catch(r){console.error("error loging in",r),h("error logging in"+r.message)}finally{e(!1)}})}let t=Boolean(s);return[v,{loginFailed:t,error:s,isLoading:S&&!t,isLoggedIn:a&&!t}]};export{V as a};
//# sourceMappingURL=chunk-2RGI3PH2.js.map
