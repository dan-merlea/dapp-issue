import{a as f,c as v}from"./chunk-NPGLEYL5.js";import{i as I,j as A,s as F}from"./chunk-NO5ZX2I2.js";import{k as C}from"./chunk-P6M5SGWP.js";import{a as u,b as y,e as M,m}from"./chunk-HBP5N4FR.js";import{createSlice as h}from"@reduxjs/toolkit";import{REHYDRATE as H}from"redux-persist";var g,B,E,G,J,K,L,N,Q,V,X,Z,_,$,R=M(()=>{m();C();F();v();g={signedTransactions:{},transactionsToSign:null,signTransactionsError:null,signTransactionsCancelMessage:null,customTransactionInformationForSessionId:{}},B={signWithoutSending:!1,sessionInformation:null,redirectAfterSign:!1},E=h({name:"transactionsSlice",initialState:g,reducers:{moveTransactionsToSignedState:(n,s)=>{var e,T;let{sessionId:a,transactions:i,errorMessage:o,status:t,redirectRoute:r}=s.payload,c=((e=n.customTransactionInformationForSessionId)==null?void 0:e[a])||B;n.signedTransactions[a]={transactions:i,status:t,errorMessage:o,redirectRoute:r,customTransactionInformation:c},((T=n==null?void 0:n.transactionsToSign)==null?void 0:T.sessionId)===a&&(n.transactionsToSign=g.transactionsToSign)},clearSignedTransaction:(n,s)=>{n.signedTransactions[s.payload]&&delete n.signedTransactions[s.payload]},clearTransactionToSign:n=>{n!=null&&n.transactionsToSign&&(n.transactionsToSign=null)},updateSignedTransaction:(n,s)=>{n.signedTransactions=u(u({},n.signedTransactions),s.payload)},updateSignedTransactions:(n,s)=>{let{sessionId:a,status:i,errorMessage:o,transactions:t}=s.payload;n.signedTransactions[a]!=null&&(n.signedTransactions[a].status=i,o!=null&&(n.signedTransactions[a].errorMessage=o),t!=null&&(n.signedTransactions[a].transactions=t))},updateSignedTransactionStatus:(n,s)=>{var c,e,T,S,l,p;let{sessionId:a,status:i,errorMessage:o,transactionHash:t}=s.payload,r=(e=(c=n.signedTransactions)==null?void 0:c[a])==null?void 0:e.transactions;if(r!=null){n.signedTransactions[a].transactions=r.map(d=>d.hash===t?y(u({},d),{status:i,errorMessage:o}):d);let P=(S=(T=n.signedTransactions[a])==null?void 0:T.transactions)==null?void 0:S.every(d=>I(d.status)),x=(p=(l=n.signedTransactions[a])==null?void 0:l.transactions)==null?void 0:p.every(d=>A(d.status));P&&(n.signedTransactions[a].status="success"),x&&(n.signedTransactions[a].status="fail")}},setTransactionsToSign:(n,s)=>{n.transactionsToSign=s.payload;let{sessionId:a,customTransactionInformation:i}=s.payload;n.customTransactionInformationForSessionId[a]=i,n.signTransactionsError=null},clearAllTransactionsToSign:n=>{n.transactionsToSign=g.transactionsToSign,n.signTransactionsError=null},clearAllSignedTransactions:n=>{n.signedTransactions=g.signedTransactions},setSignTransactionsError:(n,s)=>{n.signTransactionsError=s.payload},setSignTransactionsCancelMessage:(n,s)=>{n.signTransactionsCancelMessage=s.payload}},extraReducers:n=>{n.addCase(f,()=>g),n.addCase(H,(s,a)=>{var r;if(!((r=a.payload)!=null&&r.transactions))return;let{signedTransactions:i,customTransactionInformationForSessionId:o}=a.payload.transactions,t=Object.entries(i).reduce((c,[e,T])=>{let S=new Date(e),l=new Date;return l.setHours(l.getHours()+5),l-S>0||(c[e]=T),c},{});o!=null&&(s.customTransactionInformationForSessionId=o),i!=null&&(s.signedTransactions=t)})}}),{updateSignedTransactionStatus:G,updateSignedTransactions:J,setTransactionsToSign:K,clearAllTransactionsToSign:L,clearAllSignedTransactions:N,clearSignedTransaction:Q,clearTransactionToSign:V,setSignTransactionsError:X,setSignTransactionsCancelMessage:Z,moveTransactionsToSignedState:_}=E.actions,$=E.reducer});export{E as a,G as b,J as c,K as d,L as e,N as f,Q as g,V as h,X as i,Z as j,_ as k,$ as l,R as m};
//# sourceMappingURL=chunk-MD7XZQEH.js.map
