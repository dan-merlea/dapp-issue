{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as T } from \"./chunk-LPXTFZID.js\";\nimport { a as E } from \"./chunk-HSZIKABD.js\";\nimport { c as w } from \"./chunk-HXERYGOO.js\";\nimport { a as G } from \"./chunk-E37GJNPW.js\";\nimport { e as u } from \"./chunk-K45F7SFK.js\";\nimport { a as F } from \"./chunk-MDICBPXF.js\";\nimport { a as y } from \"./chunk-MP7NBSJV.js\";\nimport { b as L, c as D } from \"./chunk-NPGLEYL5.js\";\nimport { g as f, h as A } from \"./chunk-C32UB6VS.js\";\nimport { k as R } from \"./chunk-P6M5SGWP.js\";\nimport { a as l, j as d, m } from \"./chunk-HBP5N4FR.js\";\nm();\nA();\nimport { useState as I } from \"react\";\nimport { ExtensionProvider as M } from \"@elrondnetwork/erdjs-extension-provider\";\nD();\nG();\nR();\nF();\nvar V = function V(_ref) {\n  var o = _ref.callbackRoute,\n    i = _ref.token,\n    x = _ref.onLoginRedirect;\n  var _I = I(\"\"),\n    _I2 = _slicedToArray(_I, 2),\n    s = _I2[0],\n    h = _I2[1],\n    _I3 = I(!1),\n    _I4 = _slicedToArray(_I3, 2),\n    S = _I4[0],\n    e = _I4[1],\n    g = w(),\n    a = T();\n  function v() {\n    return d(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var n, P, U, _n$account, c, p;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!a) {\n                _context.next = 2;\n                break;\n              }\n              throw new Error(f);\n            case 2:\n              e(!0);\n              n = M.getInstance();\n              _context.prev = 4;\n              _context.next = 7;\n              return n.init();\n            case 7:\n              if (_context.sent) {\n                _context.next = 10;\n                break;\n              }\n              console.warn(\"Something went wrong trying to redirect to wallet login..\");\n              return _context.abrupt(\"return\");\n            case 10:\n              P = encodeURIComponent(\"\".concat(window.location.origin).concat(o != null ? o : window.location.pathname)), U = l({\n                callbackUrl: P\n              }, i && {\n                token: i\n              });\n              _context.next = 13;\n              return n.login(U);\n            case 13:\n              E(n);\n              _n$account = n.account, c = _n$account.signature, p = _n$account.address;\n              if (p) {\n                _context.next = 18;\n                break;\n              }\n              e(!1), console.warn(\"Login cancelled.\");\n              return _context.abrupt(\"return\");\n            case 18:\n              c && g(u({\n                loginToken: String(i),\n                signature: c\n              })), g(L({\n                address: p,\n                loginMethod: \"extension\"\n              })), y(o, x);\n              _context.next = 24;\n              break;\n            case 21:\n              _context.prev = 21;\n              _context.t0 = _context[\"catch\"](4);\n              console.error(\"error loging in\", _context.t0), h(\"error logging in\" + _context.t0.message);\n            case 24:\n              _context.prev = 24;\n              e(!1);\n              return _context.finish(24);\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 21, 24, 27]]);\n    }));\n  }\n  var t = Boolean(s);\n  return [v, {\n    loginFailed: t,\n    error: s,\n    isLoading: S && !t,\n    isLoggedIn: a && !t\n  }];\n};\nexport { V as a };","map":null,"metadata":{},"sourceType":"module"}