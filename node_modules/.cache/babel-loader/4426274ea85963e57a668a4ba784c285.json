{"ast":null,"code":"import _regeneratorRuntime from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import{Address,Code,ContractFunction,SmartContract,TransactionPayload}from'@elrondnetwork/erdjs/out';import{quickDenominate}from'./denominate';export var NetworkConfig=/*#__PURE__*/_createClass(function NetworkConfig(chainId){_classCallCheck(this,NetworkConfig);this.chainId=void 0;this.chainId=chainId;});export var AccountType=/*#__PURE__*/function(){function AccountType(address){var balance=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var nonce=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,AccountType);this.balance=void 0;this.nonce=void 0;this.address=void 0;this.balance=balance;this.nonce=nonce;this.address=address;}_createClass(AccountType,[{key:\"getNonceThenIncrement\",value:function getNonceThenIncrement(){var old=this.nonce;this.nonce++;return old;}},{key:\"reload\",value:function(){var _reload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(proxy){var account;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return proxy.getAccount(new Address(this.address));case 2:account=_context.sent;this.nonce=account.nonce;this.balance=quickDenominate(account.balance.toString(),3);case 5:case\"end\":return _context.stop();}}},_callee,this);}));function reload(_x){return _reload.apply(this,arguments);}return reload;}()}],[{key:\"empty\",value:function empty(){return new AccountType('..','0',0);}}]);return AccountType;}();export var DelegationTransactionType=/*#__PURE__*/function(){function DelegationTransactionType(){var receiver=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var type=arguments.length>2?arguments[2]:undefined;var args=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var gasMultiplier=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;_classCallCheck(this,DelegationTransactionType);this.value=void 0;this.type=void 0;this.chainId=void 0;this.receiver=void 0;this.args=void 0;this.multiplier=void 0;this.value=value;this.type=type;this.args=args;this.chainId='1';this.receiver=receiver;this.multiplier=gasMultiplier;}_createClass(DelegationTransactionType,[{key:\"getData\",value:function getData(){var data=this.type;if(this.args!==''){data=data+'@'+this.args;}return data;}},{key:\"getPayload\",value:function getPayload(){var funcName=this.type;if(this.args!==''){funcName=funcName+'@'+this.args;}var func=new ContractFunction(funcName);return TransactionPayload.contractCall().setFunction(func).build();}}]);return DelegationTransactionType;}();export var UpgradeTransactionType=/*#__PURE__*/function(){/**\n\t * @param receiver string address\n\t * @param initialArgs TypedValue[]\n\t * @param code use static loadCode\n\t * @param codeMetadata new CodeMetadata(true, false, true, true)\n\t */function UpgradeTransactionType(){var receiver=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var initialArgs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var code=arguments.length>2?arguments[2]:undefined;var codeMetadata=arguments.length>3?arguments[3]:undefined;_classCallCheck(this,UpgradeTransactionType);this.chainId=void 0;this.receiver=void 0;this.codeMetadata=void 0;this.initialArgs=void 0;this.code=void 0;this.initialArgs=initialArgs;this.chainId='1';this.receiver=receiver;this.code=code;this.codeMetadata=codeMetadata;}_createClass(UpgradeTransactionType,[{key:\"getPayload\",value:function(){var _getPayload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",TransactionPayload.contractUpgrade().setCode(this.code).setCodeMetadata(this.codeMetadata).setInitArgs(this.initialArgs).build());case 1:case\"end\":return _context2.stop();}}},_callee2,this);}));function getPayload(){return _getPayload.apply(this,arguments);}return getPayload;}()},{key:\"getTransaction\",value:function getTransaction(){var smartContract=new SmartContract({address:new Address(this.receiver)});return smartContract.upgrade({code:this.code,codeMetadata:this.codeMetadata,initArguments:this.initialArgs,gasLimit:100000000,chainID:this.chainId});}}],[{key:\"loadCode\",value:function(){var _loadCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(path){var file,buffer;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(path);case 2:file=_context3.sent;_context3.t0=Buffer;_context3.next=6;return file.arrayBuffer();case 6:_context3.t1=_context3.sent;buffer=_context3.t0.from.call(_context3.t0,_context3.t1);return _context3.abrupt(\"return\",Code.fromBuffer(buffer));case 9:case\"end\":return _context3.stop();}}},_callee3);}));function loadCode(_x2){return _loadCode.apply(this,arguments);}return loadCode;}()}]);return UpgradeTransactionType;}();","map":null,"metadata":{},"sourceType":"module"}