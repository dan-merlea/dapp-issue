{"ast":null,"code":"import _classCallCheck from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Container } from 'pixi.js';\nimport { ExploreTileContainer } from 'sprites';\nvar HexController = /*#__PURE__*/function (_Container) {\n  _inherits(HexController, _Container);\n  var _super = _createSuper(HexController);\n  function HexController(eventHandler) {\n    var _this;\n    _classCallCheck(this, HexController);\n    _this = _super.call(this);\n    _this._tileContainer = void 0;\n    _this._hexContainer = void 0;\n    _this.eventHandler = void 0;\n    _this.zoom = 1;\n    _this.eventHandler = eventHandler;\n    return _this;\n  }\n  _createClass(HexController, [{\n    key: \"update\",\n    value: function update() {\n      console.log('Render the Big Hex View');\n      if (this._hexContainer) {\n        this.removeChild(this._hexContainer);\n        this._hexContainer = undefined;\n      }\n      if (!this._tileContainer) return;\n      var screenWidth = window.innerWidth;\n      var screenHeight = window.innerHeight;\n      var radius = Math.min(screenWidth, screenHeight) / 2 - 50;\n      var view = new ExploreTileContainer(radius, this._tileContainer, this.eventHandler);\n      view.x = screenWidth / 2;\n      view.y = screenHeight / 2;\n      this.addChild(view);\n      this._hexContainer = view;\n    }\n  }, {\n    key: \"zoomLevelUpdate\",\n    value: function zoomLevelUpdate(zoom) {\n      // Only update elements on every 0.5 zoom level\n      var newZoom = Math.round(zoom * 100) / 100;\n      if (Math.abs(this.zoom - newZoom) > 0.2) {\n        var _this$_hexContainer;\n        this.zoom = newZoom;\n        (_this$_hexContainer = this._hexContainer) === null || _this$_hexContainer === void 0 ? void 0 : _this$_hexContainer.updateItemsScale(newZoom);\n        console.log(\"Hex new zoom: \".concat(this.zoom));\n      }\n    }\n  }, {\n    key: \"tileContainer\",\n    get: function get() {\n      return this._tileContainer;\n    },\n    set: function set(tileContainer) {\n      // Listeners are moved to ExploreTileContainer when shown\n      // This will move them back to Tile\n      if (this._tileContainer) this._tileContainer.setupListeners();\n      this._tileContainer = tileContainer;\n      this.update();\n    }\n  }]);\n  return HexController;\n}(Container);\nexport { HexController as default };","map":{"version":3,"names":["Container","ExploreTileContainer","HexController","eventHandler","_tileContainer","_hexContainer","zoom","console","log","removeChild","undefined","screenWidth","window","innerWidth","screenHeight","innerHeight","radius","Math","min","view","x","y","addChild","newZoom","round","abs","updateItemsScale","tileContainer","setupListeners","update"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/packages/client/src/sprites/controllers/HexController.ts"],"sourcesContent":["import { EventHandler } from '@krogan/common';\nimport { Container } from 'pixi.js';\nimport { ExploreTileContainer, TileContainer } from 'sprites';\n\nexport default class HexController extends Container {\n    \n\tprivate _tileContainer?: TileContainer\n\tprivate _hexContainer?: ExploreTileContainer\n\n\tprivate eventHandler: EventHandler\n\tprivate zoom: number = 1\n\n\tconstructor(eventHandler: EventHandler) {\n\t\tsuper()\n\t\tthis.eventHandler = eventHandler\n\t}\n\n\tupdate() {\n\t\tconsole.log('Render the Big Hex View')\n\t\tif (this._hexContainer) {\n\t\t\tthis.removeChild(this._hexContainer)\n\t\t\tthis._hexContainer = undefined\n\t\t}\n\t\t\n\t\tif (!this._tileContainer) return\n\n\t\tconst screenWidth = window.innerWidth\n\t\tconst screenHeight = window.innerHeight\n\t\tconst radius = Math.min(screenWidth, screenHeight) / 2 - 50\n\t\tconst view = new ExploreTileContainer(\n\t\t\tradius, \n\t\t\tthis._tileContainer,\n\t\t\tthis.eventHandler\n\t\t)\n\t\tview.x = screenWidth / 2\n\t\tview.y = screenHeight / 2\n\t\tthis.addChild(view)\n\t\tthis._hexContainer = view\n\t\t\n\t}\n\n\tzoomLevelUpdate(zoom: number) {\n\t\t// Only update elements on every 0.5 zoom level\n\t\tconst newZoom = Math.round(zoom * 100) / 100\n\t\tif (Math.abs(this.zoom - newZoom) > 0.2) {\n\t\t\tthis.zoom = newZoom\n\t\t\tthis._hexContainer?.updateItemsScale(newZoom)\n\t\t\tconsole.log(`Hex new zoom: ${this.zoom}`)\n\t\t}\n\t}\n\n\tget tileContainer() {\n\t\treturn this._tileContainer\n\t}\n\n\tset tileContainer(tileContainer: TileContainer | undefined) {\n\t\t// Listeners are moved to ExploreTileContainer when shown\n\t\t// This will move them back to Tile\n\t\tif (this._tileContainer) this._tileContainer.setupListeners()\n\t\t\n\t\tthis._tileContainer = tileContainer\n\t\tthis.update()\n\t}\n    \n}\n"],"mappings":";;;;AACA,SAASA,SAAS,QAAQ,SAAS;AACnC,SAASC,oBAAoB,QAAuB,SAAS;AAAC,IAEzCC,aAAa;EAAA;EAAA;EAQjC,uBAAYC,YAA0B,EAAE;IAAA;IAAA;IACvC;IAAO,MAPAC,cAAc;IAAA,MACdC,aAAa;IAAA,MAEbF,YAAY;IAAA,MACZG,IAAI,GAAW,CAAC;IAIvB,MAAKH,YAAY,GAAGA,YAAY;IAAA;EACjC;EAAC;IAAA;IAAA,OAED,kBAAS;MACRI,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;MACtC,IAAI,IAAI,CAACH,aAAa,EAAE;QACvB,IAAI,CAACI,WAAW,CAAC,IAAI,CAACJ,aAAa,CAAC;QACpC,IAAI,CAACA,aAAa,GAAGK,SAAS;MAC/B;MAEA,IAAI,CAAC,IAAI,CAACN,cAAc,EAAE;MAE1B,IAAMO,WAAW,GAAGC,MAAM,CAACC,UAAU;MACrC,IAAMC,YAAY,GAAGF,MAAM,CAACG,WAAW;MACvC,IAAMC,MAAM,GAAGC,IAAI,CAACC,GAAG,CAACP,WAAW,EAAEG,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE;MAC3D,IAAMK,IAAI,GAAG,IAAIlB,oBAAoB,CACpCe,MAAM,EACN,IAAI,CAACZ,cAAc,EACnB,IAAI,CAACD,YAAY,CACjB;MACDgB,IAAI,CAACC,CAAC,GAAGT,WAAW,GAAG,CAAC;MACxBQ,IAAI,CAACE,CAAC,GAAGP,YAAY,GAAG,CAAC;MACzB,IAAI,CAACQ,QAAQ,CAACH,IAAI,CAAC;MACnB,IAAI,CAACd,aAAa,GAAGc,IAAI;IAE1B;EAAC;IAAA;IAAA,OAED,yBAAgBb,IAAY,EAAE;MAC7B;MACA,IAAMiB,OAAO,GAAGN,IAAI,CAACO,KAAK,CAAClB,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG;MAC5C,IAAIW,IAAI,CAACQ,GAAG,CAAC,IAAI,CAACnB,IAAI,GAAGiB,OAAO,CAAC,GAAG,GAAG,EAAE;QAAA;QACxC,IAAI,CAACjB,IAAI,GAAGiB,OAAO;QACnB,2BAAI,CAAClB,aAAa,wDAAlB,oBAAoBqB,gBAAgB,CAACH,OAAO,CAAC;QAC7ChB,OAAO,CAACC,GAAG,yBAAkB,IAAI,CAACF,IAAI,EAAG;MAC1C;IACD;EAAC;IAAA;IAAA,KAED,eAAoB;MACnB,OAAO,IAAI,CAACF,cAAc;IAC3B,CAAC;IAAA,KAED,aAAkBuB,aAAwC,EAAE;MAC3D;MACA;MACA,IAAI,IAAI,CAACvB,cAAc,EAAE,IAAI,CAACA,cAAc,CAACwB,cAAc,EAAE;MAE7D,IAAI,CAACxB,cAAc,GAAGuB,aAAa;MACnC,IAAI,CAACE,MAAM,EAAE;IACd;EAAC;EAAA;AAAA,EA1DyC7B,SAAS;AAAA,SAA/BE,aAAa"},"metadata":{},"sourceType":"module"}