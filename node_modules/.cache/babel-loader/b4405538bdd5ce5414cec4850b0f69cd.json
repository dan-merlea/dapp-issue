{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { ChaCha20Poly1305 as te } from \"@stablelib/chacha20poly1305\";\nimport { HKDF as We } from \"@stablelib/hkdf\";\nimport { randomBytes as re } from \"@stablelib/random\";\nimport { SHA256 as Qe, hash as oe } from \"@stablelib/sha256\";\nimport * as se from \"@stablelib/x25519\";\nimport { toString as f, fromString as p, concat as ie } from \"uint8arrays\";\nimport { detect as Ze } from \"detect-browser\";\nimport { fromMiliseconds as ce, toMiliseconds as V, FIVE_MINUTES as Xe } from \"@walletconnect/time\";\nimport { getDocument as en, getNavigator as ae, getLocation as ue } from \"@walletconnect/window-getters\";\nimport { getWindowMetadata as nn } from \"@walletconnect/window-metadata\";\nimport * as U from \"query-string\";\nimport { RELAY_JSONRPC as tn } from \"@walletconnect/relay-api\";\nvar A = \":\";\nfunction de(e) {\n  var _e$split = e.split(A),\n    _e$split2 = _slicedToArray(_e$split, 2),\n    n = _e$split2[0],\n    t = _e$split2[1];\n  return {\n    namespace: n,\n    reference: t\n  };\n}\nfunction le(e) {\n  var n = e.namespace,\n    t = e.reference;\n  return [n, t].join(A);\n}\nfunction M(e) {\n  var _e$split3 = e.split(A),\n    _e$split4 = _slicedToArray(_e$split3, 3),\n    n = _e$split4[0],\n    t = _e$split4[1],\n    r = _e$split4[2];\n  return {\n    namespace: n,\n    reference: t,\n    address: r\n  };\n}\nfunction fe(e) {\n  var n = e.namespace,\n    t = e.reference,\n    r = e.address;\n  return [n, t, r].join(A);\n}\nfunction K(e, n) {\n  var t = [];\n  return e.forEach(function (r) {\n    var o = n(r);\n    t.includes(o) || t.push(o);\n  }), t;\n}\nfunction pe(e) {\n  var _M = M(e),\n    n = _M.address;\n  return n;\n}\nfunction me(e) {\n  var _M2 = M(e),\n    n = _M2.namespace,\n    t = _M2.reference;\n  return le({\n    namespace: n,\n    reference: t\n  });\n}\nfunction rn(e, n) {\n  var _de = de(n),\n    t = _de.namespace,\n    r = _de.reference;\n  return fe({\n    namespace: t,\n    reference: r,\n    address: e\n  });\n}\nfunction on(e) {\n  return K(e, pe);\n}\nfunction ye(e) {\n  return K(e, me);\n}\nfunction sn(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var t = [];\n  return Object.keys(e).forEach(function (r) {\n    if (n.length && !n.includes(r)) return;\n    var o = e[r];\n    t.push.apply(t, _toConsumableArray(o.accounts));\n  }), t;\n}\nfunction cn(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var t = [];\n  return Object.keys(e).forEach(function (r) {\n    if (n.length && !n.includes(r)) return;\n    var o = e[r];\n    t.push.apply(t, _toConsumableArray(ye(o.accounts)));\n  }), t;\n}\nfunction an(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var t = [];\n  return Object.keys(e).forEach(function (r) {\n    if (n.length && !n.includes(r)) return;\n    var o = e[r];\n    t.push.apply(t, _toConsumableArray(o.chains));\n  }), t;\n}\nvar k = \"base10\",\n  a = \"base16\",\n  R = \"base64pad\",\n  C = \"utf8\",\n  L = 0,\n  O = 1,\n  un = 0,\n  Ee = 1,\n  F = 12,\n  H = 32;\nfunction dn() {\n  var e = se.generateKeyPair();\n  return {\n    privateKey: f(e.secretKey, a),\n    publicKey: f(e.publicKey, a)\n  };\n}\nfunction ln() {\n  var e = re(H);\n  return f(e, a);\n}\nfunction fn(e, n) {\n  var t = se.sharedKey(p(e, a), p(n, a)),\n    r = new We(Qe, t).expand(H);\n  return f(r, a);\n}\nfunction pn(e) {\n  var n = oe(p(e, a));\n  return f(n, a);\n}\nfunction mn(e) {\n  var n = oe(p(e, C));\n  return f(n, a);\n}\nfunction he(e) {\n  return p(\"\".concat(e), k);\n}\nfunction T(e) {\n  return Number(f(e, k));\n}\nfunction yn(e) {\n  var n = he(typeof e.type < \"u\" ? e.type : L);\n  if (T(n) === O && typeof e.senderPublicKey > \"u\") throw new Error(\"Missing sender public key for type 1 envelope\");\n  var t = typeof e.senderPublicKey < \"u\" ? p(e.senderPublicKey, a) : void 0,\n    r = typeof e.iv < \"u\" ? p(e.iv, a) : re(F),\n    o = new te(p(e.symKey, a)).seal(r, p(e.message, C));\n  return Ne({\n    type: n,\n    sealed: o,\n    iv: r,\n    senderPublicKey: t\n  });\n}\nfunction En(e) {\n  var n = new te(p(e.symKey, a)),\n    _q = q(e.encoded),\n    t = _q.sealed,\n    r = _q.iv,\n    o = n.open(r, t);\n  if (o === null) throw new Error(\"Failed to decrypt\");\n  return f(o, C);\n}\nfunction Ne(e) {\n  if (T(e.type) === O) {\n    if (typeof e.senderPublicKey > \"u\") throw new Error(\"Missing sender public key for type 1 envelope\");\n    return f(ie([e.type, e.senderPublicKey, e.iv, e.sealed]), R);\n  }\n  return f(ie([e.type, e.iv, e.sealed]), R);\n}\nfunction q(e) {\n  var n = p(e, R),\n    t = n.slice(un, Ee),\n    r = Ee;\n  if (T(t) === O) {\n    var c = r + H,\n      l = c + F,\n      h = n.slice(r, c),\n      g = n.slice(c, l),\n      P = n.slice(l);\n    return {\n      type: t,\n      sealed: P,\n      iv: g,\n      senderPublicKey: h\n    };\n  }\n  var o = r + F,\n    i = n.slice(r, o),\n    s = n.slice(o);\n  return {\n    type: t,\n    sealed: s,\n    iv: i\n  };\n}\nfunction hn(e, n) {\n  var t = q(e);\n  return ge({\n    type: T(t.type),\n    senderPublicKey: typeof t.senderPublicKey < \"u\" ? f(t.senderPublicKey, a) : void 0,\n    receiverPublicKey: n === null || n === void 0 ? void 0 : n.receiverPublicKey\n  });\n}\nfunction ge(e) {\n  var n = (e === null || e === void 0 ? void 0 : e.type) || L;\n  if (n === O) {\n    if (typeof (e === null || e === void 0 ? void 0 : e.senderPublicKey) > \"u\") throw new Error(\"missing sender public key\");\n    if (typeof (e === null || e === void 0 ? void 0 : e.receiverPublicKey) > \"u\") throw new Error(\"missing receiver public key\");\n  }\n  return {\n    type: n,\n    senderPublicKey: e === null || e === void 0 ? void 0 : e.senderPublicKey,\n    receiverPublicKey: e === null || e === void 0 ? void 0 : e.receiverPublicKey\n  };\n}\nfunction Nn(e) {\n  return e.type === O && typeof e.senderPublicKey == \"string\" && typeof e.receiverPublicKey == \"string\";\n}\nvar gn = Object.defineProperty,\n  ve = Object.getOwnPropertySymbols,\n  vn = Object.prototype.hasOwnProperty,\n  bn = Object.prototype.propertyIsEnumerable,\n  be = function be(e, n, t) {\n    return n in e ? gn(e, n, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : e[n] = t;\n  },\n  Oe = function Oe(e, n) {\n    for (var t in n || (n = {})) {\n      vn.call(n, t) && be(e, t, n[t]);\n    }\n    if (ve) {\n      var _iterator = _createForOfIteratorHelper(ve(n)),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var t = _step.value;\n          bn.call(n, t) && be(e, t, n[t]);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    return e;\n  };\nvar Se = \"ReactNative\",\n  S = {\n    reactNative: \"react-native\",\n    node: \"node\",\n    browser: \"browser\",\n    unknown: \"unknown\"\n  },\n  w = \" \",\n  On = \":\",\n  Ie = \"/\",\n  G = 2,\n  Sn = 1e3,\n  Pe = \"js\";\nfunction B() {\n  return typeof process < \"u\" && typeof process.versions < \"u\" && typeof process.versions.node < \"u\";\n}\nfunction Te() {\n  return !en() && !!ae() && navigator.product === Se;\n}\nfunction _e() {\n  return !B() && !!ae();\n}\nfunction z() {\n  return Te() ? S.reactNative : B() ? S.node : _e() ? S.browser : S.unknown;\n}\nfunction Ue(e, n) {\n  var t = U.parse(e);\n  return t = Oe(Oe({}, t), n), e = U.stringify(t), e;\n}\nfunction In() {\n  return nn() || {\n    name: \"\",\n    description: \"\",\n    url: \"\",\n    icons: [\"\"]\n  };\n}\nfunction Pn(e, n) {\n  var t;\n  var r = z(),\n    o = {\n      protocol: e,\n      version: n,\n      env: r\n    };\n  return r === \"browser\" && (o.host = ((t = ue()) == null ? void 0 : t.host) || \"unknown\"), o;\n}\nfunction Ae() {\n  var e = Ze();\n  if (e === null) return \"unknown\";\n  var n = e.os ? e.os.replace(\" \", \"\").toLowerCase() : \"unknown\";\n  return e.type === \"browser\" ? [n, e.name, e.version].join(\"-\") : [n, e.version].join(\"-\");\n}\nfunction Re() {\n  var e;\n  var n = z();\n  return n === S.browser ? [n, ((e = ue()) == null ? void 0 : e.host) || \"unknown\"].join(\":\") : n;\n}\nfunction Ce(e, n, t) {\n  var r = Ae(),\n    o = Re();\n  return [[e, n].join(\"-\"), [Pe, t].join(\"-\"), r, o].join(\"/\");\n}\nfunction Tn(_ref) {\n  var e = _ref.protocol,\n    n = _ref.version,\n    t = _ref.relayUrl,\n    r = _ref.sdkVersion,\n    o = _ref.auth,\n    i = _ref.projectId;\n  var s = t.split(\"?\"),\n    c = Ce(e, n, r),\n    l = {\n      auth: o,\n      ua: c,\n      projectId: i\n    },\n    h = Ue(s[1] || \"\", l);\n  return s[0] + \"?\" + h;\n}\nfunction _n(e) {\n  var n = (e.match(/^[^:]+(?=:\\/\\/)/gi) || [])[0];\n  var t = typeof n < \"u\" ? e.split(\"://\")[1] : e;\n  return n = n === \"wss\" ? \"https\" : \"http\", [n, t].join(\"://\");\n}\nfunction Un(e, n, t) {\n  if (!e[n] || typeof e[n] !== t) throw new Error(\"Missing or invalid \\\"\".concat(n, \"\\\" param\"));\n}\nfunction we(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : G;\n  return De(e.split(Ie), n);\n}\nfunction An(e) {\n  return we(e).join(w);\n}\nfunction u(e, n) {\n  return e.filter(function (t) {\n    return n.includes(t);\n  }).length === e.length;\n}\nfunction De(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : G;\n  return e.slice(Math.max(e.length - n, 0));\n}\nfunction Rn(e) {\n  return Object.fromEntries(e.entries());\n}\nfunction Cn(e) {\n  return new Map(Object.entries(e));\n}\nfunction wn(e, n) {\n  var t = {};\n  return Object.keys(e).forEach(function (r) {\n    t[r] = n(e[r]);\n  }), t;\n}\nvar Dn = function Dn(e) {\n  return e;\n};\nfunction $e(e) {\n  return e.trim().replace(/^\\w/, function (n) {\n    return n.toUpperCase();\n  });\n}\nfunction $n(e) {\n  return e.split(w).map(function (n) {\n    return $e(n);\n  }).join(w);\n}\nfunction jn(e, n) {\n  return ce((n || Date.now()) + V(e));\n}\nfunction xn(e) {\n  return ce(Date.now()) >= V(e);\n}\nfunction Vn() {\n  var e = V(Xe);\n  var n, t, r;\n  return {\n    resolve: function resolve(o) {\n      r && n && (clearTimeout(r), n(o));\n    },\n    reject: function reject(o) {\n      r && t && (clearTimeout(r), t(o));\n    },\n    done: function done() {\n      return new Promise(function (o, i) {\n        r = setTimeout(i, e), n = o, t = i;\n      });\n    }\n  };\n}\nfunction Y(e, n) {\n  if (typeof n == \"string\" && n.startsWith(\"\".concat(e, \":\"))) return n;\n  if (e.toLowerCase() === \"topic\") {\n    if (typeof n != \"string\") throw new Error('Value must be \"string\" for expirer target type: topic');\n    return \"topic:\".concat(n);\n  } else if (e.toLowerCase() === \"id\") {\n    if (typeof n != \"number\") throw new Error('Value must be \"number\" for expirer target type: id');\n    return \"id:\".concat(n);\n  }\n  throw new Error(\"Unknown expirer target type: \".concat(e));\n}\nfunction Mn(e) {\n  return Y(\"topic\", e);\n}\nfunction Kn(e) {\n  return Y(\"id\", e);\n}\nfunction kn(e) {\n  var _e$split5 = e.split(\":\"),\n    _e$split6 = _slicedToArray(_e$split5, 2),\n    n = _e$split6[0],\n    t = _e$split6[1],\n    r = {\n      id: void 0,\n      topic: void 0\n    };\n  if (n === \"topic\" && typeof t == \"string\") r.topic = t;else if (n === \"id\" && Number.isInteger(Number(t))) r.id = Number(t);else throw new Error(\"Invalid target, expected id:number or topic:string, got \".concat(n, \":\").concat(t));\n  return r;\n}\nfunction Ln(e, n) {\n  return \"\".concat(e).concat(n ? \":\".concat(n) : \"\");\n}\nvar je = \"irn\";\nfunction Fn(e) {\n  return (e === null || e === void 0 ? void 0 : e.relay) || {\n    protocol: je\n  };\n}\nfunction Hn(e) {\n  var n = tn[e];\n  if (typeof n > \"u\") throw new Error(\"Relay Protocol not supported: \".concat(e));\n  return n;\n}\nvar qn = Object.defineProperty,\n  xe = Object.getOwnPropertySymbols,\n  Gn = Object.prototype.hasOwnProperty,\n  Bn = Object.prototype.propertyIsEnumerable,\n  Ve = function Ve(e, n, t) {\n    return n in e ? qn(e, n, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : e[n] = t;\n  },\n  zn = function zn(e, n) {\n    for (var t in n || (n = {})) {\n      Gn.call(n, t) && Ve(e, t, n[t]);\n    }\n    if (xe) {\n      var _iterator2 = _createForOfIteratorHelper(xe(n)),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var t = _step2.value;\n          Bn.call(n, t) && Ve(e, t, n[t]);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    return e;\n  };\nfunction Me(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n  var t = {},\n    r = \"relay\" + n;\n  return Object.keys(e).forEach(function (o) {\n    if (o.startsWith(r)) {\n      var i = o.replace(r, \"\"),\n        s = e[o];\n      t[i] = s;\n    }\n  }), t;\n}\nfunction Yn(e) {\n  var n = e.indexOf(\":\"),\n    t = e.indexOf(\"?\") !== -1 ? e.indexOf(\"?\") : void 0,\n    r = e.substring(0, n),\n    o = e.substring(n + 1, t).split(\"@\"),\n    i = typeof t < \"u\" ? e.substring(t) : \"\",\n    s = U.parse(i);\n  return {\n    protocol: r,\n    topic: o[0],\n    version: parseInt(o[1], 10),\n    symKey: s.symKey,\n    relay: Me(s)\n  };\n}\nfunction Ke(e) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n  var t = \"relay\",\n    r = {};\n  return Object.keys(e).forEach(function (o) {\n    var i = t + n + o;\n    e[o] && (r[i] = e[o]);\n  }), r;\n}\nfunction Jn(e) {\n  return \"\".concat(e.protocol, \":\").concat(e.topic, \"@\").concat(e.version, \"?\") + U.stringify(zn({\n    symKey: e.symKey\n  }, Ke(e.relay)));\n}\nfunction m(e) {\n  var n = [];\n  return e.forEach(function (t) {\n    var _t$split = t.split(\":\"),\n      _t$split2 = _slicedToArray(_t$split, 2),\n      r = _t$split2[0],\n      o = _t$split2[1];\n    n.push(\"\".concat(r, \":\").concat(o));\n  }), n;\n}\nfunction ke(e) {\n  var n = [];\n  return Object.values(e).forEach(function (t) {\n    n.push.apply(n, _toConsumableArray(m(t.accounts))), t.extension && t.extension.forEach(function (r) {\n      n.push.apply(n, _toConsumableArray(m(r.accounts)));\n    });\n  }), n;\n}\nfunction Le(e, n) {\n  var t = [];\n  return Object.values(e).forEach(function (r) {\n    m(r.accounts).includes(n) && t.push.apply(t, _toConsumableArray(r.methods)), r.extension && r.extension.forEach(function (o) {\n      m(o.accounts).includes(n) && t.push.apply(t, _toConsumableArray(o.methods));\n    });\n  }), t;\n}\nfunction Fe(e, n) {\n  var t = [];\n  return Object.values(e).forEach(function (r) {\n    m(r.accounts).includes(n) && t.push.apply(t, _toConsumableArray(r.events)), r.extension && r.extension.forEach(function (o) {\n      m(o.accounts).includes(n) && t.push.apply(t, _toConsumableArray(o.events));\n    });\n  }), t;\n}\nvar Wn = {\n    INVALID_METHOD: {\n      message: \"Invalid method.\",\n      code: 1001\n    },\n    INVALID_EVENT: {\n      message: \"Invalid event.\",\n      code: 1002\n    },\n    INVALID_UPDATE_REQUEST: {\n      message: \"Invalid update request.\",\n      code: 1003\n    },\n    INVALID_EXTEND_REQUEST: {\n      message: \"Invalid extend request.\",\n      code: 1004\n    },\n    INVALID_SESSION_SETTLE_REQUEST: {\n      message: \"Invalid session settle request.\",\n      code: 1005\n    },\n    UNAUTHORIZED_METHOD: {\n      message: \"Unauthorized method.\",\n      code: 3001\n    },\n    UNAUTHORIZED_EVENT: {\n      message: \"Unauthorized event.\",\n      code: 3002\n    },\n    UNAUTHORIZED_UPDATE_REQUEST: {\n      message: \"Unauthorized update request.\",\n      code: 3003\n    },\n    UNAUTHORIZED_EXTEND_REQUEST: {\n      message: \"Unauthorized extend request.\",\n      code: 3004\n    },\n    USER_REJECTED: {\n      message: \"User rejected.\",\n      code: 5e3\n    },\n    USER_REJECTED_CHAINS: {\n      message: \"User rejected chains.\",\n      code: 5001\n    },\n    USER_REJECTED_METHODS: {\n      message: \"User rejected methods.\",\n      code: 5002\n    },\n    USER_REJECTED_EVENTS: {\n      message: \"User rejected events.\",\n      code: 5003\n    },\n    UNSUPPORTED_CHAINS: {\n      message: \"Unsupported chains.\",\n      code: 5100\n    },\n    UNSUPPORTED_METHODS: {\n      message: \"Unsupported methods.\",\n      code: 5101\n    },\n    UNSUPPORTED_EVENTS: {\n      message: \"Unsupported events.\",\n      code: 5102\n    },\n    UNSUPPORTED_ACCOUNTS: {\n      message: \"Unsupported accounts.\",\n      code: 5103\n    },\n    UNSUPPORTED_NAMESPACE_KEY: {\n      message: \"Unsupported namespace key.\",\n      code: 5104\n    },\n    USER_DISCONNECTED: {\n      message: \"User disconnected.\",\n      code: 6e3\n    },\n    SESSION_SETTLEMENT_FAILED: {\n      message: \"Session settlement failed.\",\n      code: 7e3\n    }\n  },\n  Qn = {\n    NOT_INITIALIZED: {\n      message: \"Not initialized.\",\n      code: 1\n    },\n    NO_MATCHING_KEY: {\n      message: \"No matching key.\",\n      code: 2\n    },\n    RESTORE_WILL_OVERRIDE: {\n      message: \"Restore will override.\",\n      code: 3\n    },\n    RESUBSCRIBED: {\n      message: \"Resubscribed.\",\n      code: 4\n    },\n    MISSING_OR_INVALID: {\n      message: \"Missing or invalid.\",\n      code: 5\n    },\n    EXPIRED: {\n      message: \"Expired.\",\n      code: 6\n    },\n    UNKNOWN_TYPE: {\n      message: \"Unknown type.\",\n      code: 7\n    },\n    MISMATCHED_TOPIC: {\n      message: \"Mismatched topic.\",\n      code: 8\n    },\n    NON_CONFORMING_NAMESPACES: {\n      message: \"Non conforming namespaces.\",\n      code: 9\n    }\n  };\nfunction y(e, n) {\n  var _Qn$e = Qn[e],\n    t = _Qn$e.message,\n    r = _Qn$e.code;\n  return {\n    message: n ? \"\".concat(t, \" \").concat(n) : t,\n    code: r\n  };\n}\nfunction N(e, n) {\n  var _Wn$e = Wn[e],\n    t = _Wn$e.message,\n    r = _Wn$e.code;\n  return {\n    message: n ? \"\".concat(t, \" \").concat(n) : t,\n    code: r\n  };\n}\nfunction I(e, n) {\n  return Array.isArray(e) ? typeof n < \"u\" && e.length ? e.every(n) : !0 : !1;\n}\nfunction J(e) {\n  return Object.getPrototypeOf(e) === Object.prototype && Object.keys(e).length;\n}\nfunction E(e) {\n  return typeof e > \"u\";\n}\nfunction d(e, n) {\n  return n && E(e) ? !0 : typeof e == \"string\" && Boolean(e.trim().length);\n}\nfunction W(e, n) {\n  return n && E(e) ? !0 : typeof e == \"number\" && !isNaN(e);\n}\nfunction Zn(e, n) {\n  var t = n.requiredNamespaces,\n    r = Object.keys(e.namespaces),\n    o = Object.keys(t);\n  var i = !0;\n  return u(o, r) ? (r.forEach(function (s) {\n    var _e$namespaces$s = e.namespaces[s],\n      c = _e$namespaces$s.accounts,\n      l = _e$namespaces$s.methods,\n      h = _e$namespaces$s.events,\n      g = _e$namespaces$s.extension,\n      P = m(c),\n      v = t[s];\n    (!u(v.chains, P) || !u(v.methods, l) || !u(v.events, h)) && (i = !1), i && g && g.forEach(function (_) {\n      var b;\n      var j = _.accounts,\n        ze = _.methods,\n        Ye = _.events,\n        Je = m(j);\n      (b = v.extension) != null && b.find(function (x) {\n        return u(x.chains, Je) && u(x.methods, ze) && u(x.events, Ye);\n      }) || (i = !1);\n    });\n  }), i) : !1;\n}\nfunction D(e) {\n  return d(e, !1) && e.includes(\":\") ? e.split(\":\").length === 2 : !1;\n}\nfunction He(e) {\n  if (d(e, !1) && e.includes(\":\")) {\n    var n = e.split(\":\");\n    if (n.length === 3) {\n      var t = n[0] + \":\" + n[1];\n      return !!n[2] && D(t);\n    }\n  }\n  return !1;\n}\nfunction Xn(e) {\n  if (d(e, !1)) try {\n    return typeof new URL(e) < \"u\";\n  } catch (_unused) {\n    return !1;\n  }\n  return !1;\n}\nfunction et(e) {\n  var n;\n  return (n = e === null || e === void 0 ? void 0 : e.proposer) == null ? void 0 : n.publicKey;\n}\nfunction nt(e) {\n  return e === null || e === void 0 ? void 0 : e.topic;\n}\nfunction tt(e, n) {\n  var t = null;\n  return d(e === null || e === void 0 ? void 0 : e.publicKey, !1) || (t = y(\"MISSING_OR_INVALID\", \"\".concat(n, \" controller public key should be a string\"))), t;\n}\nfunction $(e, n) {\n  var t = null;\n  return E(e === null || e === void 0 ? void 0 : e.extension) || (!I(e.extension) || !e.extension.length) && (t = y(\"MISSING_OR_INVALID\", \"\".concat(n, \" extension should be an array of namespaces, or omitted\"))), t;\n}\nfunction Q(e) {\n  var n = !0;\n  return I(e) ? e.length && (n = e.every(function (t) {\n    return d(t, !1);\n  })) : n = !1, n;\n}\nfunction Z(e, n, t) {\n  var r = null;\n  return I(n) ? n.forEach(function (o) {\n    r || (!D(o) || !o.includes(e)) && (r = N(\"UNSUPPORTED_CHAINS\", \"\".concat(t, \", chain \").concat(o, \" should be a string and conform to \\\"namespace:chainId\\\" format\")));\n  }) : r = N(\"UNSUPPORTED_CHAINS\", \"\".concat(t, \", chains \").concat(n, \" should be an array of strings conforming to \\\"namespace:chainId\\\" format\")), r;\n}\nfunction qe(e, n) {\n  var t = null;\n  return Object.entries(e).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      r = _ref3[0],\n      o = _ref3[1];\n    if (t) return;\n    var i = Z(r, o === null || o === void 0 ? void 0 : o.chains, \"\".concat(n, \" requiredNamespace\")),\n      s = $(o, n);\n    i ? t = i : s ? t = s : o.extension && o.extension.forEach(function (c) {\n      if (t) return;\n      var l = Z(r, c.chains, \"\".concat(n, \" extension\"));\n      l && (t = l);\n    });\n  }), t;\n}\nfunction X(e, n) {\n  var t = null;\n  return I(e) ? e.forEach(function (r) {\n    t || He(r) || (t = N(\"UNSUPPORTED_ACCOUNTS\", \"\".concat(n, \", account \").concat(r, \" should be a string and conform to \\\"namespace:chainId:address\\\" format\")));\n  }) : t = N(\"UNSUPPORTED_ACCOUNTS\", \"\".concat(n, \", accounts should be an array of strings conforming to \\\"namespace:chainId:address\\\" format\")), t;\n}\nfunction Ge(e, n) {\n  var t = null;\n  return Object.values(e).forEach(function (r) {\n    if (t) return;\n    var o = X(r === null || r === void 0 ? void 0 : r.accounts, \"\".concat(n, \" namespace\")),\n      i = $(r, n);\n    o ? t = o : i ? t = i : r.extension && r.extension.forEach(function (s) {\n      if (t) return;\n      var c = X(s.accounts, \"\".concat(n, \" extension\"));\n      c && (t = c);\n    });\n  }), t;\n}\nfunction ee(e, n) {\n  var t = null;\n  return Q(e === null || e === void 0 ? void 0 : e.methods) ? Q(e === null || e === void 0 ? void 0 : e.events) || (t = N(\"UNSUPPORTED_EVENTS\", \"\".concat(n, \", events should be an array of strings or empty array for no events\"))) : t = N(\"UNSUPPORTED_METHODS\", \"\".concat(n, \", methods should be an array of strings or empty array for no methods\")), t;\n}\nfunction ne(e, n) {\n  var t = null;\n  return Object.values(e).forEach(function (r) {\n    if (t) return;\n    var o = ee(r, \"\".concat(n, \", namespace\")),\n      i = $(r, n);\n    o ? t = o : i ? t = i : r.extension && r.extension.forEach(function (s) {\n      if (t) return;\n      var c = ee(s, \"\".concat(n, \", extension\"));\n      c && (t = c);\n    });\n  }), t;\n}\nfunction rt(e, n) {\n  var t = null;\n  if (e && J(e)) {\n    var r = ne(e, n);\n    r && (t = r);\n    var o = qe(e, n);\n    o && (t = o);\n  } else t = y(\"MISSING_OR_INVALID\", \"\".concat(n, \", requiredNamespaces should be an object with data\"));\n  return t;\n}\nfunction ot(e, n) {\n  var t = null;\n  if (e && J(e)) {\n    var r = ne(e, n);\n    r && (t = r);\n    var o = Ge(e, n);\n    o && (t = o);\n  } else t = y(\"MISSING_OR_INVALID\", \"\".concat(n, \", namespaces should be an object with data\"));\n  return t;\n}\nfunction Be(e) {\n  return d(e.protocol, !0);\n}\nfunction st(e, n) {\n  var t = !1;\n  return n && !e ? t = !0 : e && I(e) && e.length && e.forEach(function (r) {\n    t = Be(r);\n  }), t;\n}\nfunction it(e) {\n  return typeof e == \"number\";\n}\nfunction ct(e) {\n  return typeof e < \"u\" && typeof e !== null;\n}\nfunction at(e) {\n  return !(!e || typeof e != \"object\" || !e.code || !W(e.code, !1) || !e.message || !d(e.message, !1));\n}\nfunction ut(e) {\n  return !(E(e) || !d(e.method, !1));\n}\nfunction dt(e) {\n  return !(E(e) || E(e.result) && E(e.error) || !W(e.id, !1) || !d(e.jsonrpc, !1));\n}\nfunction lt(e) {\n  return !(E(e) || !d(e.name, !1));\n}\nfunction ft(e, n) {\n  return !(!D(n) || !ke(e).includes(n));\n}\nfunction pt(e, n, t) {\n  return d(t, !1) ? Le(e, n).includes(t) : !1;\n}\nfunction mt(e, n, t) {\n  return d(t, !1) ? Fe(e, n).includes(t) : !1;\n}\nfunction yt(e, n, t) {\n  var r = null;\n  var o = Object.keys(e),\n    i = Object.keys(n);\n  return u(o, i) ? o.forEach(function (s) {\n    var c;\n    if (r) return;\n    var l = e[s].chains,\n      h = m(n[s].accounts);\n    u(l, h) ? u(e[s].methods, n[s].methods) ? u(e[s].events, n[s].events) ? e[s].extension && !n[s].extension ? r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces extension doesn't satisfy requiredNamespaces extension for \").concat(s)) : e[s].extension && n[s].extension && ((c = e[s].extension) == null || c.forEach(function (_ref4) {\n      var g = _ref4.methods,\n        P = _ref4.events,\n        v = _ref4.chains;\n      var _;\n      r || (_ = n[s].extension) != null && _.find(function (b) {\n        var j = m(b.accounts);\n        return u(v, j) && u(P, b.events) && u(g, b.methods);\n      }) || (r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces extension doesn't satisfy requiredNamespaces extension for \").concat(s)));\n    })) : r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces events don't satisfy requiredNamespaces events for \").concat(s)) : r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces methods don't satisfy requiredNamespaces methods for \").concat(s)) : r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces accounts don't satisfy requiredNamespaces chains for \").concat(s));\n  }) : r = y(\"NON_CONFORMING_NAMESPACES\", \"\".concat(t, \" namespaces keys don't satisfy requiredNamespaces\")), r;\n}\nexport { k as BASE10, a as BASE16, R as BASE64, On as COLON, G as DEFAULT_DEPTH, w as EMPTY_SPACE, S as ENV_MAP, Sn as ONE_THOUSAND, Se as REACT_NATIVE_PRODUCT, je as RELAYER_DEFAULT_PROTOCOL, Pe as SDK_TYPE, Ie as SLASH, L as TYPE_0, O as TYPE_1, C as UTF8, Ue as appendToQueryString, Un as assertType, jn as calcExpiry, $n as capitalize, $e as capitalizeWord, Vn as createDelayedPromise, T as decodeTypeByte, En as decrypt, fn as deriveSymKey, q as deserialize, he as encodeTypeByte, yn as encrypt, Ln as engineEvent, Dn as enumify, fe as formatAccountId, rn as formatAccountWithChain, le as formatChainId, Y as formatExpirerTarget, Kn as formatIdTarget, An as formatMessageContext, Ke as formatRelayParams, Tn as formatRelayRpcUrl, Mn as formatTopicTarget, Ce as formatUA, Jn as formatUri, dn as generateKeyPair, ln as generateRandomBytes32, m as getAccountsChains, sn as getAccountsFromNamespaces, pe as getAddressFromAccount, on as getAddressesFromAccounts, In as getAppMetadata, me as getChainFromAccount, ye as getChainsFromAccounts, cn as getChainsFromNamespaces, an as getChainsFromRequiredNamespaces, z as getEnvironment, _n as getHttpUrl, y as getInternalError, Re as getJavascriptID, Ae as getJavascriptOS, De as getLastItems, ke as getNamespacesChains, Fe as getNamespacesEventsForChainId, Le as getNamespacesMethodsForChainId, Pn as getRelayClientMetadata, Hn as getRelayProtocolApi, Fn as getRelayProtocolName, N as getSdkError, K as getUniqueValues, u as hasOverlap, pn as hashKey, mn as hashMessage, _e as isBrowser, yt as isConformingNamespaces, xn as isExpired, B as isNode, et as isProposalStruct, Te as isReactNative, Zn as isSessionCompatible, nt as isSessionStruct, Nn as isTypeOneEnvelope, E as isUndefined, He as isValidAccountId, X as isValidAccounts, ee as isValidActions, I as isValidArray, D as isValidChainId, Z as isValidChains, tt as isValidController, at as isValidErrorReason, lt as isValidEvent, $ as isValidExtension, it as isValidId, Ge as isValidNamespaceAccounts, ne as isValidNamespaceActions, qe as isValidNamespaceChains, Q as isValidNamespaceMethodsOrEvents, ot as isValidNamespaces, ft as isValidNamespacesChainId, mt as isValidNamespacesEvent, pt as isValidNamespacesRequest, W as isValidNumber, J as isValidObject, ct as isValidParams, Be as isValidRelay, st as isValidRelays, ut as isValidRequest, rt as isValidRequiredNamespaces, dt as isValidResponse, d as isValidString, Xn as isValidUrl, wn as mapEntries, Rn as mapToObj, Cn as objToMap, M as parseAccountId, de as parseChainId, we as parseContextNames, kn as parseExpirerTarget, Me as parseRelayParams, Yn as parseUri, Ne as serialize, hn as validateDecoding, ge as validateEncoding };","map":{"version":3,"sources":[],"names":[],"mappings":"","sourcesContent":["import{ChaCha20Poly1305 as te}from\"@stablelib/chacha20poly1305\";import{HKDF as We}from\"@stablelib/hkdf\";import{randomBytes as re}from\"@stablelib/random\";import{SHA256 as Qe,hash as oe}from\"@stablelib/sha256\";import*as se from\"@stablelib/x25519\";import{toString as f,fromString as p,concat as ie}from\"uint8arrays\";import{detect as Ze}from\"detect-browser\";import{fromMiliseconds as ce,toMiliseconds as V,FIVE_MINUTES as Xe}from\"@walletconnect/time\";import{getDocument as en,getNavigator as ae,getLocation as ue}from\"@walletconnect/window-getters\";import{getWindowMetadata as nn}from\"@walletconnect/window-metadata\";import*as U from\"query-string\";import{RELAY_JSONRPC as tn}from\"@walletconnect/relay-api\";const A=\":\";function de(e){const[n,t]=e.split(A);return{namespace:n,reference:t}}function le(e){const{namespace:n,reference:t}=e;return[n,t].join(A)}function M(e){const[n,t,r]=e.split(A);return{namespace:n,reference:t,address:r}}function fe(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(A)}function K(e,n){const t=[];return e.forEach(r=>{const o=n(r);t.includes(o)||t.push(o)}),t}function pe(e){const{address:n}=M(e);return n}function me(e){const{namespace:n,reference:t}=M(e);return le({namespace:n,reference:t})}function rn(e,n){const{namespace:t,reference:r}=de(n);return fe({namespace:t,reference:r,address:e})}function on(e){return K(e,pe)}function ye(e){return K(e,me)}function sn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)}),t}function cn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...ye(o.accounts))}),t}function an(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.chains)}),t}const k=\"base10\",a=\"base16\",R=\"base64pad\",C=\"utf8\",L=0,O=1,un=0,Ee=1,F=12,H=32;function dn(){const e=se.generateKeyPair();return{privateKey:f(e.secretKey,a),publicKey:f(e.publicKey,a)}}function ln(){const e=re(H);return f(e,a)}function fn(e,n){const t=se.sharedKey(p(e,a),p(n,a)),r=new We(Qe,t).expand(H);return f(r,a)}function pn(e){const n=oe(p(e,a));return f(n,a)}function mn(e){const n=oe(p(e,C));return f(n,a)}function he(e){return p(`${e}`,k)}function T(e){return Number(f(e,k))}function yn(e){const n=he(typeof e.type<\"u\"?e.type:L);if(T(n)===O&&typeof e.senderPublicKey>\"u\")throw new Error(\"Missing sender public key for type 1 envelope\");const t=typeof e.senderPublicKey<\"u\"?p(e.senderPublicKey,a):void 0,r=typeof e.iv<\"u\"?p(e.iv,a):re(F),o=new te(p(e.symKey,a)).seal(r,p(e.message,C));return Ne({type:n,sealed:o,iv:r,senderPublicKey:t})}function En(e){const n=new te(p(e.symKey,a)),{sealed:t,iv:r}=q(e.encoded),o=n.open(r,t);if(o===null)throw new Error(\"Failed to decrypt\");return f(o,C)}function Ne(e){if(T(e.type)===O){if(typeof e.senderPublicKey>\"u\")throw new Error(\"Missing sender public key for type 1 envelope\");return f(ie([e.type,e.senderPublicKey,e.iv,e.sealed]),R)}return f(ie([e.type,e.iv,e.sealed]),R)}function q(e){const n=p(e,R),t=n.slice(un,Ee),r=Ee;if(T(t)===O){const c=r+H,l=c+F,h=n.slice(r,c),g=n.slice(c,l),P=n.slice(l);return{type:t,sealed:P,iv:g,senderPublicKey:h}}const o=r+F,i=n.slice(r,o),s=n.slice(o);return{type:t,sealed:s,iv:i}}function hn(e,n){const t=q(e);return ge({type:T(t.type),senderPublicKey:typeof t.senderPublicKey<\"u\"?f(t.senderPublicKey,a):void 0,receiverPublicKey:n?.receiverPublicKey})}function ge(e){const n=e?.type||L;if(n===O){if(typeof e?.senderPublicKey>\"u\")throw new Error(\"missing sender public key\");if(typeof e?.receiverPublicKey>\"u\")throw new Error(\"missing receiver public key\")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Nn(e){return e.type===O&&typeof e.senderPublicKey==\"string\"&&typeof e.receiverPublicKey==\"string\"}var gn=Object.defineProperty,ve=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,be=(e,n,t)=>n in e?gn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Oe=(e,n)=>{for(var t in n||(n={}))vn.call(n,t)&&be(e,t,n[t]);if(ve)for(var t of ve(n))bn.call(n,t)&&be(e,t,n[t]);return e};const Se=\"ReactNative\",S={reactNative:\"react-native\",node:\"node\",browser:\"browser\",unknown:\"unknown\"},w=\" \",On=\":\",Ie=\"/\",G=2,Sn=1e3,Pe=\"js\";function B(){return typeof process<\"u\"&&typeof process.versions<\"u\"&&typeof process.versions.node<\"u\"}function Te(){return!en()&&!!ae()&&navigator.product===Se}function _e(){return!B()&&!!ae()}function z(){return Te()?S.reactNative:B()?S.node:_e()?S.browser:S.unknown}function Ue(e,n){let t=U.parse(e);return t=Oe(Oe({},t),n),e=U.stringify(t),e}function In(){return nn()||{name:\"\",description:\"\",url:\"\",icons:[\"\"]}}function Pn(e,n){var t;const r=z(),o={protocol:e,version:n,env:r};return r===\"browser\"&&(o.host=((t=ue())==null?void 0:t.host)||\"unknown\"),o}function Ae(){const e=Ze();if(e===null)return\"unknown\";const n=e.os?e.os.replace(\" \",\"\").toLowerCase():\"unknown\";return e.type===\"browser\"?[n,e.name,e.version].join(\"-\"):[n,e.version].join(\"-\")}function Re(){var e;const n=z();return n===S.browser?[n,((e=ue())==null?void 0:e.host)||\"unknown\"].join(\":\"):n}function Ce(e,n,t){const r=Ae(),o=Re();return[[e,n].join(\"-\"),[Pe,t].join(\"-\"),r,o].join(\"/\")}function Tn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:i}){const s=t.split(\"?\"),c=Ce(e,n,r),l={auth:o,ua:c,projectId:i},h=Ue(s[1]||\"\",l);return s[0]+\"?\"+h}function _n(e){let n=(e.match(/^[^:]+(?=:\\/\\/)/gi)||[])[0];const t=typeof n<\"u\"?e.split(\"://\")[1]:e;return n=n===\"wss\"?\"https\":\"http\",[n,t].join(\"://\")}function Un(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid \"${n}\" param`)}function we(e,n=G){return De(e.split(Ie),n)}function An(e){return we(e).join(w)}function u(e,n){return e.filter(t=>n.includes(t)).length===e.length}function De(e,n=G){return e.slice(Math.max(e.length-n,0))}function Rn(e){return Object.fromEntries(e.entries())}function Cn(e){return new Map(Object.entries(e))}function wn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const Dn=e=>e;function $e(e){return e.trim().replace(/^\\w/,n=>n.toUpperCase())}function $n(e){return e.split(w).map(n=>$e(n)).join(w)}function jn(e,n){return ce((n||Date.now())+V(e))}function xn(e){return ce(Date.now())>=V(e)}function Vn(){const e=V(Xe);let n,t,r;return{resolve:o=>{r&&n&&(clearTimeout(r),n(o))},reject:o=>{r&&t&&(clearTimeout(r),t(o))},done:()=>new Promise((o,i)=>{r=setTimeout(i,e),n=o,t=i})}}function Y(e,n){if(typeof n==\"string\"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()===\"topic\"){if(typeof n!=\"string\")throw new Error('Value must be \"string\" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()===\"id\"){if(typeof n!=\"number\")throw new Error('Value must be \"number\" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function Mn(e){return Y(\"topic\",e)}function Kn(e){return Y(\"id\",e)}function kn(e){const[n,t]=e.split(\":\"),r={id:void 0,topic:void 0};if(n===\"topic\"&&typeof t==\"string\")r.topic=t;else if(n===\"id\"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function Ln(e,n){return`${e}${n?`:${n}`:\"\"}`}const je=\"irn\";function Fn(e){return e?.relay||{protocol:je}}function Hn(e){const n=tn[e];if(typeof n>\"u\")throw new Error(`Relay Protocol not supported: ${e}`);return n}var qn=Object.defineProperty,xe=Object.getOwnPropertySymbols,Gn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable,Ve=(e,n,t)=>n in e?qn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,zn=(e,n)=>{for(var t in n||(n={}))Gn.call(n,t)&&Ve(e,t,n[t]);if(xe)for(var t of xe(n))Bn.call(n,t)&&Ve(e,t,n[t]);return e};function Me(e,n=\"-\"){const t={},r=\"relay\"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const i=o.replace(r,\"\"),s=e[o];t[i]=s}}),t}function Yn(e){const n=e.indexOf(\":\"),t=e.indexOf(\"?\")!==-1?e.indexOf(\"?\"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split(\"@\"),i=typeof t<\"u\"?e.substring(t):\"\",s=U.parse(i);return{protocol:r,topic:o[0],version:parseInt(o[1],10),symKey:s.symKey,relay:Me(s)}}function Ke(e,n=\"-\"){const t=\"relay\",r={};return Object.keys(e).forEach(o=>{const i=t+n+o;e[o]&&(r[i]=e[o])}),r}function Jn(e){return`${e.protocol}:${e.topic}@${e.version}?`+U.stringify(zn({symKey:e.symKey},Ke(e.relay)))}function m(e){const n=[];return e.forEach(t=>{const[r,o]=t.split(\":\");n.push(`${r}:${o}`)}),n}function ke(e){const n=[];return Object.values(e).forEach(t=>{n.push(...m(t.accounts)),t.extension&&t.extension.forEach(r=>{n.push(...m(r.accounts))})}),n}function Le(e,n){const t=[];return Object.values(e).forEach(r=>{m(r.accounts).includes(n)&&t.push(...r.methods),r.extension&&r.extension.forEach(o=>{m(o.accounts).includes(n)&&t.push(...o.methods)})}),t}function Fe(e,n){const t=[];return Object.values(e).forEach(r=>{m(r.accounts).includes(n)&&t.push(...r.events),r.extension&&r.extension.forEach(o=>{m(o.accounts).includes(n)&&t.push(...o.events)})}),t}const Wn={INVALID_METHOD:{message:\"Invalid method.\",code:1001},INVALID_EVENT:{message:\"Invalid event.\",code:1002},INVALID_UPDATE_REQUEST:{message:\"Invalid update request.\",code:1003},INVALID_EXTEND_REQUEST:{message:\"Invalid extend request.\",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:\"Invalid session settle request.\",code:1005},UNAUTHORIZED_METHOD:{message:\"Unauthorized method.\",code:3001},UNAUTHORIZED_EVENT:{message:\"Unauthorized event.\",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:\"Unauthorized update request.\",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:\"Unauthorized extend request.\",code:3004},USER_REJECTED:{message:\"User rejected.\",code:5e3},USER_REJECTED_CHAINS:{message:\"User rejected chains.\",code:5001},USER_REJECTED_METHODS:{message:\"User rejected methods.\",code:5002},USER_REJECTED_EVENTS:{message:\"User rejected events.\",code:5003},UNSUPPORTED_CHAINS:{message:\"Unsupported chains.\",code:5100},UNSUPPORTED_METHODS:{message:\"Unsupported methods.\",code:5101},UNSUPPORTED_EVENTS:{message:\"Unsupported events.\",code:5102},UNSUPPORTED_ACCOUNTS:{message:\"Unsupported accounts.\",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:\"Unsupported namespace key.\",code:5104},USER_DISCONNECTED:{message:\"User disconnected.\",code:6e3},SESSION_SETTLEMENT_FAILED:{message:\"Session settlement failed.\",code:7e3}},Qn={NOT_INITIALIZED:{message:\"Not initialized.\",code:1},NO_MATCHING_KEY:{message:\"No matching key.\",code:2},RESTORE_WILL_OVERRIDE:{message:\"Restore will override.\",code:3},RESUBSCRIBED:{message:\"Resubscribed.\",code:4},MISSING_OR_INVALID:{message:\"Missing or invalid.\",code:5},EXPIRED:{message:\"Expired.\",code:6},UNKNOWN_TYPE:{message:\"Unknown type.\",code:7},MISMATCHED_TOPIC:{message:\"Mismatched topic.\",code:8},NON_CONFORMING_NAMESPACES:{message:\"Non conforming namespaces.\",code:9}};function y(e,n){const{message:t,code:r}=Qn[e];return{message:n?`${t} ${n}`:t,code:r}}function N(e,n){const{message:t,code:r}=Wn[e];return{message:n?`${t} ${n}`:t,code:r}}function I(e,n){return Array.isArray(e)?typeof n<\"u\"&&e.length?e.every(n):!0:!1}function J(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function E(e){return typeof e>\"u\"}function d(e,n){return n&&E(e)?!0:typeof e==\"string\"&&Boolean(e.trim().length)}function W(e,n){return n&&E(e)?!0:typeof e==\"number\"&&!isNaN(e)}function Zn(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let i=!0;return u(o,r)?(r.forEach(s=>{const{accounts:c,methods:l,events:h,extension:g}=e.namespaces[s],P=m(c),v=t[s];(!u(v.chains,P)||!u(v.methods,l)||!u(v.events,h))&&(i=!1),i&&g&&g.forEach(_=>{var b;const{accounts:j,methods:ze,events:Ye}=_,Je=m(j);(b=v.extension)!=null&&b.find(x=>u(x.chains,Je)&&u(x.methods,ze)&&u(x.events,Ye))||(i=!1)})}),i):!1}function D(e){return d(e,!1)&&e.includes(\":\")?e.split(\":\").length===2:!1}function He(e){if(d(e,!1)&&e.includes(\":\")){const n=e.split(\":\");if(n.length===3){const t=n[0]+\":\"+n[1];return!!n[2]&&D(t)}}return!1}function Xn(e){if(d(e,!1))try{return typeof new URL(e)<\"u\"}catch{return!1}return!1}function et(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function nt(e){return e?.topic}function tt(e,n){let t=null;return d(e?.publicKey,!1)||(t=y(\"MISSING_OR_INVALID\",`${n} controller public key should be a string`)),t}function $(e,n){let t=null;return E(e?.extension)||(!I(e.extension)||!e.extension.length)&&(t=y(\"MISSING_OR_INVALID\",`${n} extension should be an array of namespaces, or omitted`)),t}function Q(e){let n=!0;return I(e)?e.length&&(n=e.every(t=>d(t,!1))):n=!1,n}function Z(e,n,t){let r=null;return I(n)?n.forEach(o=>{r||(!D(o)||!o.includes(e))&&(r=N(\"UNSUPPORTED_CHAINS\",`${t}, chain ${o} should be a string and conform to \"namespace:chainId\" format`))}):r=N(\"UNSUPPORTED_CHAINS\",`${t}, chains ${n} should be an array of strings conforming to \"namespace:chainId\" format`),r}function qe(e,n){let t=null;return Object.entries(e).forEach(([r,o])=>{if(t)return;const i=Z(r,o?.chains,`${n} requiredNamespace`),s=$(o,n);i?t=i:s?t=s:o.extension&&o.extension.forEach(c=>{if(t)return;const l=Z(r,c.chains,`${n} extension`);l&&(t=l)})}),t}function X(e,n){let t=null;return I(e)?e.forEach(r=>{t||He(r)||(t=N(\"UNSUPPORTED_ACCOUNTS\",`${n}, account ${r} should be a string and conform to \"namespace:chainId:address\" format`))}):t=N(\"UNSUPPORTED_ACCOUNTS\",`${n}, accounts should be an array of strings conforming to \"namespace:chainId:address\" format`),t}function Ge(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=X(r?.accounts,`${n} namespace`),i=$(r,n);o?t=o:i?t=i:r.extension&&r.extension.forEach(s=>{if(t)return;const c=X(s.accounts,`${n} extension`);c&&(t=c)})}),t}function ee(e,n){let t=null;return Q(e?.methods)?Q(e?.events)||(t=N(\"UNSUPPORTED_EVENTS\",`${n}, events should be an array of strings or empty array for no events`)):t=N(\"UNSUPPORTED_METHODS\",`${n}, methods should be an array of strings or empty array for no methods`),t}function ne(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=ee(r,`${n}, namespace`),i=$(r,n);o?t=o:i?t=i:r.extension&&r.extension.forEach(s=>{if(t)return;const c=ee(s,`${n}, extension`);c&&(t=c)})}),t}function rt(e,n){let t=null;if(e&&J(e)){const r=ne(e,n);r&&(t=r);const o=qe(e,n);o&&(t=o)}else t=y(\"MISSING_OR_INVALID\",`${n}, requiredNamespaces should be an object with data`);return t}function ot(e,n){let t=null;if(e&&J(e)){const r=ne(e,n);r&&(t=r);const o=Ge(e,n);o&&(t=o)}else t=y(\"MISSING_OR_INVALID\",`${n}, namespaces should be an object with data`);return t}function Be(e){return d(e.protocol,!0)}function st(e,n){let t=!1;return n&&!e?t=!0:e&&I(e)&&e.length&&e.forEach(r=>{t=Be(r)}),t}function it(e){return typeof e==\"number\"}function ct(e){return typeof e<\"u\"&&typeof e!==null}function at(e){return!(!e||typeof e!=\"object\"||!e.code||!W(e.code,!1)||!e.message||!d(e.message,!1))}function ut(e){return!(E(e)||!d(e.method,!1))}function dt(e){return!(E(e)||E(e.result)&&E(e.error)||!W(e.id,!1)||!d(e.jsonrpc,!1))}function lt(e){return!(E(e)||!d(e.name,!1))}function ft(e,n){return!(!D(n)||!ke(e).includes(n))}function pt(e,n,t){return d(t,!1)?Le(e,n).includes(t):!1}function mt(e,n,t){return d(t,!1)?Fe(e,n).includes(t):!1}function yt(e,n,t){let r=null;const o=Object.keys(e),i=Object.keys(n);return u(o,i)?o.forEach(s=>{var c;if(r)return;const l=e[s].chains,h=m(n[s].accounts);u(l,h)?u(e[s].methods,n[s].methods)?u(e[s].events,n[s].events)?e[s].extension&&!n[s].extension?r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces extension doesn't satisfy requiredNamespaces extension for ${s}`):e[s].extension&&n[s].extension&&((c=e[s].extension)==null||c.forEach(({methods:g,events:P,chains:v})=>{var _;r||(_=n[s].extension)!=null&&_.find(b=>{const j=m(b.accounts);return u(v,j)&&u(P,b.events)&&u(g,b.methods)})||(r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces extension doesn't satisfy requiredNamespaces extension for ${s}`))})):r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces events don't satisfy requiredNamespaces events for ${s}`):r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces methods don't satisfy requiredNamespaces methods for ${s}`):r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces accounts don't satisfy requiredNamespaces chains for ${s}`)}):r=y(\"NON_CONFORMING_NAMESPACES\",`${t} namespaces keys don't satisfy requiredNamespaces`),r}export{k as BASE10,a as BASE16,R as BASE64,On as COLON,G as DEFAULT_DEPTH,w as EMPTY_SPACE,S as ENV_MAP,Sn as ONE_THOUSAND,Se as REACT_NATIVE_PRODUCT,je as RELAYER_DEFAULT_PROTOCOL,Pe as SDK_TYPE,Ie as SLASH,L as TYPE_0,O as TYPE_1,C as UTF8,Ue as appendToQueryString,Un as assertType,jn as calcExpiry,$n as capitalize,$e as capitalizeWord,Vn as createDelayedPromise,T as decodeTypeByte,En as decrypt,fn as deriveSymKey,q as deserialize,he as encodeTypeByte,yn as encrypt,Ln as engineEvent,Dn as enumify,fe as formatAccountId,rn as formatAccountWithChain,le as formatChainId,Y as formatExpirerTarget,Kn as formatIdTarget,An as formatMessageContext,Ke as formatRelayParams,Tn as formatRelayRpcUrl,Mn as formatTopicTarget,Ce as formatUA,Jn as formatUri,dn as generateKeyPair,ln as generateRandomBytes32,m as getAccountsChains,sn as getAccountsFromNamespaces,pe as getAddressFromAccount,on as getAddressesFromAccounts,In as getAppMetadata,me as getChainFromAccount,ye as getChainsFromAccounts,cn as getChainsFromNamespaces,an as getChainsFromRequiredNamespaces,z as getEnvironment,_n as getHttpUrl,y as getInternalError,Re as getJavascriptID,Ae as getJavascriptOS,De as getLastItems,ke as getNamespacesChains,Fe as getNamespacesEventsForChainId,Le as getNamespacesMethodsForChainId,Pn as getRelayClientMetadata,Hn as getRelayProtocolApi,Fn as getRelayProtocolName,N as getSdkError,K as getUniqueValues,u as hasOverlap,pn as hashKey,mn as hashMessage,_e as isBrowser,yt as isConformingNamespaces,xn as isExpired,B as isNode,et as isProposalStruct,Te as isReactNative,Zn as isSessionCompatible,nt as isSessionStruct,Nn as isTypeOneEnvelope,E as isUndefined,He as isValidAccountId,X as isValidAccounts,ee as isValidActions,I as isValidArray,D as isValidChainId,Z as isValidChains,tt as isValidController,at as isValidErrorReason,lt as isValidEvent,$ as isValidExtension,it as isValidId,Ge as isValidNamespaceAccounts,ne as isValidNamespaceActions,qe as isValidNamespaceChains,Q as isValidNamespaceMethodsOrEvents,ot as isValidNamespaces,ft as isValidNamespacesChainId,mt as isValidNamespacesEvent,pt as isValidNamespacesRequest,W as isValidNumber,J as isValidObject,ct as isValidParams,Be as isValidRelay,st as isValidRelays,ut as isValidRequest,rt as isValidRequiredNamespaces,dt as isValidResponse,d as isValidString,Xn as isValidUrl,wn as mapEntries,Rn as mapToObj,Cn as objToMap,M as parseAccountId,de as parseChainId,we as parseContextNames,kn as parseExpirerTarget,Me as parseRelayParams,Yn as parseUri,Ne as serialize,hn as validateDecoding,ge as validateEncoding};\n//# sourceMappingURL=index.es.js.map\n"]},"metadata":{},"sourceType":"module"}