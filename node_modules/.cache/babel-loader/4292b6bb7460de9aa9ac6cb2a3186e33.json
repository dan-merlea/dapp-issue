{"ast":null,"code":"var _jsxFileName = \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/packages/client/src/gui/hud/AsteroidDetails.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Box, Button, Space, Text, View } from 'gui/uielements';\nimport { useRoomContext } from 'context/room';\nimport { actionWhenTrue } from 'utils/pooling';\n\n/**\n * A menu displaying tile contents\n */\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function AsteroidDetails(props) {\n  _s();\n  var _this = this;\n  var _useRoomContext = useRoomContext(),\n    hud = _useRoomContext.hud;\n  var asteroid = props.asteroid,\n    eventHandler = props.eventHandler;\n  var starMining = function starMining() {\n    eventHandler.send('closePopup', 'close');\n    actionWhenTrue(function () {\n      var _hud$controlledSpaces, _hud$controlledSpaces2;\n      return (_hud$controlledSpaces = (_hud$controlledSpaces2 = hud.controlledSpaceship) === null || _hud$controlledSpaces2 === void 0 ? void 0 : _hud$controlledSpaces2.velocity.isEmpty) !== null && _hud$controlledSpaces !== void 0 ? _hud$controlledSpaces : false;\n    }, function () {\n      eventHandler.send('mineAsteroid', asteroid);\n    }, 500);\n  };\n  var materials = function materials() {\n    if (!asteroid.materials) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    return asteroid.materials.map(function (material, i) {\n      return /*#__PURE__*/_jsxDEV(View, {\n        children: [/*#__PURE__*/_jsxDEV(View, {\n          flex: true,\n          center: true,\n          children: /*#__PURE__*/_jsxDEV(View, {\n            center: true,\n            textCenter: true,\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              type: \"body\",\n              children: [material.name, \" ( \", material.type, \" )\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 34,\n              columnNumber: 25\n            }, _this), /*#__PURE__*/_jsxDEV(Space, {\n              size: \"xxs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 25\n            }, _this), /*#__PURE__*/_jsxDEV(Text, {\n              type: \"body\",\n              children: material.production.toFixed(5)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 25\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Space, {\n          size: \"s\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }, _this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }, _this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(View, {\n    fullscreen: true,\n    flex: true,\n    center: true,\n    backdrop: true,\n    popup: true,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      popup: true,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        center: true,\n        type: \"title\",\n        children: [\"Asteroid #\", asteroid.nonce]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        size: \"xs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), materials(), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: starMining,\n        children: \"START MINING\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        size: \"xs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(View, {\n        flex: true,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          reversed: true,\n          onClick: function onClick() {\n            return eventHandler.send('closePopup', 'close');\n          },\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\n_s(AsteroidDetails, \"AACP5AzPInI+XUzuT6dWbtle1Cs=\", false, function () {\n  return [useRoomContext];\n});\n_c = AsteroidDetails;\nvar _c;\n$RefreshReg$(_c, \"AsteroidDetails\");","map":{"version":3,"names":["React","Box","Button","Space","Text","View","useRoomContext","actionWhenTrue","AsteroidDetails","props","hud","asteroid","eventHandler","starMining","send","controlledSpaceship","velocity","isEmpty","materials","map","material","i","name","type","production","toFixed","nonce"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/packages/client/src/gui/hud/AsteroidDetails.tsx"],"sourcesContent":["import React from 'react';\nimport { EventHandler } from '@krogan/common';\nimport { Box, Button, Space, Text, View } from 'gui/uielements';\nimport { Asteroid } from 'state/Asteroid';\nimport { useRoomContext } from 'context/room';\nimport { actionWhenTrue } from 'utils/pooling';\n\n/**\n * A menu displaying tile contents\n */\nexport function AsteroidDetails(props: { \n\tasteroid: Asteroid,\n\teventHandler: EventHandler\n}): React.ReactElement {\n\n    const { hud } = useRoomContext()\n    const { asteroid, eventHandler } = props;\n\n    const starMining = () => {\n        eventHandler.send('closePopup', 'close')\n        actionWhenTrue(() => {\n            return hud.controlledSpaceship?.velocity.isEmpty ?? false\n        }, () => {\n            eventHandler.send('mineAsteroid', asteroid)\n        }, 500)\n    }\n\n\tconst materials = () => {\n        if (!asteroid.materials) return <></>\n        return asteroid.materials.map((material, i) => (\n            <View key={i}>\n                <View flex center>\n                    <View center textCenter>\n                        <Text type='body'>{material.name} ( {material.type} )</Text>\n                        <Space size=\"xxs\" />\n                        <Text type='body'>{material.production.toFixed(5)}</Text>\n                    </View>\n                </View>\n                <Space size=\"s\" />\n            </View>            \n        ))\n    }\n\n    return (\n        <View fullscreen flex center backdrop popup>\n            <Box popup>\n                {/* Share */}\n                <Text center type='title'>Asteroid #{asteroid.nonce}</Text>\n                <Space size=\"xs\" />\n\n\t\t\t\t{materials()}\n\n                <Button onClick={starMining}>\n                    START MINING\n                </Button>\n\n                <Space size=\"xs\" />\n\n                <View flex>\n                    <Button reversed onClick={() => eventHandler.send('closePopup', 'close')}>\n                        Close\n                    </Button>\n                </View>\n            </Box>\n        </View>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}