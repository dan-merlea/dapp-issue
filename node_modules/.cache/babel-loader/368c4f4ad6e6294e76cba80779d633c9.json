{"ast":null,"code":"import _slicedToArray from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Menu}from'.';import{Keys}from'@krogan/common';import React from'react';import{Announce}from'./Announce';import{View}from'gui/uielements';import{isMobile}from'react-device-detect';import{Controls}from'./Controls';import{TileDetails}from'./TileDetails';import{SpaceshipDetails}from'./SpaceshipDetails';import{useRoomContext}from'context/room';import{PointDetails}from'./PointDetails';import{AsteroidDetails}from'./AsteroidDetails';import{SpaceshipPanels}from'./SpaceshipPanels';import{SpaceshipCargo}from'./SpaceshipCargo';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HUD_PADDING=isMobile?16:24;/**\n * The interface displaying important information to the user\n */export var HUD=/*#__PURE__*/React.memo(function(props){var _useRoomContext=useRoomContext(),hud=_useRoomContext.hud,gameRoom=_useRoomContext.gameRoom;var eventHandler=props.eventHandler;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),showMenu=_React$useState2[0],setShowMenu=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),showCargo=_React$useState4[0],setShowCargo=_React$useState4[1];var handleLeave=function handleLeave(){window.location.href=window.location.origin;};var handleKeyDown=function handleKeyDown(event){var key=event.code;if(Keys.MENU.includes(key)){event.preventDefault();event.stopPropagation();// setMenuOpened((prev) => !prev)\neventHandler.send('closePopup');}};var handleKeyUp=function handleKeyUp(event){var key=event.code;};React.useEffect(function(){// Listen for key presses (and unlisten on unmount).\nwindow.document.addEventListener('keydown',handleKeyDown);window.document.addEventListener('keyup',handleKeyUp);return function(){window.document.removeEventListener('keydown',handleKeyDown);window.document.removeEventListener('keyup',handleKeyUp);};},[]);React.useEffect(function(){if(hud.controlledSpaceship){console.log('[Mining][Setup][HUD]');hud.controlledSpaceship.spaceship.listen('mining',function(){var _hud$controlledSpaces;setShowCargo(((_hud$controlledSpaces=hud.controlledSpaceship)===null||_hud$controlledSpaces===void 0?void 0:_hud$controlledSpaces.spaceship.mining)!=undefined);});}},[hud.controlledSpaceship]);return/*#__PURE__*/_jsxs(View,{flex:true,center:true,style:styles.hud,children:[/*#__PURE__*/_jsx(Announce,{announce:hud.announce,style:styles.announce}),/*#__PURE__*/_jsx(Controls,{style:styles.controls,mapButton:gameRoom!=undefined,backButton:hud.backButtonVisible,eventHandler:eventHandler}),hud.controlledSpaceship&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SpaceshipPanels,{style:styles.panels,spaceship:hud.controlledSpaceship.spaceship}),showCargo&&/*#__PURE__*/_jsx(SpaceshipCargo,{style:styles.cargo,spaceship:hud.controlledSpaceship.spaceship})]}),showMenu?/*#__PURE__*/_jsx(Menu,{onClose:function onClose(){return setShowMenu(false);},onLeave:handleLeave}):null,hud.selectedTile&&/*#__PURE__*/_jsx(TileDetails,{eventHandler:eventHandler,tile:hud.selectedTile}),hud.selectedSpaceship&&/*#__PURE__*/_jsx(SpaceshipDetails,{eventHandler:eventHandler,spaceship:hud.selectedSpaceship.spaceship}),hud.selectedPoint&&/*#__PURE__*/_jsx(PointDetails,{point:hud.selectedPoint,eventHandler:eventHandler}),hud.selectedAsteroid&&/*#__PURE__*/_jsx(AsteroidDetails,{asteroid:hud.selectedAsteroid,eventHandler:eventHandler})]});});var styles={hud:{},controls:{position:'absolute',right:HUD_PADDING,bottom:HUD_PADDING},panels:{position:'absolute',left:HUD_PADDING,bottom:HUD_PADDING},cargo:{position:'absolute',left:HUD_PADDING,top:HUD_PADDING},players:{position:'absolute',right:HUD_PADDING,top:HUD_PADDING},messages:{position:'absolute',left:HUD_PADDING,bottom:HUD_PADDING},announce:{position:'absolute'}};","map":null,"metadata":{},"sourceType":"module"}