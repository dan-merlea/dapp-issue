{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as X } from \"./chunk-TOGDTRMX.js\";\nimport { b as Y } from \"./chunk-MQJH3OH2.js\";\nimport { a as v } from \"./chunk-QMCWVKRX.js\";\nimport { a as L } from \"./chunk-J6WNAYE7.js\";\nimport { a as Q } from \"./chunk-6D5GT4OX.js\";\nimport { a as P } from \"./chunk-JRQCY6J5.js\";\nimport { a as d, c as K } from \"./chunk-HSZIKABD.js\";\nimport { c as G, d as J } from \"./chunk-HJKYSMBV.js\";\nimport { c as B, d as o } from \"./chunk-HXERYGOO.js\";\nimport { a as q } from \"./chunk-KAP6XTHZ.js\";\nimport { b as O, c as T, d as V, e as _, f as j } from \"./chunk-5VZGFFLA.js\";\nimport { a as H, g as $ } from \"./chunk-HGGYZF27.js\";\nimport { g as N } from \"./chunk-V2DQWH6R.js\";\nimport { a as he } from \"./chunk-E37GJNPW.js\";\nimport { c as h, g as F, j as p, k as M } from \"./chunk-PV7M7QZ7.js\";\nimport { f as R, g as z } from \"./chunk-K45F7SFK.js\";\nimport { d as U } from \"./chunk-AQDZEHIK.js\";\nimport { b as D, c as we } from \"./chunk-NPGLEYL5.js\";\nimport { k as me } from \"./chunk-P6M5SGWP.js\";\nimport { a as m, b as w, d as W, j as i, m as E } from \"./chunk-HBP5N4FR.js\";\nE();\nimport { useEffect as u, useState as pe } from \"react\";\nimport { ExtensionProvider as Le } from \"@elrondnetwork/erdjs-extension-provider\";\nimport { HWProvider as Pe } from \"@elrondnetwork/erdjs-hw-provider\";\nwe();\nhe();\nme();\nfunction Oe() {\n  var A = o(N),\n    S = o(V),\n    g = o(O),\n    Z = o(j),\n    c = o(H),\n    y = o($),\n    a = o(_),\n    s = o(T),\n    _pe = pe(),\n    _pe2 = _slicedToArray(_pe, 2),\n    l = _pe2[0],\n    ee = _pe2[1],\n    n = B(),\n    _ref = S || {\n      callbackRoute: \"\",\n      logoutRoute: \"\"\n    },\n    k = _ref.callbackRoute,\n    C = _ref.logoutRoute,\n    _X = X({\n      callbackRoute: k,\n      logoutRoute: C\n    }),\n    _X2 = _slicedToArray(_X, 1),\n    te = _X2[0],\n    _Y = Y({\n      callbackRoute: k,\n      logoutRoute: C\n    }),\n    _Y2 = _slicedToArray(_Y, 1),\n    ne = _Y2[0];\n  u(function () {\n    oe();\n  }, [A]), u(function () {\n    ge();\n  }, [g]), u(function () {\n    ie();\n  }, [c, s]), u(function () {\n    re();\n  }, [y, s, l]);\n  function oe() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var e;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return q();\n            case 3:\n              e = _context.sent;\n              e && n(U(e.erd_chain_id));\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"failed refreshing chainId \", _context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n  }\n  function re() {\n    y == null && a != null && l && n(F({\n      index: a.index,\n      address: c,\n      hasContractDataEnabled: l.dataEnabled,\n      version: l.version\n    }));\n  }\n  function ie() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var e;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(n(p(!0)), c && s)) {\n                _context2.next = 11;\n                break;\n              }\n              _context2.prev = 1;\n              _context2.next = 4;\n              return P(c);\n            case 4:\n              e = _context2.sent;\n              e && n(h(w(m({}, e), {\n                address: c,\n                nonce: e.nonce.valueOf()\n              })));\n              _context2.next = 11;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              n(M(\"Failed getting account\")), console.error(\"Failed getting account \", _context2.t0);\n            case 11:\n              n(p(!1));\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n  }\n  function ae() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var e, t, r;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e = G(A.walletAddress);\n              if (!(d(e), Z != null)) {\n                _context3.next = 19;\n                break;\n              }\n              _context3.prev = 2;\n              _context3.next = 5;\n              return L();\n            case 5:\n              t = _context3.sent;\n              if (!t) {\n                _context3.next = 12;\n                break;\n              }\n              n(D({\n                address: t,\n                loginMethod: \"wallet\"\n              }));\n              _context3.next = 10;\n              return P(t);\n            case 10:\n              r = _context3.sent;\n              r && n(h(w(m({}, r), {\n                nonce: Q(r)\n              })));\n            case 12:\n              ce();\n              _context3.next = 18;\n              break;\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](2);\n              console.error(\"Failed authenticating wallet user \", _context3.t0);\n            case 18:\n              n(z(null));\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 15]]);\n    }));\n  }\n  function ce() {\n    var x;\n    var e = {};\n    if ((x = window == null ? void 0 : window.location) != null && x.search) {\n      var fe = new URLSearchParams(window.location.search);\n      e = Object.fromEntries(fe);\n    }\n    var I = e,\n      t = I.signature,\n      r = I.loginToken,\n      b = I.address,\n      f = W(I, [\"signature\", \"loginToken\", \"address\"]);\n    t && n(R(t)), se(f);\n  }\n  function se(e) {\n    var t = new URLSearchParams(e).toString(),\n      r = window.location.pathname,\n      b = t ? \"?\".concat(t) : \"\",\n      f = r ? \"\".concat(r).concat(b) : \"./\";\n    window.history.replaceState({}, document.title, f);\n  }\n  function le() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var e, t;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e = new Pe(), t = e.isInitialized();\n              _context4.t0 = t;\n              if (_context4.t0) {\n                _context4.next = 6;\n                break;\n              }\n              _context4.next = 5;\n              return e.init();\n            case 5:\n              t = _context4.sent;\n            case 6:\n              if (!(!t && s)) {\n                _context4.next = 9;\n                break;\n              }\n              console.warn(\"Could not initialise ledger app\"), v();\n              return _context4.abrupt(\"return\");\n            case 9:\n              return _context4.abrupt(\"return\", ((a == null ? void 0 : a.index) != null && (e.addressIndex = a.index), e));\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  }\n  function de() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var e, t;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return le();\n            case 3:\n              e = _context5.sent;\n              if (e) {\n                _context5.next = 6;\n                break;\n              }\n              return _context5.abrupt(\"return\");\n            case 6:\n              _context5.next = 8;\n              return J(e);\n            case 8:\n              t = _context5.sent;\n              d(e), ee(t);\n              _context5.next = 15;\n              break;\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.error(\"Could not initialise ledger app\", _context5.t0), v();\n            case 15:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 12]]);\n    }));\n  }\n  function ue() {\n    return i(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var e, t;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              _context6.next = 3;\n              return L();\n            case 3:\n              e = _context6.sent;\n              t = Le.getInstance().setAddress(e);\n              _context6.next = 7;\n              return t.init();\n            case 7:\n              if (!_context6.sent) {\n                _context6.next = 11;\n                break;\n              }\n              d(t);\n              _context6.next = 12;\n              break;\n            case 11:\n              console.error(\"Could not initialise extension, make sure Elrond wallet extension is installed.\");\n            case 12:\n              _context6.next = 17;\n              break;\n            case 14:\n              _context6.prev = 14;\n              _context6.t0 = _context6[\"catch\"](0);\n              console.error(\"Unable to login to ExtensionProvider\", _context6.t0);\n            case 17:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[0, 14]]);\n    }));\n  }\n  function ge() {\n    if (g != null) switch (g) {\n      case \"ledger\":\n        {\n          de();\n          break;\n        }\n      case \"walletconnect\":\n        {\n          te(!1);\n          break;\n        }\n      case \"walletconnectv2\":\n        {\n          ne(!1);\n          break;\n        }\n      case \"extension\":\n        {\n          ue();\n          break;\n        }\n      case \"extra\":\n        {\n          K();\n          break;\n        }\n      case \"wallet\":\n      case \"\":\n        {\n          ae();\n          break;\n        }\n      default:\n        return;\n    }\n  }\n  return null;\n}\nexport { Oe as a };","map":null,"metadata":{},"sourceType":"module"}