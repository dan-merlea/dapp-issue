{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _defineProperty from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as j } from \"./chunk-EDBOUBLR.js\";\nimport { a as H } from \"./chunk-QXMQP34B.js\";\nimport { a as q } from \"./chunk-6D5GT4OX.js\";\nimport { a as Z } from \"./chunk-JRQCY6J5.js\";\nimport { a as X } from \"./chunk-TFLR4T43.js\";\nimport { b as F } from \"./chunk-HJKYSMBV.js\";\nimport { c as $, d as S } from \"./chunk-HXERYGOO.js\";\nimport { f as B, k as V } from \"./chunk-EUMYK45L.js\";\nimport { a as z } from \"./chunk-P2H25ZZV.js\";\nimport { a as x } from \"./chunk-X5TGO2UY.js\";\nimport { a as U } from \"./chunk-HGGYZF27.js\";\nimport { a as cn } from \"./chunk-E37GJNPW.js\";\nimport { c as D } from \"./chunk-TIT7O6HR.js\";\nimport { h as L } from \"./chunk-ABUY7RHS.js\";\nimport { e as W, j as R, k as m } from \"./chunk-MD7XZQEH.js\";\nimport { l as G, s as an } from \"./chunk-HEFMRSX3.js\";\nimport { a as k } from \"./chunk-ZNRXHZ7I.js\";\nimport { a as P, b as g, c as w, d as _, e as O } from \"./chunk-C32UB6VS.js\";\nimport { k as rn } from \"./chunk-P6M5SGWP.js\";\nimport { j as E, m as C } from \"./chunk-HBP5N4FR.js\";\nC();\nan();\nimport { useEffect as ln, useRef as un, useState as dn } from \"react\";\nimport { ExtensionProvider as J } from \"@elrondnetwork/erdjs-extension-provider\";\ncn();\nrn();\nvar Tn = function Tn(a, d) {\n    return d.map(function (T, r) {\n      return T.setNonce(a + r), T;\n    });\n  },\n  Gn = function Gn() {\n    var a = $(),\n      d = un(\"/\"),\n      T = S(U),\n      _X = X(),\n      r = _X.provider,\n      h = F(r),\n      _dn = dn(null),\n      _dn2 = _slicedToArray(_dn, 2),\n      K = _dn2[0],\n      N = _dn2[1],\n      t = S(V),\n      Q = S(B),\n      Y = Boolean(t == null ? void 0 : t.transactions),\n      f = function f() {\n        N(null), a(R(null));\n      },\n      M = function M(n) {\n        f(), y(n);\n      };\n    j(M);\n    function y(n) {\n      var o, s;\n      var i = r instanceof J;\n      a(W()), a(L(n)), a(D(k)), i && (f(), (s = (o = J.getInstance()) == null ? void 0 : o.cancelAction) == null || s.call(o));\n    }\n    var p = function p(n, i) {\n        var o = n.includes(g);\n        if (y(i), o) {\n          a(R(g));\n          return;\n        }\n        N(n);\n      },\n      nn = function nn(n, i) {\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n        var s = _defineProperty({}, G, i),\n          u = \"\".concat(window.location.origin).concat(o),\n          c = x({\n            callbackUrl: u,\n            urlParams: s\n          });\n        r.signTransactions(n, {\n          callbackUrl: encodeURIComponent(c)\n        });\n      },\n      sn = function sn() {\n        return E(void 0, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var b, n, i, o, s, u, c, I, A, l, e, on, v, _l;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  n = t.sessionId, i = t.transactions, o = t.callbackRoute, s = t.customTransactionInformation, u = s.redirectAfterSign, c = o || window.location.pathname, I = window.location.pathname.includes(c), A = u && !I;\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return (b = r == null ? void 0 : r.init) == null ? void 0 : b.call(r);\n                case 4:\n                  if (_context.sent) {\n                    _context.next = 6;\n                    break;\n                  }\n                  return _context.abrupt(\"return\");\n                case 6:\n                  _context.next = 13;\n                  break;\n                case 8:\n                  _context.prev = 8;\n                  _context.t0 = _context[\"catch\"](1);\n                  l = (_context.t0 == null ? void 0 : _context.t0.message) || _context.t0 || _;\n                  console.error(l), p(l);\n                  return _context.abrupt(\"return\");\n                case 13:\n                  _context.prev = 13;\n                  _context.next = 16;\n                  return r.signTransactions(i);\n                case 16:\n                  e = _context.sent;\n                  if (H(e)) {\n                    _context.next = 19;\n                    break;\n                  }\n                  return _context.abrupt(\"return\");\n                case 19:\n                  on = Object.values(e).map(function (en) {\n                    return z(en);\n                  }), v = {\n                    sessionId: n,\n                    transactions: on,\n                    status: \"signed\"\n                  };\n                  A && (v.redirectRoute = c), a(m(v));\n                  _context.next = 27;\n                  break;\n                case 23:\n                  _context.prev = 23;\n                  _context.t1 = _context[\"catch\"](13);\n                  _l = (_context.t1 == null ? void 0 : _context.t1.message) || _context.t1 || w;\n                  console.error(_l), a(m({\n                    sessionId: n,\n                    status: \"cancelled\"\n                  })), p(_l.includes(\"cancel\") ? g : _l, n);\n                case 27:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 8], [13, 23]]);\n        }));\n      },\n      tn = function tn() {\n        return E(void 0, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          var n, i, o, s, u, c, I, A, _c;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (t) {\n                    _context2.next = 2;\n                    break;\n                  }\n                  return _context2.abrupt(\"return\");\n                case 2:\n                  f();\n                  n = t.sessionId, i = t.transactions, o = t.callbackRoute;\n                  if (r) {\n                    _context2.next = 7;\n                    break;\n                  }\n                  console.error(O);\n                  return _context2.abrupt(\"return\");\n                case 7:\n                  d.current = o || window.location.pathname;\n                  _context2.prev = 8;\n                  _context2.next = 11;\n                  return Z(T);\n                case 11:\n                  s = _context2.sent;\n                  if (!(s == null)) {\n                    _context2.next = 14;\n                    break;\n                  }\n                  return _context2.abrupt(\"return\");\n                case 14:\n                  u = h === \"wallet\", c = ![\"wallet\", \"ledger\", \"extra\"].includes(h), I = q(s), A = Tn(I, i);\n                  u && nn(A, n, o), c && sn();\n                  _context2.next = 22;\n                  break;\n                case 18:\n                  _context2.prev = 18;\n                  _context2.t0 = _context2[\"catch\"](8);\n                  _c = (_context2.t0 == null ? void 0 : _context2.t0.message) || P;\n                  console.error(_c), p(_c, n), a(m({\n                    sessionId: n,\n                    status: \"cancelled\"\n                  })), console.error(_c, _context2.t0);\n                case 22:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[8, 18]]);\n        }));\n      };\n    return ln(function () {\n      tn();\n    }, [t]), {\n      error: K,\n      canceledTransactionsMessage: Q,\n      onAbort: M,\n      hasTransactions: Y,\n      callbackRoute: d.current,\n      sessionId: t == null ? void 0 : t.sessionId,\n      transactions: t == null ? void 0 : t.transactions\n    };\n  };\nexport { Gn as a };","map":null,"metadata":{},"sourceType":"module"}