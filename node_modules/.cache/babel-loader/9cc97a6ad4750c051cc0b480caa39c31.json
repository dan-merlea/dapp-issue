{"ast":null,"code":"import _classCallCheck from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Maths}from'@krogan/common';import{Texture}from'@pixi/core';import{TilingSprite}from'@pixi/sprite-tiling';import{getCacheSheet}from'images/textures';import{AnimatedSprite,MIPMAP_MODES}from'pixi.js';var BeamSprite=/*#__PURE__*/function(_TilingSprite){_inherits(BeamSprite,_TilingSprite);var _super=_createSuper(BeamSprite);// Allow animate() to skip some frames\nfunction BeamSprite(angle,asteroid,startPosition){var _this;_classCallCheck(this,BeamSprite);var texture=Texture.from('laser-beam');texture.baseTexture.mipmap=MIPMAP_MODES.POW2;_this=_super.call(this,texture,1,5);_this.asteroid=void 0;_this.toWidth=1;_this.defaultHeight=void 0;_this.slowDownAnimation=1;_this.currentFrame=0;_this.sparks=void 0;var distance=Maths.getDistance(startPosition.x,startPosition.y,asteroid.position.x,asteroid.position.y);_this.toWidth=distance-10;// 10 is a buffer to show animation closer to the edge\n_this.defaultHeight=5;_this.angle=angle;_this.anchor.set(0,0.5);_this.asteroid=asteroid;return _this;}_createClass(BeamSprite,[{key:\"animate\",value:function animate(){this.currentFrame++;if(this.currentFrame!=this.slowDownAnimation)return;if(this.scale.y==1){this.scale.y=1.4;this.tint=0xFEFEFE;}else{this.tint=0xFFFFFF;this.scale.y=1;}if(this.width<this.toWidth){this.width+=20;}if(this.width>this.toWidth){this.width=this.toWidth;this.attachSparks();}this.currentFrame=0;}},{key:\"attachSparks\",value:function attachSparks(){console.log('Attaching sparks');var sheet=getCacheSheet('beam-sparks');if(!sheet)return;this.sparks=new AnimatedSprite(sheet.animations[\"beam-sparks-sheet\"]);this.sparks.animationSpeed=0.2;this.sparks.anchor.set(0.5,0);this.sparks.angle=-90;this.sparks.x=this.width-this.sparks.height;this.addChild(this.sparks);this.sparks.play();}}]);return BeamSprite;}(TilingSprite);export{BeamSprite as default};","map":null,"metadata":{},"sourceType":"module"}