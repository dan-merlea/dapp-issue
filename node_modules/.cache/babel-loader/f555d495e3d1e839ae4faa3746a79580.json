{"ast":null,"code":"import _regeneratorRuntime from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{getCacheAsset}from'images/textures';import{AnimatedSprite,Container,Sprite,Spritesheet,Texture}from'pixi.js';import{SolarSystemSize}from'./SolarSystem';var PlanetSprite=/*#__PURE__*/function(_Container){_inherits(PlanetSprite,_Container);var _super=_createSuper(PlanetSprite);// Data\n// Sprite\nfunction PlanetSprite(planet,scale,size){var _this;_classCallCheck(this,PlanetSprite);_this=_super.call(this);_this._planet=void 0;_this._scale=void 0;_this._size=void 0;_this._sprite=void 0;_this._planet=planet;_this._scale=scale;_this._size=size;if(_this._scale==SolarSystemSize.LARGE){_this.createAnimatedPlanet();}else{_this.createSimplePlanet();}return _this;}_createClass(PlanetSprite,[{key:\"createSimplePlanet\",value:function(){var _createSimplePlanet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var texture,sprite;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:texture=getCacheAsset(this.planetImageKey(this._planet.nonce));sprite=new Sprite(texture);sprite.width=this._size;sprite.height=this._size;sprite.anchor.x=0.5;sprite.anchor.y=0.5;sprite.angle=180;this.addChild(sprite);this._sprite=sprite;case 9:case\"end\":return _context.stop();}}},_callee,this);}));function createSimplePlanet(){return _createSimplePlanet.apply(this,arguments);}return createSimplePlanet;}()},{key:\"planetImageKey\",value:function planetImageKey(index){return\"planet-medium-\".concat(index);}},{key:\"planetPixels\",value:function planetPixels(){return this._planet.size/10*256;}},{key:\"createAnimatedPlanet\",value:function(){var _createAnimatedPlanet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this2=this;var planetSize,texture,sheet;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:planetSize=this.planetPixels();console.log(\"Loading planet \".concat(this._planet.nonce,\" size: \").concat(planetSize));_context2.next=4;return Texture.fromURL(\"/planets/large/\".concat(this._planet.nonce,\".png\"));case 4:texture=_context2.sent;sheet=new Spritesheet(texture,this.generateSpritesheetData(1250,planetSize));sheet.parse(function(){var sprite=new AnimatedSprite(sheet.animations['planet']);sprite.animationSpeed=0.5;sprite.width=_this2._size;sprite.height=_this2._size;sprite.anchor.x=0.5;sprite.anchor.y=0.5;sprite.angle=-90;_this2.addChild(sprite);sprite.play();_this2._sprite=sprite;console.log(\"Animated planet created \".concat(_this2._planet.nonce));});case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function createAnimatedPlanet(){return _createAnimatedPlanet.apply(this,arguments);}return createAnimatedPlanet;}()},{key:\"generateSpritesheetData\",value:function generateSpritesheetData(nrFrames,size){var frames={};var framesName=[];for(var i=0;i<nrFrames;i++){var frameName=\"planet-\".concat(this._planet.nonce,\"-frame-\").concat(i);frames[frameName]={frame:{x:i%50*size,y:Math.floor(i/50)*size,w:size,h:size}};framesName.push(frameName);}console.log(frames);return{frames:frames,animations:{planet:framesName},meta:{scale:'1'}};}}]);return PlanetSprite;}(Container);export{PlanetSprite as default};","map":null,"metadata":{},"sourceType":"module"}