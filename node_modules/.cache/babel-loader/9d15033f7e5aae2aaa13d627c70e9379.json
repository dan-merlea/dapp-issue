{"ast":null,"code":"import _objectSpread from \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/src/gui/hud/Announce.tsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Container } from '.';\nimport { Text } from 'gui/uielements';\nimport { isMobile } from 'react-device-detect';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ANNOUNCE_LIFETIME = 3000;\nvar ANNOUNCE_ANIM_TICK = 50;\nvar TICK = ANNOUNCE_ANIM_TICK / ANNOUNCE_LIFETIME;\n\n/**\n * Render the players count.\n */\nexport var Announce = /*#__PURE__*/React.memo(_c = _s(function (props) {\n  _s();\n  var announce = props.announce,\n    style = props.style;\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    opacity = _React$useState2[0],\n    setOpacity = _React$useState2[1];\n  var _React$useState3 = React.useState('none'),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    display = _React$useState4[0],\n    setDisplay = _React$useState4[1];\n\n  // Whenever the announce changes\n  React.useEffect(function () {\n    setOpacity(1);\n    setDisplay('flex');\n    var startedAt = Date.now();\n\n    // Calculate how much we must take off each tick\n    var intervalId = setInterval(function () {\n      // Animation ended\n      var delta = Date.now() - startedAt;\n      if (delta > ANNOUNCE_LIFETIME) {\n        setOpacity(0);\n        setDisplay('none');\n        clearInterval(intervalId);\n        return;\n      }\n      setOpacity(function (prev) {\n        return prev - TICK;\n      });\n    }, ANNOUNCE_ANIM_TICK);\n  }, [announce]);\n  if (!announce || !announce.length) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: _objectSpread(_objectSpread(_objectSpread({}, styles.announce), style), {}, {\n      opacity: opacity,\n      display: display\n    }),\n    children: /*#__PURE__*/_jsxDEV(Text, {\n      type: \"body\",\n      style: styles.announceText,\n      children: announce\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, _this);\n}, \"OPeNvaR2LSTgA9vanvGHkauq3C8=\"));\n_c2 = Announce;\nvar styles = {\n  announce: {},\n  announceText: {\n    color: 'white',\n    fontSize: isMobile ? 16 : 24\n  }\n};\nvar _c, _c2;\n$RefreshReg$(_c, \"Announce$React.memo\");\n$RefreshReg$(_c2, \"Announce\");","map":{"version":3,"names":["React","Container","Text","isMobile","ANNOUNCE_LIFETIME","ANNOUNCE_ANIM_TICK","TICK","Announce","memo","props","announce","style","useState","opacity","setOpacity","display","setDisplay","useEffect","startedAt","Date","now","intervalId","setInterval","delta","clearInterval","prev","length","styles","announceText","color","fontSize"],"sources":["/Users/merlea/Development/Crypto/Krogan/dapp-issue/src/gui/hud/Announce.tsx"],"sourcesContent":["import React, { CSSProperties } from 'react';\nimport { Container } from '.';\nimport { Text } from 'gui/uielements';\nimport { isMobile } from 'react-device-detect';\n\nconst ANNOUNCE_LIFETIME = 3000;\nconst ANNOUNCE_ANIM_TICK = 50;\nconst TICK = ANNOUNCE_ANIM_TICK / ANNOUNCE_LIFETIME;\n\n/**\n * Render the players count.\n */\nexport const Announce = React.memo((props: { announce: string; style?: CSSProperties }): React.ReactElement | null => {\n    const { announce, style } = props;\n    const [opacity, setOpacity] = React.useState(0);\n    const [display, setDisplay] = React.useState<'none' | 'flex'>('none');\n\n    // Whenever the announce changes\n    React.useEffect(() => {\n        setOpacity(1);\n        setDisplay('flex');\n        const startedAt = Date.now();\n\n        // Calculate how much we must take off each tick\n        const intervalId = setInterval(() => {\n            // Animation ended\n            const delta = Date.now() - startedAt;\n            if (delta > ANNOUNCE_LIFETIME) {\n                setOpacity(0);\n                setDisplay('none');\n                clearInterval(intervalId);\n                return;\n            }\n\n            setOpacity((prev) => prev - TICK);\n        }, ANNOUNCE_ANIM_TICK);\n    }, [announce]);\n\n    if (!announce || !announce.length) {\n        return null;\n    }\n\n    return (\n        <Container\n            style={{\n                ...styles.announce,\n                ...style,\n                opacity,\n                display,\n            }}\n        >\n            <Text type='body' style={styles.announceText}>{announce}</Text>\n        </Container>\n    );\n});\n\nconst styles: { [key: string]: CSSProperties } = {\n    announce: {},\n    announceText: {\n        color: 'white',\n        fontSize: isMobile ? 16 : 24,\n    },\n};\n"],"mappings":";;;;;AAAA,OAAOA,KAAK,MAAyB,OAAO;AAC5C,SAASC,SAAS,QAAQ,GAAG;AAC7B,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,QAAQ,QAAQ,qBAAqB;AAAC;AAE/C,IAAMC,iBAAiB,GAAG,IAAI;AAC9B,IAAMC,kBAAkB,GAAG,EAAE;AAC7B,IAAMC,IAAI,GAAGD,kBAAkB,GAAGD,iBAAiB;;AAEnD;AACA;AACA;AACA,OAAO,IAAMG,QAAQ,gBAAGP,KAAK,CAACQ,IAAI,SAAC,UAACC,KAAkD,EAAgC;EAAA;EAClH,IAAQC,QAAQ,GAAYD,KAAK,CAAzBC,QAAQ;IAAEC,KAAK,GAAKF,KAAK,CAAfE,KAAK;EACvB,sBAA8BX,KAAK,CAACY,QAAQ,CAAC,CAAC,CAAC;IAAA;IAAxCC,OAAO;IAAEC,UAAU;EAC1B,uBAA8Bd,KAAK,CAACY,QAAQ,CAAkB,MAAM,CAAC;IAAA;IAA9DG,OAAO;IAAEC,UAAU;;EAE1B;EACAhB,KAAK,CAACiB,SAAS,CAAC,YAAM;IAClBH,UAAU,CAAC,CAAC,CAAC;IACbE,UAAU,CAAC,MAAM,CAAC;IAClB,IAAME,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;;IAE5B;IACA,IAAMC,UAAU,GAAGC,WAAW,CAAC,YAAM;MACjC;MACA,IAAMC,KAAK,GAAGJ,IAAI,CAACC,GAAG,EAAE,GAAGF,SAAS;MACpC,IAAIK,KAAK,GAAGnB,iBAAiB,EAAE;QAC3BU,UAAU,CAAC,CAAC,CAAC;QACbE,UAAU,CAAC,MAAM,CAAC;QAClBQ,aAAa,CAACH,UAAU,CAAC;QACzB;MACJ;MAEAP,UAAU,CAAC,UAACW,IAAI;QAAA,OAAKA,IAAI,GAAGnB,IAAI;MAAA,EAAC;IACrC,CAAC,EAAED,kBAAkB,CAAC;EAC1B,CAAC,EAAE,CAACK,QAAQ,CAAC,CAAC;EAEd,IAAI,CAACA,QAAQ,IAAI,CAACA,QAAQ,CAACgB,MAAM,EAAE;IAC/B,OAAO,IAAI;EACf;EAEA,oBACI,QAAC,SAAS;IACN,KAAK,gDACEC,MAAM,CAACjB,QAAQ,GACfC,KAAK;MACRE,OAAO,EAAPA,OAAO;MACPE,OAAO,EAAPA;IAAO,EACT;IAAA,uBAEF,QAAC,IAAI;MAAC,IAAI,EAAC,MAAM;MAAC,KAAK,EAAEY,MAAM,CAACC,YAAa;MAAA,UAAElB;IAAQ;MAAA;MAAA;MAAA;IAAA;EAAQ;IAAA;IAAA;IAAA;EAAA,SACvD;AAEpB,CAAC,kCAAC;AAAC,MA1CUH,QAAQ;AA4CrB,IAAMoB,MAAwC,GAAG;EAC7CjB,QAAQ,EAAE,CAAC,CAAC;EACZkB,YAAY,EAAE;IACVC,KAAK,EAAE,OAAO;IACdC,QAAQ,EAAE3B,QAAQ,GAAG,EAAE,GAAG;EAC9B;AACJ,CAAC;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module"}