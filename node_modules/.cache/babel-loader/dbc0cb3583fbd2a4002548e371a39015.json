{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as T } from \"./chunk-OCMOBKCD.js\";\nimport { c as w } from \"./chunk-6E3TVN7L.js\";\nimport { c as f, d as y } from \"./chunk-57IQZAYS.js\";\nimport { g as u } from \"./chunk-V2DQWH6R.js\";\nimport { a as M } from \"./chunk-X7UKRW56.js\";\nimport { e as m, g as d } from \"./chunk-JQUGIREJ.js\";\nimport { g as L, h } from \"./chunk-C32UB6VS.js\";\nimport { a as l, b as c, j as g, m as p } from \"./chunk-HBP5N4FR.js\";\np();\nh();\nimport { useState as W } from \"react\";\nM();\nvar B = function B(_ref) {\n  var b = _ref.callbackRoute,\n    e = _ref.token,\n    _ref$redirectDelayMil = _ref.redirectDelayMilliseconds,\n    I = _ref$redirectDelayMil === void 0 ? 100 : _ref$redirectDelayMil;\n  var _W = W(\"\"),\n    _W2 = _slicedToArray(_W, 2),\n    n = _W2[0],\n    k = _W2[1],\n    _W3 = W(!1),\n    _W4 = _slicedToArray(_W3, 2),\n    D = _W4[0],\n    i = _W4[1],\n    R = y(u),\n    r = f(),\n    s = T();\n  function U() {\n    return g(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var o, a, S, x, E;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!s) {\n                _context.next = 2;\n                break;\n              }\n              throw new Error(L);\n            case 2:\n              _context.prev = 2;\n              i(!0);\n              o = w(R.walletAddress), a = new Date(), S = a.setMinutes(a.getMinutes() + 3) / 1e3;\n              r(d({\n                data: {},\n                expires: S\n              })), e && r(m({\n                loginToken: e\n              }));\n              x = encodeURIComponent(\"\".concat(window.location.origin).concat(b)), E = c(l({\n                callbackUrl: x\n              }, e && {\n                token: e\n              }), {\n                redirectDelayMilliseconds: I\n              });\n              _context.next = 9;\n              return o.login(E);\n            case 9:\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0), k(\"error logging in\" + _context.t0.message);\n            case 14:\n              _context.prev = 14;\n              i(!1);\n              return _context.finish(14);\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11, 14, 17]]);\n    }));\n  }\n  var t = Boolean(n);\n  return [U, {\n    error: n,\n    loginFailed: t,\n    isLoading: D && !t,\n    isLoggedIn: s && !t\n  }];\n};\nexport { B as a };","map":{"version":3,"names":["a","T","c","w","f","d","y","g","u","M","e","m","L","h","l","b","j","p","useState","W","B","callbackRoute","token","redirectDelayMilliseconds","I","n","k","D","i","R","r","s","U","Error","o","walletAddress","Date","S","setMinutes","getMinutes","data","expires","loginToken","x","encodeURIComponent","window","location","origin","E","callbackUrl","login","console","error","message","t","Boolean","loginFailed","isLoading","isLoggedIn"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-YUBNT7BO.js"],"sourcesContent":["import{a as T}from\"./chunk-OCMOBKCD.js\";import{c as w}from\"./chunk-6E3TVN7L.js\";import{c as f,d as y}from\"./chunk-57IQZAYS.js\";import{g as u}from\"./chunk-V2DQWH6R.js\";import{a as M}from\"./chunk-X7UKRW56.js\";import{e as m,g as d}from\"./chunk-JQUGIREJ.js\";import{g as L,h}from\"./chunk-C32UB6VS.js\";import{a as l,b as c,j as g,m as p}from\"./chunk-HBP5N4FR.js\";p();h();import{useState as W}from\"react\";M();var B=({callbackRoute:b,token:e,redirectDelayMilliseconds:I=100})=>{let[n,k]=W(\"\"),[D,i]=W(!1),R=y(u),r=f(),s=T();function U(){return g(this,null,function*(){if(s)throw new Error(L);try{i(!0);let o=w(R.walletAddress),a=new Date,S=a.setMinutes(a.getMinutes()+3)/1e3;r(d({data:{},expires:S})),e&&r(m({loginToken:e}));let x=encodeURIComponent(`${window.location.origin}${b}`),E=c(l({callbackUrl:x},e&&{token:e}),{redirectDelayMilliseconds:I});yield o.login(E)}catch(o){console.error(o),k(\"error logging in\"+o.message)}finally{i(!1)}})}let t=Boolean(n);return[U,{error:n,loginFailed:t,isLoading:D&&!t,isLoggedIn:s&&!t}]};export{B as a};\n//# sourceMappingURL=chunk-YUBNT7BO.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}