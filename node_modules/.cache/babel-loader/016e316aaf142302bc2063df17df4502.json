{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar defaultValue = require('./defaultValue.js');\nvar mapType = require('./mapType.js');\nfunction getUniformData(program, gl) {\n  var uniforms = {};\n  var totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (var i = 0; i < totalUniforms; i++) {\n    var uniformData = gl.getActiveUniform(program, i);\n    var name = uniformData.name.replace(/\\[.*?\\]$/, \"\");\n    var isArray = !!uniformData.name.match(/\\[.*?\\]$/);\n    var type = mapType.mapType(gl, uniformData.type);\n    uniforms[name] = {\n      name: name,\n      index: i,\n      type: type,\n      size: uniformData.size,\n      isArray: isArray,\n      value: defaultValue.defaultValue(type, uniformData.size)\n    };\n  }\n  return uniforms;\n}\nexports.getUniformData = getUniformData;","map":{"version":3,"sources":["../../../src/shader/utils/getUniformData.ts"],"names":[],"mappings":";;;;;;;AAWO,SAAA,cAAA,CAAwB,OAAA,EAAuB,EACtD,EAAA;EACI,IAAM,QAAA,GAA0C,CAAA,CAAC;EAEjD,IAAM,aAAgB,GAAA,EAAA,CAAG,mBAAoB,CAAA,OAAA,EAAS,EAAA,CAAG,eAAe,CAAA;EAExE,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,aAAA,EAAe,CACnC,EAAA,EAAA;IACI,IAAM,WAAc,GAAA,EAAA,CAAG,gBAAiB,CAAA,OAAA,EAAS,CAAC,CAAA;IAClD,IAAM,IAAO,GAAA,WAAA,CAAY,IAAK,CAAA,OAAA,CAAQ,UAAA,EAAY,EAAE,CAAA;IAEpD,IAAM,OAAA,GAAU,CAAC,CAAE,WAAY,CAAA,IAAA,CAAK,KAAA,CAAM,UAAU,CAAA;IAEpD,IAAM,IAAO,GAAA,OAAA,CAAA,OAAA,CAAQ,EAAI,EAAA,WAAA,CAAY,IAAI,CAAA;IAEzC,QAAA,CAAS,IAAQ,CAAA,GAAA;MACb,IAAA,EAAA,IAAA;MACA,KAAO,EAAA,CAAA;MACP,IAAA,EAAA,IAAA;MACA,IAAA,EAAM,WAAY,CAAA,IAAA;MAClB,OAAA,EAAA,OAAA;MACA,KAAO,EAAA,YAAA,CAAA,YAAA,CAAa,IAAM,EAAA,WAAA,CAAY,IAAI;IAAA,CAC9C;EAAA;EAGG,OAAA,QAAA;AACX","sourcesContent":["import type { IUniformData } from '../Program';\nimport { defaultValue } from './defaultValue';\nimport { mapType } from './mapType';\n\n/**\n * returns the uniform data from the program\n * @private\n * @param program - the webgl program\n * @param gl - the WebGL context\n * @returns {object} the uniform data for this program\n */\nexport function getUniformData(program: WebGLProgram, gl: WebGLRenderingContextBase): {[key: string]: IUniformData}\n{\n    const uniforms: {[key: string]: IUniformData} = {};\n\n    const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (let i = 0; i < totalUniforms; i++)\n    {\n        const uniformData = gl.getActiveUniform(program, i);\n        const name = uniformData.name.replace(/\\[.*?\\]$/, '');\n\n        const isArray = !!(uniformData.name.match(/\\[.*?\\]$/));\n\n        const type = mapType(gl, uniformData.type);\n\n        uniforms[name] = {\n            name,\n            index: i,\n            type,\n            size: uniformData.size,\n            isArray,\n            value: defaultValue(type, uniformData.size),\n        };\n    }\n\n    return uniforms;\n}\n"]},"metadata":{},"sourceType":"script"}