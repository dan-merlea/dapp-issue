{"ast":null,"code":"'use strict';\n\nmodule.exports = API;\nvar chromeApi = require('./google-u2f-api');\n\n// Feature detection (yes really)\nvar isBrowser = typeof navigator !== 'undefined' && !!navigator.userAgent;\nvar isSafari = isBrowser && navigator.userAgent.match(/Safari\\//) && !navigator.userAgent.match(/Chrome\\//);\nvar isEDGE = isBrowser && navigator.userAgent.match(/Edge\\/1[2345]/);\nvar _backend = null;\nfunction getBackend(Promise) {\n  if (!_backend) _backend = new Promise(function (resolve, reject) {\n    function notSupported() {\n      // Note; {native: true} means *not* using Google's hack\n      resolve({\n        u2f: null,\n        native: true\n      });\n    }\n    if (!isBrowser) return notSupported();\n    if (isSafari)\n      // Safari doesn't support U2F, and the Safari-FIDO-U2F\n      // extension lacks full support (Multi-facet apps), so we\n      // block it until proper support.\n      return notSupported();\n    var hasNativeSupport = typeof window.u2f !== 'undefined' && typeof window.u2f.sign === 'function';\n    if (hasNativeSupport) resolve({\n      u2f: window.u2f,\n      native: true\n    });\n    if (isEDGE)\n      // We don't want to check for Google's extension hack on EDGE\n      // as it'll cause trouble (popups, etc)\n      return notSupported();\n    if (location.protocol === 'http:')\n      // U2F isn't supported over http, only https\n      return notSupported();\n    if (typeof MessageChannel === 'undefined')\n      // Unsupported browser, the chrome hack would throw\n      return notSupported();\n\n    // Test for google extension support\n    chromeApi.isSupported(function (ok) {\n      if (ok) resolve({\n        u2f: chromeApi,\n        native: false\n      });else notSupported();\n    });\n  });\n  return _backend;\n}\nfunction API(Promise) {\n  return {\n    isSupported: isSupported.bind(Promise),\n    ensureSupport: ensureSupport.bind(Promise),\n    register: register.bind(Promise),\n    sign: sign.bind(Promise),\n    ErrorCodes: API.ErrorCodes,\n    ErrorNames: API.ErrorNames\n  };\n}\nAPI.ErrorCodes = {\n  CANCELLED: -1,\n  OK: 0,\n  OTHER_ERROR: 1,\n  BAD_REQUEST: 2,\n  CONFIGURATION_UNSUPPORTED: 3,\n  DEVICE_INELIGIBLE: 4,\n  TIMEOUT: 5\n};\nAPI.ErrorNames = {\n  \"-1\": \"CANCELLED\",\n  \"0\": \"OK\",\n  \"1\": \"OTHER_ERROR\",\n  \"2\": \"BAD_REQUEST\",\n  \"3\": \"CONFIGURATION_UNSUPPORTED\",\n  \"4\": \"DEVICE_INELIGIBLE\",\n  \"5\": \"TIMEOUT\"\n};\nfunction makeError(msg, err) {\n  var code = err != null ? err.errorCode : 1; // Default to OTHER_ERROR\n  var type = API.ErrorNames['' + code];\n  var error = new Error(msg);\n  error.metaData = {\n    type: type,\n    code: code\n  };\n  return error;\n}\nfunction deferPromise(Promise, promise) {\n  var ret = {};\n  ret.promise = new Promise(function (resolve, reject) {\n    ret.resolve = resolve;\n    ret.reject = reject;\n    promise.then(resolve, reject);\n  });\n  /**\n   * Reject request promise and disconnect port if 'disconnect' flag is true\n   * @param {string} msg\n   * @param {boolean} disconnect\n   */\n  ret.promise.cancel = function (msg, disconnect) {\n    getBackend(Promise).then(function (backend) {\n      if (disconnect && !backend.native) backend.u2f.disconnect();\n      ret.reject(makeError(msg, {\n        errorCode: -1\n      }));\n    });\n  };\n  return ret;\n}\nfunction defer(Promise, fun) {\n  return deferPromise(Promise, new Promise(function (resolve, reject) {\n    try {\n      fun && fun(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n  }));\n}\nfunction isSupported() {\n  var Promise = this;\n  return getBackend(Promise).then(function (backend) {\n    return !!backend.u2f;\n  });\n}\nfunction _ensureSupport(backend) {\n  if (!backend.u2f) {\n    if (location.protocol === 'http:') throw new Error(\"U2F isn't supported over http, only https\");\n    throw new Error(\"U2F not supported\");\n  }\n}\nfunction ensureSupport() {\n  var Promise = this;\n  return getBackend(Promise).then(_ensureSupport);\n}\nfunction register(registerRequests, signRequests /* = null */, timeout) {\n  var Promise = this;\n  if (!Array.isArray(registerRequests)) registerRequests = [registerRequests];\n  if (typeof signRequests === 'number' && typeof timeout === 'undefined') {\n    timeout = signRequests;\n    signRequests = null;\n  }\n  if (!signRequests) signRequests = [];\n  return deferPromise(Promise, getBackend(Promise).then(function (backend) {\n    _ensureSupport(backend);\n    var native = backend.native;\n    var u2f = backend.u2f;\n    return new Promise(function (resolve, reject) {\n      function cbNative(response) {\n        if (response.errorCode) reject(makeError(\"Registration failed\", response));else {\n          delete response.errorCode;\n          resolve(response);\n        }\n      }\n      function cbChrome(err, response) {\n        if (err) reject(err);else if (response.errorCode) reject(makeError(\"Registration failed\", response));else resolve(response);\n      }\n      if (native) {\n        var appId = registerRequests[0].appId;\n        u2f.register(appId, registerRequests, signRequests, cbNative, timeout);\n      } else {\n        u2f.register(registerRequests, signRequests, cbChrome, timeout);\n      }\n    });\n  })).promise;\n}\nfunction sign(signRequests, timeout) {\n  var Promise = this;\n  if (!Array.isArray(signRequests)) signRequests = [signRequests];\n  return deferPromise(Promise, getBackend(Promise).then(function (backend) {\n    _ensureSupport(backend);\n    var native = backend.native;\n    var u2f = backend.u2f;\n    return new Promise(function (resolve, reject) {\n      function cbNative(response) {\n        if (response.errorCode) reject(makeError(\"Sign failed\", response));else {\n          delete response.errorCode;\n          resolve(response);\n        }\n      }\n      function cbChrome(err, response) {\n        if (err) reject(err);else if (response.errorCode) reject(makeError(\"Sign failed\", response));else resolve(response);\n      }\n      if (native) {\n        var appId = signRequests[0].appId;\n        var challenge = signRequests[0].challenge;\n        u2f.sign(appId, challenge, signRequests, cbNative, timeout);\n      } else {\n        u2f.sign(signRequests, cbChrome, timeout);\n      }\n    });\n  })).promise;\n}\nfunction makeDefault(func) {\n  API[func] = function () {\n    if (!global.Promise)\n      // This is very unlikely to ever happen, since browsers\n      // supporting U2F will most likely support Promises.\n      throw new Error(\"The platform doesn't natively support promises\");\n    var args = [].slice.call(arguments);\n    return API(global.Promise)[func].apply(null, args);\n  };\n}\n\n// Provide default functions using the built-in Promise if available.\nmakeDefault('isSupported');\nmakeDefault('ensureSupport');\nmakeDefault('register');\nmakeDefault('sign');","map":{"version":3,"names":["module","exports","API","chromeApi","require","isBrowser","navigator","userAgent","isSafari","match","isEDGE","_backend","getBackend","Promise","resolve","reject","notSupported","u2f","native","hasNativeSupport","window","sign","location","protocol","MessageChannel","isSupported","ok","bind","ensureSupport","register","ErrorCodes","ErrorNames","CANCELLED","OK","OTHER_ERROR","BAD_REQUEST","CONFIGURATION_UNSUPPORTED","DEVICE_INELIGIBLE","TIMEOUT","makeError","msg","err","code","errorCode","type","error","Error","metaData","deferPromise","promise","ret","then","cancel","disconnect","backend","defer","fun","_ensureSupport","registerRequests","signRequests","timeout","Array","isArray","cbNative","response","cbChrome","appId","challenge","makeDefault","func","global","args","slice","call","arguments","apply"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/u2f-api/lib/u2f-api.js"],"sourcesContent":["'use strict';\n\nmodule.exports = API;\n\nvar chromeApi = require( './google-u2f-api' );\n\n// Feature detection (yes really)\nvar isBrowser = ( typeof navigator !== 'undefined' ) && !!navigator.userAgent;\nvar isSafari = isBrowser && navigator.userAgent.match( /Safari\\// )\n\t&& !navigator.userAgent.match( /Chrome\\// );\nvar isEDGE = isBrowser && navigator.userAgent.match( /Edge\\/1[2345]/ );\n\nvar _backend = null;\nfunction getBackend( Promise )\n{\n\tif ( !_backend )\n\t\t_backend = new Promise( function( resolve, reject )\n\t\t{\n\t\t\tfunction notSupported( )\n\t\t\t{\n\t\t\t\t// Note; {native: true} means *not* using Google's hack\n\t\t\t\tresolve( { u2f: null, native: true } );\n\t\t\t}\n\n\t\t\tif ( !isBrowser )\n\t\t\t\treturn notSupported( );\n\n\t\t\tif ( isSafari )\n\t\t\t\t// Safari doesn't support U2F, and the Safari-FIDO-U2F\n\t\t\t\t// extension lacks full support (Multi-facet apps), so we\n\t\t\t\t// block it until proper support.\n\t\t\t\treturn notSupported( );\n\n\t\t\tvar hasNativeSupport =\n\t\t\t\t( typeof window.u2f !== 'undefined' ) &&\n\t\t\t\t( typeof window.u2f.sign === 'function' );\n\n\t\t\tif ( hasNativeSupport )\n\t\t\t\tresolve( { u2f: window.u2f, native: true } );\n\n\t\t\tif ( isEDGE )\n\t\t\t\t// We don't want to check for Google's extension hack on EDGE\n\t\t\t\t// as it'll cause trouble (popups, etc)\n\t\t\t\treturn notSupported( );\n\n\t\t\tif ( location.protocol === 'http:' )\n\t\t\t\t// U2F isn't supported over http, only https\n\t\t\t\treturn notSupported( );\n\n\t\t\tif ( typeof MessageChannel === 'undefined' )\n\t\t\t\t// Unsupported browser, the chrome hack would throw\n\t\t\t\treturn notSupported( );\n\n\t\t\t// Test for google extension support\n\t\t\tchromeApi.isSupported( function( ok )\n\t\t\t{\n\t\t\t\tif ( ok )\n\t\t\t\t\tresolve( { u2f: chromeApi, native: false } );\n\t\t\t\telse\n\t\t\t\t\tnotSupported( );\n\t\t\t} );\n\t\t} );\n\n\treturn _backend;\n}\n\nfunction API( Promise )\n{\n\treturn {\n\t\tisSupported   : isSupported.bind( Promise ),\n\t\tensureSupport : ensureSupport.bind( Promise ),\n\t\tregister      : register.bind( Promise ),\n\t\tsign          : sign.bind( Promise ),\n\t\tErrorCodes    : API.ErrorCodes,\n\t\tErrorNames    : API.ErrorNames\n\t};\n}\n\nAPI.ErrorCodes = {\n\tCANCELLED: -1,\n\tOK: 0,\n\tOTHER_ERROR: 1,\n\tBAD_REQUEST: 2,\n\tCONFIGURATION_UNSUPPORTED: 3,\n\tDEVICE_INELIGIBLE: 4,\n\tTIMEOUT: 5\n};\nAPI.ErrorNames = {\n\t\"-1\": \"CANCELLED\",\n\t\"0\": \"OK\",\n\t\"1\": \"OTHER_ERROR\",\n\t\"2\": \"BAD_REQUEST\",\n\t\"3\": \"CONFIGURATION_UNSUPPORTED\",\n\t\"4\": \"DEVICE_INELIGIBLE\",\n\t\"5\": \"TIMEOUT\"\n};\n\nfunction makeError( msg, err )\n{\n\tvar code = err != null ? err.errorCode : 1; // Default to OTHER_ERROR\n\tvar type = API.ErrorNames[ '' + code ];\n\tvar error = new Error( msg );\n\terror.metaData = {\n\t\ttype: type,\n\t\tcode: code\n\t}\n\treturn error;\n}\n\nfunction deferPromise( Promise, promise )\n{\n\tvar ret = { };\n\tret.promise = new Promise( function( resolve, reject ) {\n\t\tret.resolve = resolve;\n\t\tret.reject = reject;\n\t\tpromise.then( resolve, reject );\n\t} );\n\t/**\n\t * Reject request promise and disconnect port if 'disconnect' flag is true\n\t * @param {string} msg\n\t * @param {boolean} disconnect\n\t */\n\tret.promise.cancel = function( msg, disconnect )\n\t{\n\t\tgetBackend( Promise )\n\t\t.then( function( backend )\n\t\t{\n\t\t\tif ( disconnect && !backend.native )\n\t\t\t\tbackend.u2f.disconnect( );\n\n\t\t\tret.reject( makeError( msg, { errorCode: -1 } ) );\n\t\t} );\n\t};\n\treturn ret;\n}\n\nfunction defer( Promise, fun )\n{\n\treturn deferPromise( Promise, new Promise( function( resolve, reject )\n\t{\n\t\ttry\n\t\t{\n\t\t\tfun && fun( resolve, reject );\n\t\t}\n\t\tcatch ( err )\n\t\t{\n\t\t\treject( err );\n\t\t}\n\t} ) );\n}\n\nfunction isSupported( )\n{\n\tvar Promise = this;\n\n\treturn getBackend( Promise )\n\t.then( function( backend )\n\t{\n\t\treturn !!backend.u2f;\n\t} );\n}\n\nfunction _ensureSupport( backend )\n{\n\tif ( !backend.u2f )\n\t{\n\t\tif ( location.protocol === 'http:' )\n\t\t\tthrow new Error( \"U2F isn't supported over http, only https\" );\n\t\tthrow new Error( \"U2F not supported\" );\n\t}\n}\n\nfunction ensureSupport( )\n{\n\tvar Promise = this;\n\n\treturn getBackend( Promise )\n\t.then( _ensureSupport );\n}\n\nfunction register( registerRequests, signRequests /* = null */, timeout )\n{\n\tvar Promise = this;\n\n\tif ( !Array.isArray( registerRequests ) )\n\t\tregisterRequests = [ registerRequests ];\n\n\tif ( typeof signRequests === 'number' && typeof timeout === 'undefined' )\n\t{\n\t\ttimeout = signRequests;\n\t\tsignRequests = null;\n\t}\n\n\tif ( !signRequests )\n\t\tsignRequests = [ ];\n\n\treturn deferPromise( Promise, getBackend( Promise )\n\t.then( function( backend )\n\t{\n\t\t_ensureSupport( backend );\n\n\t\tvar native = backend.native;\n\t\tvar u2f = backend.u2f;\n\n\t\treturn new Promise( function( resolve, reject )\n\t\t{\n\t\t\tfunction cbNative( response )\n\t\t\t{\n\t\t\t\tif ( response.errorCode )\n\t\t\t\t\treject( makeError( \"Registration failed\", response ) );\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelete response.errorCode;\n\t\t\t\t\tresolve( response );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction cbChrome( err, response )\n\t\t\t{\n\t\t\t\tif ( err )\n\t\t\t\t\treject( err );\n\t\t\t\telse if ( response.errorCode )\n\t\t\t\t\treject( makeError( \"Registration failed\", response ) );\n\t\t\t\telse\n\t\t\t\t\tresolve( response );\n\t\t\t}\n\n\t\t\tif ( native )\n\t\t\t{\n\t\t\t\tvar appId = registerRequests[ 0 ].appId;\n\n\t\t\t\tu2f.register(\n\t\t\t\t\tappId, registerRequests, signRequests, cbNative, timeout );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tu2f.register(\n\t\t\t\t\tregisterRequests, signRequests, cbChrome, timeout );\n\t\t\t}\n\t\t} );\n\t} ) ).promise;\n}\n\nfunction sign( signRequests, timeout )\n{\n\tvar Promise = this;\n\n\tif ( !Array.isArray( signRequests ) )\n\t\tsignRequests = [ signRequests ];\n\n\treturn deferPromise( Promise, getBackend( Promise )\n\t.then( function( backend )\n\t{\n\t\t_ensureSupport( backend );\n\n\t\tvar native = backend.native;\n\t\tvar u2f = backend.u2f;\n\n\t\treturn new Promise( function( resolve, reject )\n\t\t{\n\t\t\tfunction cbNative( response )\n\t\t\t{\n\t\t\t\tif ( response.errorCode )\n\t\t\t\t\treject( makeError( \"Sign failed\", response ) );\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelete response.errorCode;\n\t\t\t\t\tresolve( response );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction cbChrome( err, response )\n\t\t\t{\n\t\t\t\tif ( err )\n\t\t\t\t\treject( err );\n\t\t\t\telse if ( response.errorCode )\n\t\t\t\t\treject( makeError( \"Sign failed\", response ) );\n\t\t\t\telse\n\t\t\t\t\tresolve( response );\n\t\t\t}\n\n\t\t\tif ( native )\n\t\t\t{\n\t\t\t\tvar appId = signRequests[ 0 ].appId;\n\t\t\t\tvar challenge = signRequests[ 0 ].challenge;\n\n\t\t\t\tu2f.sign( appId, challenge, signRequests, cbNative, timeout );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tu2f.sign( signRequests, cbChrome, timeout );\n\t\t\t}\n\t\t} );\n\t} ) ).promise;\n}\n\nfunction makeDefault( func )\n{\n\tAPI[ func ] = function( )\n\t{\n\t\tif ( !global.Promise )\n\t\t\t// This is very unlikely to ever happen, since browsers\n\t\t\t// supporting U2F will most likely support Promises.\n\t\t\tthrow new Error( \"The platform doesn't natively support promises\" );\n\n\t\tvar args = [ ].slice.call( arguments );\n\t\treturn API( global.Promise )[ func ].apply( null, args );\n\t};\n}\n\n// Provide default functions using the built-in Promise if available.\nmakeDefault( 'isSupported' );\nmakeDefault( 'ensureSupport' );\nmakeDefault( 'register' );\nmakeDefault( 'sign' );\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}