{"ast":null,"code":"import _regeneratorRuntime from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{HUD}from'../gui/hud';import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{Helmet}from'react-helmet';import{View}from'gui/uielements';import{useGameManager,useMapManager}from'rooms';import{useRoomContext}from'context/room';import{useCoreContext}from'core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Game=function Game(_ref){var _hud$stats,_hud$stats2;var appManager=_ref.appManager;var _useRoomContext=useRoomContext(),hud=_useRoomContext.hud,mapRoom=_useRoomContext.mapRoom;var _useCoreContext=useCoreContext(),isLoggedIn=_useCoreContext.isLoggedIn;var navigate=useNavigate();var map=useMapManager(appManager,appManager.mapManager,appManager.eventHandler);var game=useGameManager(appManager,appManager.gameManager,appManager.eventHandler);var gameCanvas=React.useRef(null);// LIFECYCLE\nuseEffect(function(){init();return function cleanup(){deinit();};},[]);var init=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isLoggedIn){_context.next=3;break;}navigate('/');return _context.abrupt(\"return\");case 3:appManager.start(gameCanvas.current).then(function(){if(!mapRoom)map.joinMapRoom();}).catch(function(e){return console.warn;});case 4:case\"end\":return _context.stop();}}},_callee);}));return function init(){return _ref2.apply(this,arguments);};}();var deinit=function deinit(){map.leave();game.leave();};// RENDER\nreturn/*#__PURE__*/_jsxs(View,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"\".concat((_hud$stats=hud.stats)===null||_hud$stats===void 0?void 0:_hud$stats.roomName,\" [\").concat((_hud$stats2=hud.stats)===null||_hud$stats2===void 0?void 0:_hud$stats2.playersCount,\"]\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"canvas-container\",ref:gameCanvas}),/*#__PURE__*/_jsx(HUD,{eventHandler:appManager.eventHandler})]});};export default Game;","map":null,"metadata":{},"sourceType":"module"}