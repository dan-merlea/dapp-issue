{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { a as R } from \"./chunk-PCZFDQ5B.js\";\nimport { a as v } from \"./chunk-OP7QTKEQ.js\";\nimport { a as u } from \"./chunk-HDFKSNEG.js\";\nimport { a as S } from \"./chunk-4UTVSPN6.js\";\nimport { a as H } from \"./chunk-OVRTUNC2.js\";\nimport { a as h } from \"./chunk-HZKP5C5V.js\";\nimport { a as F } from \"./chunk-E37GJNPW.js\";\nimport { b as p } from \"./chunk-MD7XZQEH.js\";\nimport { h as d, i as m, j as B } from \"./chunk-NO5ZX2I2.js\";\nimport { k as G } from \"./chunk-P6M5SGWP.js\";\nimport { j as l, m as g } from \"./chunk-HBP5N4FR.js\";\ng();\nF();\nG();\nvar n = {},\n  y = [];\nfunction P(_ref) {\n  var i = _ref.serverTransaction,\n    r = _ref.sessionId,\n    s = _ref.customTransactionInformation,\n    o = _ref.shouldRefreshBalance;\n  var e = i.hash,\n    t = i.status,\n    a = i.results,\n    c = i.invalidTransaction,\n    T = i.hasStatusChanged;\n  try {\n    if (y.includes(e)) return;\n    if (n[e] > 30) {\n      u(r);\n      return;\n    }\n    if (c || d(t)) {\n      n[e] = n[e] ? n[e] + 1 : 1;\n      return;\n    }\n    T && (m(t) && (s == null ? void 0 : s.completedTransactionsDelay) != null ? (y.push(e), setTimeout(function () {\n      return h.dispatch(p({\n        sessionId: r,\n        status: \"success\",\n        transactionHash: e\n      }));\n    }, s == null ? void 0 : s.completedTransactionsDelay)) : h.dispatch(p({\n      sessionId: r,\n      status: t,\n      transactionHash: e\n    }))), o || S(), B(t) && v({\n      sessionId: r,\n      hash: e,\n      results: a\n    });\n  } catch (f) {\n    console.error(f), u(r);\n  }\n}\nfunction J(t) {\n  return l(this, arguments, /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2) {\n    var i, _ref2$transactionBatc, r, s, _ref2$getTransactions, o, e, a, c, _iterator, _step, T;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            i = _ref2.sessionId, _ref2$transactionBatc = _ref2.transactionBatch, r = _ref2$transactionBatc.transactions, s = _ref2$transactionBatc.customTransactionInformation, _ref2$getTransactions = _ref2.getTransactionsByHash, o = _ref2$getTransactions === void 0 ? H : _ref2$getTransactions, e = _ref2.shouldRefreshBalance;\n            _context.prev = 1;\n            if (!(r == null)) {\n              _context.next = 4;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 4:\n            a = R(r, y);\n            _context.next = 7;\n            return o(a);\n          case 7:\n            c = _context.sent;\n            _iterator = _createForOfIteratorHelper(c);\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                T = _step.value;\n                P({\n                  serverTransaction: T,\n                  sessionId: i,\n                  customTransactionInformation: s,\n                  shouldRefreshBalance: e\n                });\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n            _context.next = 15;\n            break;\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](1);\n            console.error(_context.t0);\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 12]]);\n  }));\n}\nexport { J as a };","map":{"version":3,"names":["a","R","v","u","S","H","h","F","b","p","d","i","m","j","B","k","G","l","g","n","y","P","serverTransaction","r","sessionId","s","customTransactionInformation","o","shouldRefreshBalance","e","hash","t","status","results","c","invalidTransaction","T","hasStatusChanged","includes","completedTransactionsDelay","push","setTimeout","dispatch","transactionHash","f","console","error","J","arguments","transactionBatch","transactions","getTransactionsByHash"],"sources":["/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-KA52MVAN.js"],"sourcesContent":["import{a as R}from\"./chunk-PCZFDQ5B.js\";import{a as v}from\"./chunk-OP7QTKEQ.js\";import{a as u}from\"./chunk-HDFKSNEG.js\";import{a as S}from\"./chunk-4UTVSPN6.js\";import{a as H}from\"./chunk-OVRTUNC2.js\";import{a as h}from\"./chunk-HZKP5C5V.js\";import{a as F}from\"./chunk-E37GJNPW.js\";import{b as p}from\"./chunk-MD7XZQEH.js\";import{h as d,i as m,j as B}from\"./chunk-NO5ZX2I2.js\";import{k as G}from\"./chunk-P6M5SGWP.js\";import{j as l,m as g}from\"./chunk-HBP5N4FR.js\";g();F();G();var n={},y=[];function P({serverTransaction:i,sessionId:r,customTransactionInformation:s,shouldRefreshBalance:o}){let{hash:e,status:t,results:a,invalidTransaction:c,hasStatusChanged:T}=i;try{if(y.includes(e))return;if(n[e]>30){u(r);return}if(c||d(t)){n[e]=n[e]?n[e]+1:1;return}T&&(m(t)&&(s==null?void 0:s.completedTransactionsDelay)!=null?(y.push(e),setTimeout(()=>h.dispatch(p({sessionId:r,status:\"success\",transactionHash:e})),s==null?void 0:s.completedTransactionsDelay)):h.dispatch(p({sessionId:r,status:t,transactionHash:e}))),o||S(),B(t)&&v({sessionId:r,hash:e,results:a})}catch(f){console.error(f),u(r)}}function J(t){return l(this,arguments,function*({sessionId:i,transactionBatch:{transactions:r,customTransactionInformation:s},getTransactionsByHash:o=H,shouldRefreshBalance:e}){try{if(r==null)return;let a=R(r,y),c=yield o(a);for(let T of c)P({serverTransaction:T,sessionId:i,customTransactionInformation:s,shouldRefreshBalance:e})}catch(a){console.error(a)}})}export{J as a};\n//# sourceMappingURL=chunk-KA52MVAN.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}