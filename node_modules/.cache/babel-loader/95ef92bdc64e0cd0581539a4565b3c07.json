{"ast":null,"code":"import _regeneratorRuntime from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Constants}from'@krogan/common';import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{Helmet}from'react-helmet';import{Button,Space,Box,View,Text}from'gui/uielements';import{useRoomContext}from'context/room';import{Username}from'gui/signup';import{SelectNfts}from'gui/signup/SelectNfts';import{ConnectButton,useCoreContext}from'core';import{useLobbyManager}from'rooms';import{Image}from'gui/uielements/Image';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _player$nfts;var navigate=useNavigate();var lobbyManager=useLobbyManager();var _useCoreContext=useCoreContext(),isLoggedIn=_useCoreContext.isLoggedIn,address=_useCoreContext.address;var _useRoomContext=useRoomContext(),player=_useRoomContext.player;// LIFECYCLE\nuseEffect(function(){init();return function cleanup(){deinit();};},[]);var init=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function init(){return _ref.apply(this,arguments);};}();var deinit=function deinit(){lobbyManager.leave();};// EFFECTS\nvar connection=function connection(){if(isLoggedIn){lobbyManager.connectToLobby(address);}else{lobbyManager.leave();}};useEffect(connection,[isLoggedIn]);var start=function start(){lobbyManager.leave();navigate('/game');};// RENDER\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(View,{flex:true,center:true,style:{padding:32,flexDirection:'column'},children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"\".concat(Constants.APP_TITLE,\" - Home\")})}),/*#__PURE__*/_jsx(View,{flex:true,center:true,column:true,children:/*#__PURE__*/_jsx(Image,{src:\"/images/branding.png\"})}),/*#__PURE__*/_jsx(Space,{size:\"m\"}),/*#__PURE__*/_jsxs(Box,{style:{width:500,maxWidth:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(ConnectButton,{}),lobbyManager.message&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Space,{size:\"s\"}),/*#__PURE__*/_jsx(Text,{type:\"body\",children:lobbyManager.message})]}),isLoggedIn&&player&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:JSON.stringify(player)}),/*#__PURE__*/_jsx(\"p\",{children:player===null||player===void 0?void 0:(_player$nfts=player.nfts)===null||_player$nfts===void 0?void 0:_player$nfts.join(', ')}),player.username==undefined&&/*#__PURE__*/_jsx(Username,{onSave:lobbyManager.updateUsername}),player.username&&player.nfts.length==0&&/*#__PURE__*/_jsx(SelectNfts,{player:player,selected:lobbyManager.updateSpaceships}),/*#__PURE__*/_jsx(Space,{size:\"s\"}),player.username&&player.nfts.length>0&&/*#__PURE__*/_jsx(Button,{text:\"Start game\",onClick:start})]})]})]})});};export default Home;","map":null,"metadata":{},"sourceType":"module"}