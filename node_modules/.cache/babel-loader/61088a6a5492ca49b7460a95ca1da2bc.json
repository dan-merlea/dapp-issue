{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { b as t } from \"./chunk-3SGZP5CP.js\";\nimport { a as u } from \"./chunk-6CIM3M2N.js\";\nimport { a as m } from \"./chunk-MRGB5FAN.js\";\nimport { a } from \"./chunk-YAR2KJ42.js\";\nimport { a as l } from \"./chunk-W5CAVGMZ.js\";\nimport { c as i } from \"./chunk-HXERYGOO.js\";\nimport { a as C } from \"./chunk-E37GJNPW.js\";\nimport { l as c } from \"./chunk-PV7M7QZ7.js\";\nimport { j as n, m as s } from \"./chunk-HBP5N4FR.js\";\ns();\nimport { useCallback as b, useEffect as f, useRef as d } from \"react\";\nimport { io as A } from \"socket.io-client\";\nC();\nvar I = 3e3,\n  w = 3,\n  M = 500,\n  R = 1e3;\nfunction z() {\n  var _this = this;\n  var o = d(null),\n    _l = l(),\n    r = _l.address,\n    E = i(),\n    _u = u(),\n    T = _u.network,\n    p = function p(e) {\n      o.current && clearTimeout(o.current), o.current = setTimeout(function () {\n        E(c(e));\n      }, R);\n    },\n    k = b(m(function () {\n      return n(_this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var e;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                t.status = \"pending\";\n                _context.next = 3;\n                return a(T.apiAddress);\n              case 3:\n                e = _context.sent;\n                if (!(e == null)) {\n                  _context.next = 7;\n                  break;\n                }\n                console.warn(\"Can not get websocket url\");\n                return _context.abrupt(\"return\");\n              case 7:\n                t.current = A(e, {\n                  forceNew: !0,\n                  reconnectionAttempts: w,\n                  timeout: I,\n                  query: {\n                    address: r\n                  }\n                }), t.status = \"completed\", t.current.onAny(function (N) {\n                  p(N);\n                });\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }, {\n      retries: 2,\n      delay: M\n    }), [r]);\n  f(function () {\n    r && t.status === \"not_initialized\" && !t.current && k();\n  }, [r, t.current]), f(function () {\n    return function () {\n      var e;\n      (e = t.current) == null || e.close(), o.current && clearTimeout(o.current);\n    };\n  }, []);\n}\nexport { z as a };","map":{"version":3,"names":["b","t","a","u","m","l","c","i","C","j","n","s","useCallback","useEffect","f","useRef","d","io","A","I","w","M","R","z","o","r","address","E","T","network","p","e","current","clearTimeout","setTimeout","k","status","apiAddress","console","warn","forceNew","reconnectionAttempts","timeout","query","onAny","N","retries","delay","close"],"sources":["/Users/merlea/Development/Crypto/Krogan/dapp-issue/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-NBFHM2ZS.js"],"sourcesContent":["import{b as t}from\"./chunk-3SGZP5CP.js\";import{a as u}from\"./chunk-6CIM3M2N.js\";import{a as m}from\"./chunk-MRGB5FAN.js\";import{a}from\"./chunk-YAR2KJ42.js\";import{a as l}from\"./chunk-W5CAVGMZ.js\";import{c as i}from\"./chunk-HXERYGOO.js\";import{a as C}from\"./chunk-E37GJNPW.js\";import{l as c}from\"./chunk-PV7M7QZ7.js\";import{j as n,m as s}from\"./chunk-HBP5N4FR.js\";s();import{useCallback as b,useEffect as f,useRef as d}from\"react\";import{io as A}from\"socket.io-client\";C();var I=3e3,w=3,M=500,R=1e3;function z(){let o=d(null),{address:r}=l(),E=i(),{network:T}=u(),p=e=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{E(c(e))},R)},k=b(m(()=>n(this,null,function*(){t.status=\"pending\";let e=yield a(T.apiAddress);if(e==null){console.warn(\"Can not get websocket url\");return}t.current=A(e,{forceNew:!0,reconnectionAttempts:w,timeout:I,query:{address:r}}),t.status=\"completed\",t.current.onAny(N=>{p(N)})}),{retries:2,delay:M}),[r]);f(()=>{r&&t.status===\"not_initialized\"&&!t.current&&k()},[r,t.current]),f(()=>()=>{var e;(e=t.current)==null||e.close(),o.current&&clearTimeout(o.current)},[])}export{z as a};\n//# sourceMappingURL=chunk-NBFHM2ZS.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}