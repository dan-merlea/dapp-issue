{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\nvar typeExpressionParser_1 = require(\"./typeExpressionParser\");\nvar NamePlaceholder = \"?\";\nvar DescriptionPlaceholder = \"N / A\";\nvar EndpointDefinition = /*#__PURE__*/function () {\n  function EndpointDefinition(name, input, output, modifiers) {\n    _classCallCheck(this, EndpointDefinition);\n    this.input = [];\n    this.output = [];\n    this.name = name;\n    this.input = input || [];\n    this.output = output || [];\n    this.modifiers = modifiers;\n  }\n  _createClass(EndpointDefinition, [{\n    key: \"isConstructor\",\n    value: function isConstructor() {\n      return this.name == \"constructor\";\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      json.name = json.name == null ? NamePlaceholder : json.name;\n      json.payableInTokens = json.payableInTokens || [];\n      json.inputs = json.inputs || [];\n      json.outputs = json.outputs || [];\n      var input = json.inputs.map(function (param) {\n        return EndpointParameterDefinition.fromJSON(param);\n      });\n      var output = json.outputs.map(function (param) {\n        return EndpointParameterDefinition.fromJSON(param);\n      });\n      var modifiers = new EndpointModifiers(json.mutability, json.payableInTokens);\n      return new EndpointDefinition(json.name, input, output, modifiers);\n    }\n  }]);\n  return EndpointDefinition;\n}();\nexports.EndpointDefinition = EndpointDefinition;\nvar EndpointModifiers = /*#__PURE__*/function () {\n  function EndpointModifiers(mutability, payableInTokens) {\n    _classCallCheck(this, EndpointModifiers);\n    this.mutability = mutability || \"\";\n    this.payableInTokens = payableInTokens || [];\n  }\n  _createClass(EndpointModifiers, [{\n    key: \"isPayableInEGLD\",\n    value: function isPayableInEGLD() {\n      return this.isPayableInToken(\"EGLD\");\n    }\n  }, {\n    key: \"isPayableInToken\",\n    value: function isPayableInToken(token) {\n      if (this.payableInTokens.includes(token)) {\n        return true;\n      }\n      if (this.payableInTokens.includes(\"!\".concat(token))) {\n        return false;\n      }\n      if (this.payableInTokens.includes(\"*\")) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"isPayable\",\n    value: function isPayable() {\n      return this.payableInTokens.length != 0;\n    }\n  }, {\n    key: \"isReadonly\",\n    value: function isReadonly() {\n      return this.mutability == \"readonly\";\n    }\n  }]);\n  return EndpointModifiers;\n}();\nexports.EndpointModifiers = EndpointModifiers;\nvar EndpointParameterDefinition = /*#__PURE__*/function () {\n  function EndpointParameterDefinition(name, description, type) {\n    _classCallCheck(this, EndpointParameterDefinition);\n    this.name = name;\n    this.description = description;\n    this.type = type;\n  }\n  _createClass(EndpointParameterDefinition, null, [{\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      var parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\n      return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\n    }\n  }]);\n  return EndpointParameterDefinition;\n}();\nexports.EndpointParameterDefinition = EndpointParameterDefinition;","map":{"version":3,"sources":["../../../src/smartcontracts/typesystem/endpoint.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\nconst typeExpressionParser_1 = require(\"./typeExpressionParser\");\nconst NamePlaceholder = \"?\";\nconst DescriptionPlaceholder = \"N / A\";\nclass EndpointDefinition {\n    constructor(name, input, output, modifiers) {\n        this.input = [];\n        this.output = [];\n        this.name = name;\n        this.input = input || [];\n        this.output = output || [];\n        this.modifiers = modifiers;\n    }\n    isConstructor() {\n        return this.name == \"constructor\";\n    }\n    static fromJSON(json) {\n        json.name = json.name == null ? NamePlaceholder : json.name;\n        json.payableInTokens = json.payableInTokens || [];\n        json.inputs = json.inputs || [];\n        json.outputs = json.outputs || [];\n        let input = json.inputs.map(param => EndpointParameterDefinition.fromJSON(param));\n        let output = json.outputs.map(param => EndpointParameterDefinition.fromJSON(param));\n        let modifiers = new EndpointModifiers(json.mutability, json.payableInTokens);\n        return new EndpointDefinition(json.name, input, output, modifiers);\n    }\n}\nexports.EndpointDefinition = EndpointDefinition;\nclass EndpointModifiers {\n    constructor(mutability, payableInTokens) {\n        this.mutability = mutability || \"\";\n        this.payableInTokens = payableInTokens || [];\n    }\n    isPayableInEGLD() {\n        return this.isPayableInToken(\"EGLD\");\n    }\n    isPayableInToken(token) {\n        if (this.payableInTokens.includes(token)) {\n            return true;\n        }\n        if (this.payableInTokens.includes(`!${token}`)) {\n            return false;\n        }\n        if (this.payableInTokens.includes(\"*\")) {\n            return true;\n        }\n        return false;\n    }\n    isPayable() {\n        return this.payableInTokens.length != 0;\n    }\n    isReadonly() {\n        return this.mutability == \"readonly\";\n    }\n}\nexports.EndpointModifiers = EndpointModifiers;\nclass EndpointParameterDefinition {\n    constructor(name, description, type) {\n        this.name = name;\n        this.description = description;\n        this.type = type;\n    }\n    static fromJSON(json) {\n        let parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\n        return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\n    }\n}\nexports.EndpointParameterDefinition = EndpointParameterDefinition;\n//# sourceMappingURL=endpoint.js.map"]},"metadata":{},"sourceType":"script"}