{"ast":null,"code":"import _assertThisInitialized from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _toConsumableArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _inherits from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createForOfIteratorHelper from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _defineProperty from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport ee from \"pino\";\nimport at from \"@walletconnect/keyvaluestorage\";\nimport { HEARTBEAT_EVENTS as te, HeartBeat as ot } from \"@walletconnect/heartbeat\";\nimport { generateChildLogger as I, getLoggerContext as A, getDefaultLoggerOptions as se } from \"@walletconnect/logger\";\nimport { IMessageTracker as ut, IPublisher as ht, ISubscriber as ct, IRelayer as lt, IStore as Dt, ICore as dt } from \"@walletconnect/types\";\nimport { safeJsonStringify as gt, safeJsonParse as pt } from \"@walletconnect/safe-json\";\nimport * as N from \"@walletconnect/relay-auth\";\nimport { getInternalError as m, mapToObj as ie, objToMap as re, generateKeyPair as bt, generateRandomBytes32 as ne, deriveSymKey as yt, hashKey as ft, validateEncoding as mt, isTypeOneEnvelope as ae, encrypt as Et, validateDecoding as vt, decrypt as wt, hashMessage as B, getRelayProtocolName as V, getRelayProtocolApi as G, isUndefined as q, getSdkError as Ct, formatRelayRpcUrl as _t, isProposalStruct as St, isSessionStruct as It } from \"@walletconnect/utils\";\nimport { ONE_DAY as At, SIX_HOURS as Ot, ONE_SECOND as Rt, THIRTY_DAYS as Tt, FIVE_SECONDS as zt, Watch as Pt, toMiliseconds as xt } from \"@walletconnect/time\";\nimport { JsonRpcProvider as Lt } from \"@walletconnect/jsonrpc-provider\";\nimport { isJsonRpcRequest as Ft, formatJsonRpcResult as Ut } from \"@walletconnect/jsonrpc-utils\";\nimport Nt from \"@walletconnect/jsonrpc-ws-connection\";\nimport Bt from \"lodash.isequal\";\nfunction D() {\n  this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0;\n}\nvar M = D;\nD.EventEmitter = D, D.prototype._events = void 0, D.prototype._maxListeners = void 0, D.defaultMaxListeners = 10, D.prototype.setMaxListeners = function (s) {\n  if (!Mt(s) || s < 0 || isNaN(s)) throw TypeError(\"n must be a positive number\");\n  return this._maxListeners = s, this;\n}, D.prototype.emit = function (s) {\n  var e, t, i, r, n, a;\n  if (this._events || (this._events = {}), s === \"error\" && (!this._events.error || P(this._events.error) && !this._events.error.length)) {\n    if (e = arguments[1], e instanceof Error) throw e;\n    var o = new Error('Uncaught, unspecified \"error\" event. (' + e + \")\");\n    throw o.context = e, o;\n  }\n  if (t = this._events[s], oe(t)) return !1;\n  if (_(t)) switch (arguments.length) {\n    case 1:\n      t.call(this);\n      break;\n    case 2:\n      t.call(this, arguments[1]);\n      break;\n    case 3:\n      t.call(this, arguments[1], arguments[2]);\n      break;\n    default:\n      r = Array.prototype.slice.call(arguments, 1), t.apply(this, r);\n  } else if (P(t)) for (r = Array.prototype.slice.call(arguments, 1), a = t.slice(), i = a.length, n = 0; n < i; n++) {\n    a[n].apply(this, r);\n  }\n  return !0;\n}, D.prototype.addListener = function (s, e) {\n  var t;\n  if (!_(e)) throw TypeError(\"listener must be a function\");\n  return this._events || (this._events = {}), this._events.newListener && this.emit(\"newListener\", s, _(e.listener) ? e.listener : e), this._events[s] ? P(this._events[s]) ? this._events[s].push(e) : this._events[s] = [this._events[s], e] : this._events[s] = e, P(this._events[s]) && !this._events[s].warned && (oe(this._maxListeners) ? t = D.defaultMaxListeners : t = this._maxListeners, t && t > 0 && this._events[s].length > t && (this._events[s].warned = !0, console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\", this._events[s].length), typeof console.trace == \"function\" && console.trace())), this;\n}, D.prototype.on = D.prototype.addListener, D.prototype.once = function (s, e) {\n  if (!_(e)) throw TypeError(\"listener must be a function\");\n  var t = !1;\n  function i() {\n    this.removeListener(s, i), t || (t = !0, e.apply(this, arguments));\n  }\n  return i.listener = e, this.on(s, i), this;\n}, D.prototype.removeListener = function (s, e) {\n  var t, i, r, n;\n  if (!_(e)) throw TypeError(\"listener must be a function\");\n  if (!this._events || !this._events[s]) return this;\n  if (t = this._events[s], r = t.length, i = -1, t === e || _(t.listener) && t.listener === e) delete this._events[s], this._events.removeListener && this.emit(\"removeListener\", s, e);else if (P(t)) {\n    for (n = r; n-- > 0;) {\n      if (t[n] === e || t[n].listener && t[n].listener === e) {\n        i = n;\n        break;\n      }\n    }\n    if (i < 0) return this;\n    t.length === 1 ? (t.length = 0, delete this._events[s]) : t.splice(i, 1), this._events.removeListener && this.emit(\"removeListener\", s, e);\n  }\n  return this;\n}, D.prototype.removeAllListeners = function (s) {\n  var e, t;\n  if (!this._events) return this;\n  if (!this._events.removeListener) return arguments.length === 0 ? this._events = {} : this._events[s] && delete this._events[s], this;\n  if (arguments.length === 0) {\n    for (e in this._events) {\n      e !== \"removeListener\" && this.removeAllListeners(e);\n    }\n    return this.removeAllListeners(\"removeListener\"), this._events = {}, this;\n  }\n  if (t = this._events[s], _(t)) this.removeListener(s, t);else if (t) for (; t.length;) {\n    this.removeListener(s, t[t.length - 1]);\n  }\n  return delete this._events[s], this;\n}, D.prototype.listeners = function (s) {\n  var e;\n  return !this._events || !this._events[s] ? e = [] : _(this._events[s]) ? e = [this._events[s]] : e = this._events[s].slice(), e;\n}, D.prototype.listenerCount = function (s) {\n  if (this._events) {\n    var e = this._events[s];\n    if (_(e)) return 1;\n    if (e) return e.length;\n  }\n  return 0;\n}, D.listenerCount = function (s, e) {\n  return s.listenerCount(e);\n};\nfunction _(s) {\n  return typeof s == \"function\";\n}\nfunction Mt(s) {\n  return typeof s == \"number\";\n}\nfunction P(s) {\n  return typeof s == \"object\" && s !== null;\n}\nfunction oe(s) {\n  return s === void 0;\n}\nfunction Kt(s, e) {\n  if (s.length >= 255) throw new TypeError(\"Alphabet too long\");\n  for (var t = new Uint8Array(256), i = 0; i < t.length; i++) {\n    t[i] = 255;\n  }\n  for (var r = 0; r < s.length; r++) {\n    var n = s.charAt(r),\n      a = n.charCodeAt(0);\n    if (t[a] !== 255) throw new TypeError(n + \" is ambiguous\");\n    t[a] = r;\n  }\n  var o = s.length,\n    u = s.charAt(0),\n    p = Math.log(o) / Math.log(256),\n    c = Math.log(256) / Math.log(o);\n  function l(h) {\n    if (h instanceof Uint8Array || (ArrayBuffer.isView(h) ? h = new Uint8Array(h.buffer, h.byteOffset, h.byteLength) : Array.isArray(h) && (h = Uint8Array.from(h))), !(h instanceof Uint8Array)) throw new TypeError(\"Expected Uint8Array\");\n    if (h.length === 0) return \"\";\n    for (var g = 0, R = 0, y = 0, E = h.length; y !== E && h[y] === 0;) {\n      y++, g++;\n    }\n    for (var v = (E - y) * c + 1 >>> 0, b = new Uint8Array(v); y !== E;) {\n      for (var w = h[y], S = 0, f = v - 1; (w !== 0 || S < R) && f !== -1; f--, S++) {\n        w += 256 * b[f] >>> 0, b[f] = w % o >>> 0, w = w / o >>> 0;\n      }\n      if (w !== 0) throw new Error(\"Non-zero carry\");\n      R = S, y++;\n    }\n    for (var C = v - R; C !== v && b[C] === 0;) {\n      C++;\n    }\n    for (var U = u.repeat(g); C < v; ++C) {\n      U += s.charAt(b[C]);\n    }\n    return U;\n  }\n  function F(h) {\n    if (typeof h != \"string\") throw new TypeError(\"Expected String\");\n    if (h.length === 0) return new Uint8Array();\n    var g = 0;\n    if (h[g] !== \" \") {\n      for (var R = 0, y = 0; h[g] === u;) {\n        R++, g++;\n      }\n      for (var E = (h.length - g) * p + 1 >>> 0, v = new Uint8Array(E); h[g];) {\n        var b = t[h.charCodeAt(g)];\n        if (b === 255) return;\n        for (var w = 0, S = E - 1; (b !== 0 || w < y) && S !== -1; S--, w++) {\n          b += o * v[S] >>> 0, v[S] = b % 256 >>> 0, b = b / 256 >>> 0;\n        }\n        if (b !== 0) throw new Error(\"Non-zero carry\");\n        y = w, g++;\n      }\n      if (h[g] !== \" \") {\n        for (var f = E - y; f !== E && v[f] === 0;) {\n          f++;\n        }\n        for (var C = new Uint8Array(R + (E - f)), U = R; f !== E;) {\n          C[U++] = v[f++];\n        }\n        return C;\n      }\n    }\n  }\n  function Y(h) {\n    var g = F(h);\n    if (g) return g;\n    throw new Error(\"Non-\".concat(e, \" character\"));\n  }\n  return {\n    encode: l,\n    decodeUnsafe: F,\n    decode: Y\n  };\n}\nvar $t = Kt,\n  kt = $t;\nvar ue = function ue(s) {\n    if (s instanceof Uint8Array && s.constructor.name === \"Uint8Array\") return s;\n    if (s instanceof ArrayBuffer) return new Uint8Array(s);\n    if (ArrayBuffer.isView(s)) return new Uint8Array(s.buffer, s.byteOffset, s.byteLength);\n    throw new Error(\"Unknown type, must be binary type\");\n  },\n  jt = function jt(s) {\n    return new TextEncoder().encode(s);\n  },\n  Yt = function Yt(s) {\n    return new TextDecoder().decode(s);\n  };\nvar Vt = /*#__PURE__*/function () {\n  function Vt(e, t, i) {\n    _classCallCheck(this, Vt);\n    this.name = e, this.prefix = t, this.baseEncode = i;\n  }\n  _createClass(Vt, [{\n    key: \"encode\",\n    value: function encode(e) {\n      if (e instanceof Uint8Array) return \"\".concat(this.prefix).concat(this.baseEncode(e));\n      throw Error(\"Unknown type, must be binary type\");\n    }\n  }]);\n  return Vt;\n}();\nvar Gt = /*#__PURE__*/function () {\n  function Gt(e, t, i) {\n    _classCallCheck(this, Gt);\n    if (this.name = e, this.prefix = t, t.codePointAt(0) === void 0) throw new Error(\"Invalid prefix character\");\n    this.prefixCodePoint = t.codePointAt(0), this.baseDecode = i;\n  }\n  _createClass(Gt, [{\n    key: \"decode\",\n    value: function decode(e) {\n      if (typeof e == \"string\") {\n        if (e.codePointAt(0) !== this.prefixCodePoint) throw Error(\"Unable to decode multibase string \".concat(JSON.stringify(e), \", \").concat(this.name, \" decoder only supports inputs prefixed with \").concat(this.prefix));\n        return this.baseDecode(e.slice(this.prefix.length));\n      } else throw Error(\"Can only multibase decode strings\");\n    }\n  }, {\n    key: \"or\",\n    value: function or(e) {\n      return he(this, e);\n    }\n  }]);\n  return Gt;\n}();\nvar qt = /*#__PURE__*/function () {\n  function qt(e) {\n    _classCallCheck(this, qt);\n    this.decoders = e;\n  }\n  _createClass(qt, [{\n    key: \"or\",\n    value: function or(e) {\n      return he(this, e);\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(e) {\n      var t = e[0],\n        i = this.decoders[t];\n      if (i) return i.decode(e);\n      throw RangeError(\"Unable to decode multibase string \".concat(JSON.stringify(e), \", only inputs prefixed with \").concat(Object.keys(this.decoders), \" are supported\"));\n    }\n  }]);\n  return qt;\n}();\nvar he = function he(s, e) {\n  return new qt(_objectSpread(_objectSpread({}, s.decoders || _defineProperty({}, s.prefix, s)), e.decoders || _defineProperty({}, e.prefix, e)));\n};\nvar Jt = /*#__PURE__*/function () {\n  function Jt(e, t, i, r) {\n    _classCallCheck(this, Jt);\n    this.name = e, this.prefix = t, this.baseEncode = i, this.baseDecode = r, this.encoder = new Vt(e, t, i), this.decoder = new Gt(e, t, r);\n  }\n  _createClass(Jt, [{\n    key: \"encode\",\n    value: function encode(e) {\n      return this.encoder.encode(e);\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(e) {\n      return this.decoder.decode(e);\n    }\n  }]);\n  return Jt;\n}();\nvar K = function K(_ref3) {\n    var s = _ref3.name,\n      e = _ref3.prefix,\n      t = _ref3.encode,\n      i = _ref3.decode;\n    return new Jt(s, e, t, i);\n  },\n  x = function x(_ref4) {\n    var s = _ref4.prefix,\n      e = _ref4.name,\n      t = _ref4.alphabet;\n    var _kt = kt(t, e),\n      i = _kt.encode,\n      r = _kt.decode;\n    return K({\n      prefix: s,\n      name: e,\n      encode: i,\n      decode: function decode(n) {\n        return ue(r(n));\n      }\n    });\n  },\n  Wt = function Wt(s, e, t, i) {\n    var r = {};\n    for (var c = 0; c < e.length; ++c) {\n      r[e[c]] = c;\n    }\n    var n = s.length;\n    for (; s[n - 1] === \"=\";) {\n      --n;\n    }\n    var a = new Uint8Array(n * t / 8 | 0);\n    var o = 0,\n      u = 0,\n      p = 0;\n    for (var _c = 0; _c < n; ++_c) {\n      var l = r[s[_c]];\n      if (l === void 0) throw new SyntaxError(\"Non-\".concat(i, \" character\"));\n      u = u << t | l, o += t, o >= 8 && (o -= 8, a[p++] = 255 & u >> o);\n    }\n    if (o >= t || 255 & u << 8 - o) throw new SyntaxError(\"Unexpected end of data\");\n    return a;\n  },\n  Xt = function Xt(s, e, t) {\n    var i = e[e.length - 1] === \"=\",\n      r = (1 << t) - 1;\n    var n = \"\",\n      a = 0,\n      o = 0;\n    for (var u = 0; u < s.length; ++u) {\n      for (o = o << 8 | s[u], a += 8; a > t;) {\n        a -= t, n += e[r & o >> a];\n      }\n    }\n    if (a && (n += e[r & o << t - a]), i) for (; n.length * t & 7;) {\n      n += \"=\";\n    }\n    return n;\n  },\n  d = function d(_ref5) {\n    var s = _ref5.name,\n      e = _ref5.prefix,\n      t = _ref5.bitsPerChar,\n      i = _ref5.alphabet;\n    return K({\n      prefix: e,\n      name: s,\n      encode: function encode(r) {\n        return Xt(r, i, t);\n      },\n      decode: function decode(r) {\n        return Wt(r, i, t, s);\n      }\n    });\n  },\n  Ht = K({\n    prefix: \"\\0\",\n    name: \"identity\",\n    encode: function encode(s) {\n      return Yt(s);\n    },\n    decode: function decode(s) {\n      return jt(s);\n    }\n  });\nvar Zt = Object.freeze({\n  __proto__: null,\n  identity: Ht\n});\nvar Qt = d({\n  prefix: \"0\",\n  name: \"base2\",\n  alphabet: \"01\",\n  bitsPerChar: 1\n});\nvar es = Object.freeze({\n  __proto__: null,\n  base2: Qt\n});\nvar ts = d({\n  prefix: \"7\",\n  name: \"base8\",\n  alphabet: \"01234567\",\n  bitsPerChar: 3\n});\nvar ss = Object.freeze({\n  __proto__: null,\n  base8: ts\n});\nvar is = x({\n  prefix: \"9\",\n  name: \"base10\",\n  alphabet: \"0123456789\"\n});\nvar rs = Object.freeze({\n  __proto__: null,\n  base10: is\n});\nvar ns = d({\n    prefix: \"f\",\n    name: \"base16\",\n    alphabet: \"0123456789abcdef\",\n    bitsPerChar: 4\n  }),\n  as = d({\n    prefix: \"F\",\n    name: \"base16upper\",\n    alphabet: \"0123456789ABCDEF\",\n    bitsPerChar: 4\n  });\nvar os = Object.freeze({\n  __proto__: null,\n  base16: ns,\n  base16upper: as\n});\nvar us = d({\n    prefix: \"b\",\n    name: \"base32\",\n    alphabet: \"abcdefghijklmnopqrstuvwxyz234567\",\n    bitsPerChar: 5\n  }),\n  hs = d({\n    prefix: \"B\",\n    name: \"base32upper\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\",\n    bitsPerChar: 5\n  }),\n  cs = d({\n    prefix: \"c\",\n    name: \"base32pad\",\n    alphabet: \"abcdefghijklmnopqrstuvwxyz234567=\",\n    bitsPerChar: 5\n  }),\n  ls = d({\n    prefix: \"C\",\n    name: \"base32padupper\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=\",\n    bitsPerChar: 5\n  }),\n  Ds = d({\n    prefix: \"v\",\n    name: \"base32hex\",\n    alphabet: \"0123456789abcdefghijklmnopqrstuv\",\n    bitsPerChar: 5\n  }),\n  ds = d({\n    prefix: \"V\",\n    name: \"base32hexupper\",\n    alphabet: \"0123456789ABCDEFGHIJKLMNOPQRSTUV\",\n    bitsPerChar: 5\n  }),\n  gs = d({\n    prefix: \"t\",\n    name: \"base32hexpad\",\n    alphabet: \"0123456789abcdefghijklmnopqrstuv=\",\n    bitsPerChar: 5\n  }),\n  ps = d({\n    prefix: \"T\",\n    name: \"base32hexpadupper\",\n    alphabet: \"0123456789ABCDEFGHIJKLMNOPQRSTUV=\",\n    bitsPerChar: 5\n  }),\n  bs = d({\n    prefix: \"h\",\n    name: \"base32z\",\n    alphabet: \"ybndrfg8ejkmcpqxot1uwisza345h769\",\n    bitsPerChar: 5\n  });\nvar ys = Object.freeze({\n  __proto__: null,\n  base32: us,\n  base32upper: hs,\n  base32pad: cs,\n  base32padupper: ls,\n  base32hex: Ds,\n  base32hexupper: ds,\n  base32hexpad: gs,\n  base32hexpadupper: ps,\n  base32z: bs\n});\nvar fs = x({\n    prefix: \"k\",\n    name: \"base36\",\n    alphabet: \"0123456789abcdefghijklmnopqrstuvwxyz\"\n  }),\n  ms = x({\n    prefix: \"K\",\n    name: \"base36upper\",\n    alphabet: \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  });\nvar Es = Object.freeze({\n  __proto__: null,\n  base36: fs,\n  base36upper: ms\n});\nvar vs = x({\n    name: \"base58btc\",\n    prefix: \"z\",\n    alphabet: \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\"\n  }),\n  ws = x({\n    name: \"base58flickr\",\n    prefix: \"Z\",\n    alphabet: \"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\"\n  });\nvar Cs = Object.freeze({\n  __proto__: null,\n  base58btc: vs,\n  base58flickr: ws\n});\nvar _s = d({\n    prefix: \"m\",\n    name: \"base64\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\n    bitsPerChar: 6\n  }),\n  Ss = d({\n    prefix: \"M\",\n    name: \"base64pad\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n    bitsPerChar: 6\n  }),\n  Is = d({\n    prefix: \"u\",\n    name: \"base64url\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",\n    bitsPerChar: 6\n  }),\n  As = d({\n    prefix: \"U\",\n    name: \"base64urlpad\",\n    alphabet: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\",\n    bitsPerChar: 6\n  });\nvar Os = Object.freeze({\n  __proto__: null,\n  base64: _s,\n  base64pad: Ss,\n  base64url: Is,\n  base64urlpad: As\n});\nvar ce = Array.from(\"\\uD83D\\uDE80\\uD83E\\uDE90\\u2604\\uD83D\\uDEF0\\uD83C\\uDF0C\\uD83C\\uDF11\\uD83C\\uDF12\\uD83C\\uDF13\\uD83C\\uDF14\\uD83C\\uDF15\\uD83C\\uDF16\\uD83C\\uDF17\\uD83C\\uDF18\\uD83C\\uDF0D\\uD83C\\uDF0F\\uD83C\\uDF0E\\uD83D\\uDC09\\u2600\\uD83D\\uDCBB\\uD83D\\uDDA5\\uD83D\\uDCBE\\uD83D\\uDCBF\\uD83D\\uDE02\\u2764\\uD83D\\uDE0D\\uD83E\\uDD23\\uD83D\\uDE0A\\uD83D\\uDE4F\\uD83D\\uDC95\\uD83D\\uDE2D\\uD83D\\uDE18\\uD83D\\uDC4D\\uD83D\\uDE05\\uD83D\\uDC4F\\uD83D\\uDE01\\uD83D\\uDD25\\uD83E\\uDD70\\uD83D\\uDC94\\uD83D\\uDC96\\uD83D\\uDC99\\uD83D\\uDE22\\uD83E\\uDD14\\uD83D\\uDE06\\uD83D\\uDE44\\uD83D\\uDCAA\\uD83D\\uDE09\\u263A\\uD83D\\uDC4C\\uD83E\\uDD17\\uD83D\\uDC9C\\uD83D\\uDE14\\uD83D\\uDE0E\\uD83D\\uDE07\\uD83C\\uDF39\\uD83E\\uDD26\\uD83C\\uDF89\\uD83D\\uDC9E\\u270C\\u2728\\uD83E\\uDD37\\uD83D\\uDE31\\uD83D\\uDE0C\\uD83C\\uDF38\\uD83D\\uDE4C\\uD83D\\uDE0B\\uD83D\\uDC97\\uD83D\\uDC9A\\uD83D\\uDE0F\\uD83D\\uDC9B\\uD83D\\uDE42\\uD83D\\uDC93\\uD83E\\uDD29\\uD83D\\uDE04\\uD83D\\uDE00\\uD83D\\uDDA4\\uD83D\\uDE03\\uD83D\\uDCAF\\uD83D\\uDE48\\uD83D\\uDC47\\uD83C\\uDFB6\\uD83D\\uDE12\\uD83E\\uDD2D\\u2763\\uD83D\\uDE1C\\uD83D\\uDC8B\\uD83D\\uDC40\\uD83D\\uDE2A\\uD83D\\uDE11\\uD83D\\uDCA5\\uD83D\\uDE4B\\uD83D\\uDE1E\\uD83D\\uDE29\\uD83D\\uDE21\\uD83E\\uDD2A\\uD83D\\uDC4A\\uD83E\\uDD73\\uD83D\\uDE25\\uD83E\\uDD24\\uD83D\\uDC49\\uD83D\\uDC83\\uD83D\\uDE33\\u270B\\uD83D\\uDE1A\\uD83D\\uDE1D\\uD83D\\uDE34\\uD83C\\uDF1F\\uD83D\\uDE2C\\uD83D\\uDE43\\uD83C\\uDF40\\uD83C\\uDF37\\uD83D\\uDE3B\\uD83D\\uDE13\\u2B50\\u2705\\uD83E\\uDD7A\\uD83C\\uDF08\\uD83D\\uDE08\\uD83E\\uDD18\\uD83D\\uDCA6\\u2714\\uD83D\\uDE23\\uD83C\\uDFC3\\uD83D\\uDC90\\u2639\\uD83C\\uDF8A\\uD83D\\uDC98\\uD83D\\uDE20\\u261D\\uD83D\\uDE15\\uD83C\\uDF3A\\uD83C\\uDF82\\uD83C\\uDF3B\\uD83D\\uDE10\\uD83D\\uDD95\\uD83D\\uDC9D\\uD83D\\uDE4A\\uD83D\\uDE39\\uD83D\\uDDE3\\uD83D\\uDCAB\\uD83D\\uDC80\\uD83D\\uDC51\\uD83C\\uDFB5\\uD83E\\uDD1E\\uD83D\\uDE1B\\uD83D\\uDD34\\uD83D\\uDE24\\uD83C\\uDF3C\\uD83D\\uDE2B\\u26BD\\uD83E\\uDD19\\u2615\\uD83C\\uDFC6\\uD83E\\uDD2B\\uD83D\\uDC48\\uD83D\\uDE2E\\uD83D\\uDE46\\uD83C\\uDF7B\\uD83C\\uDF43\\uD83D\\uDC36\\uD83D\\uDC81\\uD83D\\uDE32\\uD83C\\uDF3F\\uD83E\\uDDE1\\uD83C\\uDF81\\u26A1\\uD83C\\uDF1E\\uD83C\\uDF88\\u274C\\u270A\\uD83D\\uDC4B\\uD83D\\uDE30\\uD83E\\uDD28\\uD83D\\uDE36\\uD83E\\uDD1D\\uD83D\\uDEB6\\uD83D\\uDCB0\\uD83C\\uDF53\\uD83D\\uDCA2\\uD83E\\uDD1F\\uD83D\\uDE41\\uD83D\\uDEA8\\uD83D\\uDCA8\\uD83E\\uDD2C\\u2708\\uD83C\\uDF80\\uD83C\\uDF7A\\uD83E\\uDD13\\uD83D\\uDE19\\uD83D\\uDC9F\\uD83C\\uDF31\\uD83D\\uDE16\\uD83D\\uDC76\\uD83E\\uDD74\\u25B6\\u27A1\\u2753\\uD83D\\uDC8E\\uD83D\\uDCB8\\u2B07\\uD83D\\uDE28\\uD83C\\uDF1A\\uD83E\\uDD8B\\uD83D\\uDE37\\uD83D\\uDD7A\\u26A0\\uD83D\\uDE45\\uD83D\\uDE1F\\uD83D\\uDE35\\uD83D\\uDC4E\\uD83E\\uDD32\\uD83E\\uDD20\\uD83E\\uDD27\\uD83D\\uDCCC\\uD83D\\uDD35\\uD83D\\uDC85\\uD83E\\uDDD0\\uD83D\\uDC3E\\uD83C\\uDF52\\uD83D\\uDE17\\uD83E\\uDD11\\uD83C\\uDF0A\\uD83E\\uDD2F\\uD83D\\uDC37\\u260E\\uD83D\\uDCA7\\uD83D\\uDE2F\\uD83D\\uDC86\\uD83D\\uDC46\\uD83C\\uDFA4\\uD83D\\uDE47\\uD83C\\uDF51\\u2744\\uD83C\\uDF34\\uD83D\\uDCA3\\uD83D\\uDC38\\uD83D\\uDC8C\\uD83D\\uDCCD\\uD83E\\uDD40\\uD83E\\uDD22\\uD83D\\uDC45\\uD83D\\uDCA1\\uD83D\\uDCA9\\uD83D\\uDC50\\uD83D\\uDCF8\\uD83D\\uDC7B\\uD83E\\uDD10\\uD83E\\uDD2E\\uD83C\\uDFBC\\uD83E\\uDD75\\uD83D\\uDEA9\\uD83C\\uDF4E\\uD83C\\uDF4A\\uD83D\\uDC7C\\uD83D\\uDC8D\\uD83D\\uDCE3\\uD83E\\uDD42\"),\n  Rs = ce.reduce(function (s, e, t) {\n    return s[t] = e, s;\n  }, []),\n  Ts = ce.reduce(function (s, e, t) {\n    return s[e.codePointAt(0)] = t, s;\n  }, []);\nfunction zs(s) {\n  return s.reduce(function (e, t) {\n    return e += Rs[t], e;\n  }, \"\");\n}\nfunction Ps(s) {\n  var e = [];\n  var _iterator = _createForOfIteratorHelper(s),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var t = _step.value;\n      var i = Ts[t.codePointAt(0)];\n      if (i === void 0) throw new Error(\"Non-base256emoji character: \".concat(t));\n      e.push(i);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return new Uint8Array(e);\n}\nvar xs = K({\n  prefix: \"\\uD83D\\uDE80\",\n  name: \"base256emoji\",\n  encode: zs,\n  decode: Ps\n});\nvar Ls = Object.freeze({\n    __proto__: null,\n    base256emoji: xs\n  }),\n  Fs = De,\n  le = 128,\n  Us = 127,\n  Ns = ~Us,\n  Bs = Math.pow(2, 31);\nfunction De(s, e, t) {\n  e = e || [], t = t || 0;\n  for (var i = t; s >= Bs;) {\n    e[t++] = s & 255 | le, s /= 128;\n  }\n  for (; s & Ns;) {\n    e[t++] = s & 255 | le, s >>>= 7;\n  }\n  return e[t] = s | 0, De.bytes = t - i + 1, e;\n}\nvar Ms = J,\n  Ks = 128,\n  de = 127;\nfunction J(s, i) {\n  var t = 0,\n    i = i || 0,\n    r = 0,\n    n = i,\n    a,\n    o = s.length;\n  do {\n    if (n >= o) throw J.bytes = 0, new RangeError(\"Could not decode varint\");\n    a = s[n++], t += r < 28 ? (a & de) << r : (a & de) * Math.pow(2, r), r += 7;\n  } while (a >= Ks);\n  return J.bytes = n - i, t;\n}\nvar $s = Math.pow(2, 7),\n  ks = Math.pow(2, 14),\n  js = Math.pow(2, 21),\n  Ys = Math.pow(2, 28),\n  Vs = Math.pow(2, 35),\n  Gs = Math.pow(2, 42),\n  qs = Math.pow(2, 49),\n  Js = Math.pow(2, 56),\n  Ws = Math.pow(2, 63),\n  Xs = function Xs(s) {\n    return s < $s ? 1 : s < ks ? 2 : s < js ? 3 : s < Ys ? 4 : s < Vs ? 5 : s < Gs ? 6 : s < qs ? 7 : s < Js ? 8 : s < Ws ? 9 : 10;\n  },\n  Hs = {\n    encode: Fs,\n    decode: Ms,\n    encodingLength: Xs\n  },\n  ge = Hs;\nvar pe = function pe(s, e) {\n    var t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    return ge.encode(s, e, t), e;\n  },\n  be = function be(s) {\n    return ge.encodingLength(s);\n  },\n  W = function W(s, e) {\n    var t = e.byteLength,\n      i = be(s),\n      r = i + be(t),\n      n = new Uint8Array(r + t);\n    return pe(s, n, 0), pe(t, n, i), n.set(e, r), new Zs(s, t, e, n);\n  };\nvar Zs = /*#__PURE__*/_createClass(function Zs(e, t, i, r) {\n  _classCallCheck(this, Zs);\n  this.code = e, this.size = t, this.digest = i, this.bytes = r;\n});\nvar ye = function ye(_ref6) {\n  var s = _ref6.name,\n    e = _ref6.code,\n    t = _ref6.encode;\n  return new Qs(s, e, t);\n};\nvar Qs = /*#__PURE__*/function () {\n  function Qs(e, t, i) {\n    _classCallCheck(this, Qs);\n    this.name = e, this.code = t, this.encode = i;\n  }\n  _createClass(Qs, [{\n    key: \"digest\",\n    value: function digest(e) {\n      var _this = this;\n      if (e instanceof Uint8Array) {\n        var t = this.encode(e);\n        return t instanceof Uint8Array ? W(this.code, t) : t.then(function (i) {\n          return W(_this.code, i);\n        });\n      } else throw Error(\"Unknown type, must be binary type\");\n    }\n  }]);\n  return Qs;\n}();\nvar fe = function fe(s) {\n    return /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = Uint8Array;\n                _context.next = 3;\n                return crypto.subtle.digest(s, e);\n              case 3:\n                _context.t1 = _context.sent;\n                return _context.abrupt(\"return\", new _context.t0(_context.t1));\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n  },\n  ei = ye({\n    name: \"sha2-256\",\n    code: 18,\n    encode: fe(\"SHA-256\")\n  }),\n  ti = ye({\n    name: \"sha2-512\",\n    code: 19,\n    encode: fe(\"SHA-512\")\n  });\nvar si = Object.freeze({\n  __proto__: null,\n  sha256: ei,\n  sha512: ti\n});\nvar me = 0,\n  ii = \"identity\",\n  Ee = ue,\n  ri = function ri(s) {\n    return W(me, Ee(s));\n  },\n  ni = {\n    code: me,\n    name: ii,\n    encode: Ee,\n    digest: ri\n  };\nvar ai = Object.freeze({\n  __proto__: null,\n  identity: ni\n});\nnew TextEncoder(), new TextDecoder();\nvar ve = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, Zt), es), ss), rs), os), ys), Es), Cs), Os), Ls);\n_objectSpread(_objectSpread({}, si), ai);\nfunction oi() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return globalThis.Buffer != null && globalThis.Buffer.allocUnsafe != null ? globalThis.Buffer.allocUnsafe(s) : new Uint8Array(s);\n}\nfunction we(s, e, t, i) {\n  return {\n    name: s,\n    prefix: e,\n    encoder: {\n      name: s,\n      prefix: e,\n      encode: t\n    },\n    decoder: {\n      decode: i\n    }\n  };\n}\nvar Ce = we(\"utf8\", \"u\", function (s) {\n    var e = new TextDecoder(\"utf8\");\n    return \"u\" + e.decode(s);\n  }, function (s) {\n    return new TextEncoder().encode(s.substring(1));\n  }),\n  X = we(\"ascii\", \"a\", function (s) {\n    var e = \"a\";\n    for (var t = 0; t < s.length; t++) {\n      e += String.fromCharCode(s[t]);\n    }\n    return e;\n  }, function (s) {\n    s = s.substring(1);\n    var e = oi(s.length);\n    for (var t = 0; t < s.length; t++) {\n      e[t] = s.charCodeAt(t);\n    }\n    return e;\n  }),\n  ui = _objectSpread({\n    utf8: Ce,\n    \"utf-8\": Ce,\n    hex: ve.base16,\n    latin1: X,\n    ascii: X,\n    binary: X\n  }, ve);\nfunction hi(s) {\n  var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"utf8\";\n  var t = ui[e];\n  if (!t) throw new Error(\"Unsupported encoding \\\"\".concat(e, \"\\\"\"));\n  return (e === \"utf8\" || e === \"utf-8\") && globalThis.Buffer != null && globalThis.Buffer.from != null ? globalThis.Buffer.from(s, \"utf8\") : t.decoder.decode(\"\".concat(t.prefix).concat(s));\n}\nvar H = \"wc\",\n  _e = 2,\n  $ = \"core\",\n  z = \"\".concat(H, \"@\", 2, \":\").concat($, \":\"),\n  Se = {\n    name: $,\n    logger: \"error\"\n  },\n  Ie = {\n    database: \":memory:\"\n  },\n  Ae = \"crypto\",\n  Z = \"client_ed25519_seed\",\n  Oe = At,\n  Re = \"keychain\",\n  Te = \"0.3\",\n  ze = \"messages\",\n  Pe = \"0.3\",\n  xe = Ot,\n  Le = \"publisher\",\n  ci = \"irn\",\n  Fe = \"error\",\n  Ue = \"wss://relay.walletconnect.com\",\n  Ne = \"relayer\",\n  L = {\n    message: \"relayer_message\",\n    connect: \"relayer_connect\",\n    disconnect: \"relayer_disconnect\",\n    error: \"relayer_error\"\n  },\n  Be = \"_subscription\",\n  T = {\n    payload: \"payload\",\n    connect: \"connect\",\n    disconnect: \"disconnect\",\n    error: \"error\"\n  },\n  Me = Rt,\n  li = {\n    database: \":memory:\"\n  },\n  Ke = \"2.0.0-rc.1\",\n  $e = \"0.3\",\n  O = {\n    created: \"subscription_created\",\n    deleted: \"subscription_deleted\",\n    expired: \"subscription_expired\",\n    disabled: \"subscription_disabled\",\n    sync: \"subscription_sync\"\n  },\n  Di = Tt,\n  ke = \"subscription\",\n  je = \"0.3\",\n  Ye = zt * 1e3;\nvar Ve = /*#__PURE__*/function () {\n  function Ve(e, t) {\n    var _this2 = this;\n    _classCallCheck(this, Ve);\n    this.core = e, this.logger = t, this.keychain = new Map(), this.name = Re, this.version = Te, this.initialized = !1, this.storagePrefix = z, this.init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var i;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (_this2.initialized) {\n                _context2.next = 5;\n                break;\n              }\n              _context2.next = 3;\n              return _this2.getKeyChain();\n            case 3:\n              i = _context2.sent;\n              typeof i < \"u\" && (_this2.keychain = i), _this2.initialized = !0;\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })), this.has = function (i) {\n      return _this2.isInitialized(), _this2.keychain.has(i);\n    }, this.set = /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(i, r) {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this2.isInitialized();\n                _this2.keychain.set(i, r);\n                _context3.next = 4;\n                return _this2.persist();\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      return function (_x2, _x3) {\n        return _ref9.apply(this, arguments);\n      };\n    }(), this.get = function (i) {\n      _this2.isInitialized();\n      var r = _this2.keychain.get(i);\n      if (typeof r > \"u\") {\n        var _m = m(\"NO_MATCHING_KEY\", \"\".concat(_this2.name, \": \").concat(i)),\n          n = _m.message;\n        throw new Error(n);\n      }\n      return r;\n    }, this.del = /*#__PURE__*/function () {\n      var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(i) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this2.isInitialized();\n                _this2.keychain.delete(i);\n                _context4.next = 4;\n                return _this2.persist();\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      return function (_x4) {\n        return _ref10.apply(this, arguments);\n      };\n    }(), this.core = e, this.logger = I(t, this.name);\n  }\n  _createClass(Ve, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"storageKey\",\n    get: function get() {\n      return this.storagePrefix + this.version + \"//\" + this.name;\n    }\n  }, {\n    key: \"setKeyChain\",\n    value: function () {\n      var _setKeyChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e) {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.core.storage.setItem(this.storageKey, ie(e));\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n      function setKeyChain(_x5) {\n        return _setKeyChain.apply(this, arguments);\n      }\n      return setKeyChain;\n    }()\n  }, {\n    key: \"getKeyChain\",\n    value: function () {\n      var _getKeyChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var e;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.core.storage.getItem(this.storageKey);\n              case 2:\n                e = _context6.sent;\n                return _context6.abrupt(\"return\", typeof e < \"u\" ? re(e) : void 0);\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n      function getKeyChain() {\n        return _getKeyChain.apply(this, arguments);\n      }\n      return getKeyChain;\n    }()\n  }, {\n    key: \"persist\",\n    value: function () {\n      var _persist = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.setKeyChain(this.keychain);\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function persist() {\n        return _persist.apply(this, arguments);\n      }\n      return persist;\n    }()\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m2 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m2.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return Ve;\n}();\nvar Ge = /*#__PURE__*/function () {\n  function Ge(e, t, i) {\n    var _this3 = this;\n    _classCallCheck(this, Ge);\n    this.core = e, this.logger = t, this.name = Ae, this.initialized = !1, this.init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.t0 = _this3.initialized;\n              if (_context8.t0) {\n                _context8.next = 5;\n                break;\n              }\n              _context8.next = 4;\n              return _this3.keychain.init();\n            case 4:\n              _this3.initialized = !0;\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    })), this.hasKeys = function (r) {\n      return _this3.isInitialized(), _this3.keychain.has(r);\n    }, this.getClientId = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n      var r, n;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _this3.isInitialized();\n              _context9.next = 3;\n              return _this3.getClientSeed();\n            case 3:\n              r = _context9.sent;\n              n = N.generateKeyPair(r);\n              return _context9.abrupt(\"return\", N.encodeIss(n.publicKey));\n            case 6:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    })), this.generateKeyPair = function () {\n      _this3.isInitialized();\n      var r = bt();\n      return _this3.setPrivateKey(r.publicKey, r.privateKey);\n    }, this.signJWT = /*#__PURE__*/function () {\n      var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(r) {\n        var n, a, o, u;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _this3.isInitialized();\n                _context10.next = 3;\n                return _this3.getClientSeed();\n              case 3:\n                n = _context10.sent;\n                a = N.generateKeyPair(n);\n                o = ne();\n                u = Oe;\n                _context10.next = 9;\n                return N.signJWT(o, r, u, a);\n              case 9:\n                return _context10.abrupt(\"return\", _context10.sent);\n              case 10:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }));\n      return function (_x6) {\n        return _ref13.apply(this, arguments);\n      };\n    }(), this.generateSharedKey = function (r, n, a) {\n      _this3.isInitialized();\n      var o = _this3.getPrivateKey(r),\n        u = yt(o, n);\n      return _this3.setSymKey(u, a);\n    }, this.setSymKey = /*#__PURE__*/function () {\n      var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(r, n) {\n        var a;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _this3.isInitialized();\n                a = n || ft(r);\n                _context11.next = 4;\n                return _this3.keychain.set(a, r);\n              case 4:\n                return _context11.abrupt(\"return\", a);\n              case 5:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }));\n      return function (_x7, _x8) {\n        return _ref14.apply(this, arguments);\n      };\n    }(), this.deleteKeyPair = /*#__PURE__*/function () {\n      var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(r) {\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _this3.isInitialized();\n                _context12.next = 3;\n                return _this3.keychain.del(r);\n              case 3:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12);\n      }));\n      return function (_x9) {\n        return _ref15.apply(this, arguments);\n      };\n    }(), this.deleteSymKey = /*#__PURE__*/function () {\n      var _ref16 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(r) {\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _this3.isInitialized();\n                _context13.next = 3;\n                return _this3.keychain.del(r);\n              case 3:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13);\n      }));\n      return function (_x10) {\n        return _ref16.apply(this, arguments);\n      };\n    }(), this.encode = /*#__PURE__*/function () {\n      var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(r, n, a) {\n        var o, u, F, Y, p, c, l;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _this3.isInitialized();\n                o = mt(a), u = gt(n);\n                if (!ae(o)) {\n                  _context14.next = 7;\n                  break;\n                }\n                F = o.senderPublicKey, Y = o.receiverPublicKey;\n                _context14.next = 6;\n                return _this3.generateSharedKey(F, Y);\n              case 6:\n                r = _context14.sent;\n              case 7:\n                p = _this3.getSymKey(r), c = o.type, l = o.senderPublicKey;\n                return _context14.abrupt(\"return\", Et({\n                  type: c,\n                  symKey: p,\n                  message: u,\n                  senderPublicKey: l\n                }));\n              case 9:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14);\n      }));\n      return function (_x11, _x12, _x13) {\n        return _ref17.apply(this, arguments);\n      };\n    }(), this.decode = /*#__PURE__*/function () {\n      var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(r, n, a) {\n        var o, c, l, u, p;\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _this3.isInitialized();\n                o = vt(n, a);\n                if (!ae(o)) {\n                  _context15.next = 7;\n                  break;\n                }\n                c = o.receiverPublicKey, l = o.senderPublicKey;\n                _context15.next = 6;\n                return _this3.generateSharedKey(c, l);\n              case 6:\n                r = _context15.sent;\n              case 7:\n                u = _this3.getSymKey(r), p = wt({\n                  symKey: u,\n                  encoded: n\n                });\n                return _context15.abrupt(\"return\", pt(p));\n              case 9:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15);\n      }));\n      return function (_x14, _x15, _x16) {\n        return _ref18.apply(this, arguments);\n      };\n    }(), this.core = e, this.logger = I(t, this.name), this.keychain = i || new Ve(this.core, this.logger);\n  }\n  _createClass(Ge, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"setPrivateKey\",\n    value: function () {\n      var _setPrivateKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(e, t) {\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.keychain.set(e, t);\n              case 2:\n                return _context16.abrupt(\"return\", e);\n              case 3:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n      function setPrivateKey(_x17, _x18) {\n        return _setPrivateKey.apply(this, arguments);\n      }\n      return setPrivateKey;\n    }()\n  }, {\n    key: \"getPrivateKey\",\n    value: function getPrivateKey(e) {\n      return this.keychain.get(e);\n    }\n  }, {\n    key: \"getClientSeed\",\n    value: function () {\n      var _getClientSeed = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n        var e;\n        return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                e = \"\";\n                _context17.prev = 1;\n                e = this.keychain.get(Z);\n                _context17.next = 10;\n                break;\n              case 5:\n                _context17.prev = 5;\n                _context17.t0 = _context17[\"catch\"](1);\n                e = ne();\n                _context17.next = 10;\n                return this.keychain.set(Z, e);\n              case 10:\n                return _context17.abrupt(\"return\", hi(e, \"base16\"));\n              case 11:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this, [[1, 5]]);\n      }));\n      function getClientSeed() {\n        return _getClientSeed.apply(this, arguments);\n      }\n      return getClientSeed;\n    }()\n  }, {\n    key: \"getSymKey\",\n    value: function getSymKey(e) {\n      return this.keychain.get(e);\n    }\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m3 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m3.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return Ge;\n}();\nvar qe = /*#__PURE__*/function (_ut) {\n  _inherits(qe, _ut);\n  var _super = _createSuper(qe);\n  function qe(e, t) {\n    var _this4;\n    _classCallCheck(this, qe);\n    _this4 = _super.call(this, e, t), _this4.logger = e, _this4.core = t, _this4.messages = new Map(), _this4.name = ze, _this4.version = Pe, _this4.initialized = !1, _this4.storagePrefix = z, _this4.init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n      var i;\n      return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              if (_this4.initialized) {\n                _context18.next = 15;\n                break;\n              }\n              _this4.logger.trace(\"Initialized\");\n              _context18.prev = 2;\n              _context18.next = 5;\n              return _this4.getRelayerMessages();\n            case 5:\n              i = _context18.sent;\n              typeof i < \"u\" && (_this4.messages = i), _this4.logger.debug(\"Successfully Restored records for \".concat(_this4.name)), _this4.logger.trace({\n                type: \"method\",\n                method: \"restore\",\n                size: _this4.messages.size\n              });\n              _context18.next = 12;\n              break;\n            case 9:\n              _context18.prev = 9;\n              _context18.t0 = _context18[\"catch\"](2);\n              _this4.logger.debug(\"Failed to Restore records for \".concat(_this4.name)), _this4.logger.error(_context18.t0);\n            case 12:\n              _context18.prev = 12;\n              _this4.initialized = !0;\n              return _context18.finish(12);\n            case 15:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, _callee18, null, [[2, 9, 12, 15]]);\n    })), _this4.set = /*#__PURE__*/function () {\n      var _ref20 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19(i, r) {\n        var n, a;\n        return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _this4.isInitialized();\n                n = B(r);\n                a = _this4.messages.get(i);\n                typeof a > \"u\" && (a = {});\n                _context19.t0 = typeof a[n] < \"u\";\n                if (_context19.t0) {\n                  _context19.next = 10;\n                  break;\n                }\n                a[n] = r;\n                _this4.messages.set(i, a);\n                _context19.next = 10;\n                return _this4.persist();\n              case 10:\n                return _context19.abrupt(\"return\", n);\n              case 11:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19);\n      }));\n      return function (_x19, _x20) {\n        return _ref20.apply(this, arguments);\n      };\n    }(), _this4.get = function (i) {\n      _this4.isInitialized();\n      var r = _this4.messages.get(i);\n      return typeof r > \"u\" && (r = {}), r;\n    }, _this4.has = function (i, r) {\n      _this4.isInitialized();\n      var n = _this4.get(i),\n        a = B(r);\n      return typeof n[a] < \"u\";\n    }, _this4.del = /*#__PURE__*/function () {\n      var _ref21 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(i) {\n        return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _this4.isInitialized();\n                _this4.messages.delete(i);\n                _context20.next = 4;\n                return _this4.persist();\n              case 4:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20);\n      }));\n      return function (_x21) {\n        return _ref21.apply(this, arguments);\n      };\n    }(), _this4.logger = I(e, _this4.name), _this4.core = t;\n    return _this4;\n  }\n  _createClass(qe, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"storageKey\",\n    get: function get() {\n      return this.storagePrefix + this.version + \"//\" + this.name;\n    }\n  }, {\n    key: \"setRelayerMessages\",\n    value: function () {\n      var _setRelayerMessages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee21(e) {\n        return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _context21.next = 2;\n                return this.core.storage.setItem(this.storageKey, ie(e));\n              case 2:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n      function setRelayerMessages(_x22) {\n        return _setRelayerMessages.apply(this, arguments);\n      }\n      return setRelayerMessages;\n    }()\n  }, {\n    key: \"getRelayerMessages\",\n    value: function () {\n      var _getRelayerMessages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n        var e;\n        return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                _context22.next = 2;\n                return this.core.storage.getItem(this.storageKey);\n              case 2:\n                e = _context22.sent;\n                return _context22.abrupt(\"return\", typeof e < \"u\" ? re(e) : void 0);\n              case 4:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n      function getRelayerMessages() {\n        return _getRelayerMessages.apply(this, arguments);\n      }\n      return getRelayerMessages;\n    }()\n  }, {\n    key: \"persist\",\n    value: function () {\n      var _persist2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee23() {\n        return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _context23.next = 2;\n                return this.setRelayerMessages(this.messages);\n              case 2:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n      function persist() {\n        return _persist2.apply(this, arguments);\n      }\n      return persist;\n    }()\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m4 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m4.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return qe;\n}(ut);\nvar di = /*#__PURE__*/function (_ht) {\n  _inherits(di, _ht);\n  var _super2 = _createSuper(di);\n  function di(e, t) {\n    var _this5;\n    _classCallCheck(this, di);\n    _this5 = _super2.call(this, e, t), _this5.relayer = e, _this5.logger = t, _this5.events = new M.EventEmitter(), _this5.name = Le, _this5.queue = new Map(), _this5.publish = /*#__PURE__*/function () {\n      var _ref22 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee24(i, r, n) {\n        var a, o, u, p, c, l;\n        return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                _this5.logger.debug(\"Publishing Payload\"), _this5.logger.trace({\n                  type: \"method\",\n                  method: \"publish\",\n                  params: {\n                    topic: i,\n                    message: r,\n                    opts: n\n                  }\n                });\n                _context24.prev = 1;\n                a = (n === null || n === void 0 ? void 0 : n.ttl) || xe, o = V(n), u = (n === null || n === void 0 ? void 0 : n.prompt) || !1, p = (n === null || n === void 0 ? void 0 : n.tag) || 0, c = {\n                  topic: i,\n                  message: r,\n                  opts: {\n                    ttl: a,\n                    relay: o,\n                    prompt: u,\n                    tag: p\n                  }\n                }, l = B(r);\n                _this5.queue.set(l, c);\n                _context24.next = 6;\n                return _this5.rpcPublish(i, r, a, o, u, p);\n              case 6:\n                _this5.onPublish(l, c);\n                _this5.logger.debug(\"Successfully Published Payload\");\n                _this5.logger.trace({\n                  type: \"method\",\n                  method: \"publish\",\n                  params: {\n                    topic: i,\n                    message: r,\n                    opts: n\n                  }\n                });\n                _context24.next = 14;\n                break;\n              case 11:\n                _context24.prev = 11;\n                _context24.t0 = _context24[\"catch\"](1);\n                throw _this5.logger.debug(\"Failed to Publish Payload\"), _this5.logger.error(_context24.t0), _context24.t0;\n              case 14:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee24, null, [[1, 11]]);\n      }));\n      return function (_x23, _x24, _x25) {\n        return _ref22.apply(this, arguments);\n      };\n    }(), _this5.on = function (i, r) {\n      _this5.events.on(i, r);\n    }, _this5.once = function (i, r) {\n      _this5.events.once(i, r);\n    }, _this5.off = function (i, r) {\n      _this5.events.off(i, r);\n    }, _this5.removeListener = function (i, r) {\n      _this5.events.removeListener(i, r);\n    }, _this5.relayer = e, _this5.logger = I(t, _this5.name), _this5.registerEventListeners();\n    return _this5;\n  }\n  _createClass(di, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"rpcPublish\",\n    value: function rpcPublish(e, t, i, r, n, a) {\n      var o, u, p, c;\n      var l = {\n        method: G(r.protocol).publish,\n        params: {\n          topic: e,\n          message: t,\n          ttl: i,\n          prompt: n,\n          tag: a\n        }\n      };\n      return q((o = l.params) == null ? void 0 : o.prompt) && ((u = l.params) == null || delete u.prompt), q((p = l.params) == null ? void 0 : p.tag) && ((c = l.params) == null || delete c.tag), this.logger.debug(\"Outgoing Relay Payload\"), this.logger.trace({\n        type: \"message\",\n        direction: \"outgoing\",\n        request: l\n      }), this.relayer.provider.request(l);\n    }\n  }, {\n    key: \"onPublish\",\n    value: function onPublish(e, t) {\n      this.queue.delete(e);\n    }\n  }, {\n    key: \"checkQueue\",\n    value: function checkQueue() {\n      var _this6 = this;\n      this.queue.forEach( /*#__PURE__*/function () {\n        var _ref23 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee25(e) {\n          var t, i, _e$opts, r, n, a, o, u;\n          return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n            while (1) {\n              switch (_context25.prev = _context25.next) {\n                case 0:\n                  t = e.topic, i = e.message, _e$opts = e.opts, r = _e$opts.ttl, n = _e$opts.relay, a = _e$opts.prompt, o = _e$opts.tag, u = B(i);\n                  _context25.next = 3;\n                  return _this6.rpcPublish(t, i, r, n, a, o);\n                case 3:\n                  _this6.onPublish(u, e);\n                case 4:\n                case \"end\":\n                  return _context25.stop();\n              }\n            }\n          }, _callee25);\n        }));\n        return function (_x26) {\n          return _ref23.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"registerEventListeners\",\n    value: function registerEventListeners() {\n      var _this7 = this;\n      this.relayer.core.heartbeat.on(te.pulse, function () {\n        _this7.checkQueue();\n      });\n    }\n  }]);\n  return di;\n}(ht);\nvar gi = /*#__PURE__*/function () {\n  function gi() {\n    var _this8 = this;\n    _classCallCheck(this, gi);\n    this.map = new Map(), this.set = function (e, t) {\n      var i = _this8.get(e);\n      _this8.exists(e, t) || _this8.map.set(e, [].concat(_toConsumableArray(i), [t]));\n    }, this.get = function (e) {\n      return _this8.map.get(e) || [];\n    }, this.exists = function (e, t) {\n      return _this8.get(e).includes(t);\n    }, this.delete = function (e, t) {\n      if (typeof t > \"u\") {\n        _this8.map.delete(e);\n        return;\n      }\n      if (!_this8.map.has(e)) return;\n      var i = _this8.get(e);\n      if (!_this8.exists(e, t)) return;\n      var r = i.filter(function (n) {\n        return n !== t;\n      });\n      if (!r.length) {\n        _this8.map.delete(e);\n        return;\n      }\n      _this8.map.set(e, r);\n    }, this.clear = function () {\n      _this8.map.clear();\n    };\n  }\n  _createClass(gi, [{\n    key: \"topics\",\n    get: function get() {\n      return Array.from(this.map.keys());\n    }\n  }]);\n  return gi;\n}();\nvar pi = Object.defineProperty,\n  bi = Object.defineProperties,\n  yi = Object.getOwnPropertyDescriptors,\n  Je = Object.getOwnPropertySymbols,\n  fi = Object.prototype.hasOwnProperty,\n  mi = Object.prototype.propertyIsEnumerable,\n  We = function We(s, e, t) {\n    return e in s ? pi(s, e, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : s[e] = t;\n  },\n  k = function k(s, e) {\n    for (var t in e || (e = {})) {\n      fi.call(e, t) && We(s, t, e[t]);\n    }\n    if (Je) {\n      var _iterator2 = _createForOfIteratorHelper(Je(e)),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var t = _step2.value;\n          mi.call(e, t) && We(s, t, e[t]);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    return s;\n  },\n  Q = function Q(s, e) {\n    return bi(s, yi(e));\n  };\nvar Xe = /*#__PURE__*/function (_ct) {\n  _inherits(Xe, _ct);\n  var _super3 = _createSuper(Xe);\n  function Xe(e, t) {\n    var _this9;\n    _classCallCheck(this, Xe);\n    _this9 = _super3.call(this, e, t), _this9.relayer = e, _this9.logger = t, _this9.subscriptions = new Map(), _this9.topicMap = new gi(), _this9.events = new M.EventEmitter(), _this9.name = ke, _this9.version = je, _this9.pending = new Map(), _this9.cached = [], _this9.initialized = !1, _this9.pendingSubscriptionWatchLabel = \"pending_sub_watch_label\", _this9.pendingSubInterval = 20, _this9.storagePrefix = z, _this9.init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {\n      return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n        while (1) {\n          switch (_context26.prev = _context26.next) {\n            case 0:\n              _context26.t0 = _this9.initialized;\n              if (_context26.t0) {\n                _context26.next = 9;\n                break;\n              }\n              _this9.logger.trace(\"Initialized\");\n              _context26.next = 5;\n              return _this9.restore();\n            case 5:\n              _context26.next = 7;\n              return _this9.reset();\n            case 7:\n              _this9.registerEventListeners();\n              _this9.onEnable();\n            case 9:\n            case \"end\":\n              return _context26.stop();\n          }\n        }\n      }, _callee26);\n    })), _this9.subscribe = /*#__PURE__*/function () {\n      var _ref25 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee27(i, r) {\n        var n, a, o;\n        return _regeneratorRuntime().wrap(function _callee27$(_context27) {\n          while (1) {\n            switch (_context27.prev = _context27.next) {\n              case 0:\n                _this9.isInitialized(), _this9.logger.debug(\"Subscribing Topic\"), _this9.logger.trace({\n                  type: \"method\",\n                  method: \"subscribe\",\n                  params: {\n                    topic: i,\n                    opts: r\n                  }\n                });\n                _context27.prev = 1;\n                n = V(r), a = {\n                  topic: i,\n                  relay: n\n                };\n                _this9.pending.set(i, a);\n                _context27.next = 6;\n                return _this9.rpcSubscribe(i, n);\n              case 6:\n                o = _context27.sent;\n                return _context27.abrupt(\"return\", (_this9.onSubscribe(o, a), _this9.logger.debug(\"Successfully Subscribed Topic\"), _this9.logger.trace({\n                  type: \"method\",\n                  method: \"subscribe\",\n                  params: {\n                    topic: i,\n                    opts: r\n                  }\n                }), o));\n              case 10:\n                _context27.prev = 10;\n                _context27.t0 = _context27[\"catch\"](1);\n                throw _this9.logger.debug(\"Failed to Subscribe Topic\"), _this9.logger.error(_context27.t0), _context27.t0;\n              case 13:\n              case \"end\":\n                return _context27.stop();\n            }\n          }\n        }, _callee27, null, [[1, 10]]);\n      }));\n      return function (_x27, _x28) {\n        return _ref25.apply(this, arguments);\n      };\n    }(), _this9.unsubscribe = /*#__PURE__*/function () {\n      var _ref26 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee28(i, r) {\n        return _regeneratorRuntime().wrap(function _callee28$(_context28) {\n          while (1) {\n            switch (_context28.prev = _context28.next) {\n              case 0:\n                _this9.isInitialized();\n                if (!(typeof (r === null || r === void 0 ? void 0 : r.id) < \"u\")) {\n                  _context28.next = 6;\n                  break;\n                }\n                _context28.next = 4;\n                return _this9.unsubscribeById(i, r.id, r);\n              case 4:\n                _context28.next = 8;\n                break;\n              case 6:\n                _context28.next = 8;\n                return _this9.unsubscribeByTopic(i, r);\n              case 8:\n              case \"end\":\n                return _context28.stop();\n            }\n          }\n        }, _callee28);\n      }));\n      return function (_x29, _x30) {\n        return _ref26.apply(this, arguments);\n      };\n    }(), _this9.isSubscribed = /*#__PURE__*/function () {\n      var _ref27 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee29(i) {\n        return _regeneratorRuntime().wrap(function _callee29$(_context29) {\n          while (1) {\n            switch (_context29.prev = _context29.next) {\n              case 0:\n                if (!_this9.topics.includes(i)) {\n                  _context29.next = 4;\n                  break;\n                }\n                _context29.t0 = !0;\n                _context29.next = 7;\n                break;\n              case 4:\n                _context29.next = 6;\n                return new Promise(function (r, n) {\n                  var a = new Pt();\n                  a.start(_this9.pendingSubscriptionWatchLabel);\n                  var o = setInterval(function () {\n                    !_this9.pending.has(i) && _this9.topics.includes(i) && (clearInterval(o), a.stop(_this9.pendingSubscriptionWatchLabel), r(!0)), a.elapsed(_this9.pendingSubscriptionWatchLabel) >= Ye && (clearInterval(o), a.stop(_this9.pendingSubscriptionWatchLabel), n(!1));\n                  }, _this9.pendingSubInterval);\n                });\n              case 6:\n                _context29.t0 = _context29.sent;\n              case 7:\n                return _context29.abrupt(\"return\", _context29.t0);\n              case 8:\n              case \"end\":\n                return _context29.stop();\n            }\n          }\n        }, _callee29);\n      }));\n      return function (_x31) {\n        return _ref27.apply(this, arguments);\n      };\n    }(), _this9.on = function (i, r) {\n      _this9.events.on(i, r);\n    }, _this9.once = function (i, r) {\n      _this9.events.once(i, r);\n    }, _this9.off = function (i, r) {\n      _this9.events.off(i, r);\n    }, _this9.removeListener = function (i, r) {\n      _this9.events.removeListener(i, r);\n    }, _this9.relayer = e, _this9.logger = I(t, _this9.name);\n    return _this9;\n  }\n  _createClass(Xe, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"storageKey\",\n    get: function get() {\n      return this.storagePrefix + this.version + \"//\" + this.name;\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.subscriptions.size;\n    }\n  }, {\n    key: \"ids\",\n    get: function get() {\n      return Array.from(this.subscriptions.keys());\n    }\n  }, {\n    key: \"values\",\n    get: function get() {\n      return Array.from(this.subscriptions.values());\n    }\n  }, {\n    key: \"topics\",\n    get: function get() {\n      return this.topicMap.topics;\n    }\n  }, {\n    key: \"hasSubscription\",\n    value: function hasSubscription(e, t) {\n      var i = !1;\n      try {\n        i = this.getSubscription(e).topic === t;\n      } catch (_unused2) {}\n      return i;\n    }\n  }, {\n    key: \"onEnable\",\n    value: function onEnable() {\n      this.cached = [], this.initialized = !0;\n    }\n  }, {\n    key: \"onDisable\",\n    value: function onDisable() {\n      this.cached = this.values, this.subscriptions.clear(), this.topicMap.clear(), this.initialized = !1;\n    }\n  }, {\n    key: \"unsubscribeByTopic\",\n    value: function () {\n      var _unsubscribeByTopic = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee31(e, t) {\n        var _this10 = this;\n        var i;\n        return _regeneratorRuntime().wrap(function _callee31$(_context31) {\n          while (1) {\n            switch (_context31.prev = _context31.next) {\n              case 0:\n                i = this.topicMap.get(e);\n                _context31.next = 3;\n                return Promise.all(i.map( /*#__PURE__*/function () {\n                  var _ref28 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee30(r) {\n                    return _regeneratorRuntime().wrap(function _callee30$(_context30) {\n                      while (1) {\n                        switch (_context30.prev = _context30.next) {\n                          case 0:\n                            _context30.next = 2;\n                            return _this10.unsubscribeById(e, r, t);\n                          case 2:\n                            return _context30.abrupt(\"return\", _context30.sent);\n                          case 3:\n                          case \"end\":\n                            return _context30.stop();\n                        }\n                      }\n                    }, _callee30);\n                  }));\n                  return function (_x34) {\n                    return _ref28.apply(this, arguments);\n                  };\n                }()));\n              case 3:\n              case \"end\":\n                return _context31.stop();\n            }\n          }\n        }, _callee31, this);\n      }));\n      function unsubscribeByTopic(_x32, _x33) {\n        return _unsubscribeByTopic.apply(this, arguments);\n      }\n      return unsubscribeByTopic;\n    }()\n  }, {\n    key: \"unsubscribeById\",\n    value: function () {\n      var _unsubscribeById = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee32(e, t, i) {\n        var r, n;\n        return _regeneratorRuntime().wrap(function _callee32$(_context32) {\n          while (1) {\n            switch (_context32.prev = _context32.next) {\n              case 0:\n                this.logger.debug(\"Unsubscribing Topic\"), this.logger.trace({\n                  type: \"method\",\n                  method: \"unsubscribe\",\n                  params: {\n                    topic: e,\n                    id: t,\n                    opts: i\n                  }\n                });\n                _context32.prev = 1;\n                r = V(i);\n                _context32.next = 5;\n                return this.rpcUnsubscribe(e, t, r);\n              case 5:\n                n = Ct(\"USER_DISCONNECTED\", \"\".concat(this.name, \", \").concat(e));\n                _context32.next = 8;\n                return this.onUnsubscribe(e, t, n);\n              case 8:\n                this.logger.debug(\"Successfully Unsubscribed Topic\");\n                this.logger.trace({\n                  type: \"method\",\n                  method: \"unsubscribe\",\n                  params: {\n                    topic: e,\n                    id: t,\n                    opts: i\n                  }\n                });\n                _context32.next = 15;\n                break;\n              case 12:\n                _context32.prev = 12;\n                _context32.t0 = _context32[\"catch\"](1);\n                throw this.logger.debug(\"Failed to Unsubscribe Topic\"), this.logger.error(_context32.t0), _context32.t0;\n              case 15:\n              case \"end\":\n                return _context32.stop();\n            }\n          }\n        }, _callee32, this, [[1, 12]]);\n      }));\n      function unsubscribeById(_x35, _x36, _x37) {\n        return _unsubscribeById.apply(this, arguments);\n      }\n      return unsubscribeById;\n    }()\n  }, {\n    key: \"rpcSubscribe\",\n    value: function () {\n      var _rpcSubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee33(e, t) {\n        var i;\n        return _regeneratorRuntime().wrap(function _callee33$(_context33) {\n          while (1) {\n            switch (_context33.prev = _context33.next) {\n              case 0:\n                i = {\n                  method: G(t.protocol).subscribe,\n                  params: {\n                    topic: e\n                  }\n                };\n                this.logger.debug(\"Outgoing Relay Payload\");\n                this.logger.trace({\n                  type: \"payload\",\n                  direction: \"outgoing\",\n                  request: i\n                });\n                _context33.next = 5;\n                return this.relayer.provider.request(i);\n              case 5:\n                return _context33.abrupt(\"return\", _context33.sent);\n              case 6:\n              case \"end\":\n                return _context33.stop();\n            }\n          }\n        }, _callee33, this);\n      }));\n      function rpcSubscribe(_x38, _x39) {\n        return _rpcSubscribe.apply(this, arguments);\n      }\n      return rpcSubscribe;\n    }()\n  }, {\n    key: \"rpcUnsubscribe\",\n    value: function rpcUnsubscribe(e, t, i) {\n      var r = {\n        method: G(i.protocol).unsubscribe,\n        params: {\n          topic: e,\n          id: t\n        }\n      };\n      return this.logger.debug(\"Outgoing Relay Payload\"), this.logger.trace({\n        type: \"payload\",\n        direction: \"outgoing\",\n        request: r\n      }), this.relayer.provider.request(r);\n    }\n  }, {\n    key: \"onSubscribe\",\n    value: function onSubscribe(e, t) {\n      this.setSubscription(e, Q(k({}, t), {\n        id: e\n      })), this.pending.delete(t.topic);\n    }\n  }, {\n    key: \"onResubscribe\",\n    value: function onResubscribe(e, t) {\n      this.addSubscription(e, Q(k({}, t), {\n        id: e\n      })), this.pending.delete(t.topic);\n    }\n  }, {\n    key: \"onUnsubscribe\",\n    value: function () {\n      var _onUnsubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee34(e, t, i) {\n        return _regeneratorRuntime().wrap(function _callee34$(_context34) {\n          while (1) {\n            switch (_context34.prev = _context34.next) {\n              case 0:\n                this.events.removeAllListeners(t);\n                this.hasSubscription(t, e) && this.deleteSubscription(t, i);\n                _context34.next = 4;\n                return this.relayer.messages.del(e);\n              case 4:\n              case \"end\":\n                return _context34.stop();\n            }\n          }\n        }, _callee34, this);\n      }));\n      function onUnsubscribe(_x40, _x41, _x42) {\n        return _onUnsubscribe.apply(this, arguments);\n      }\n      return onUnsubscribe;\n    }()\n  }, {\n    key: \"setRelayerSubscriptions\",\n    value: function () {\n      var _setRelayerSubscriptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee35(e) {\n        return _regeneratorRuntime().wrap(function _callee35$(_context35) {\n          while (1) {\n            switch (_context35.prev = _context35.next) {\n              case 0:\n                _context35.next = 2;\n                return this.relayer.core.storage.setItem(this.storageKey, e);\n              case 2:\n              case \"end\":\n                return _context35.stop();\n            }\n          }\n        }, _callee35, this);\n      }));\n      function setRelayerSubscriptions(_x43) {\n        return _setRelayerSubscriptions.apply(this, arguments);\n      }\n      return setRelayerSubscriptions;\n    }()\n  }, {\n    key: \"getRelayerSubscriptions\",\n    value: function () {\n      var _getRelayerSubscriptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee36() {\n        return _regeneratorRuntime().wrap(function _callee36$(_context36) {\n          while (1) {\n            switch (_context36.prev = _context36.next) {\n              case 0:\n                _context36.next = 2;\n                return this.relayer.core.storage.getItem(this.storageKey);\n              case 2:\n                return _context36.abrupt(\"return\", _context36.sent);\n              case 3:\n              case \"end\":\n                return _context36.stop();\n            }\n          }\n        }, _callee36, this);\n      }));\n      function getRelayerSubscriptions() {\n        return _getRelayerSubscriptions.apply(this, arguments);\n      }\n      return getRelayerSubscriptions;\n    }()\n  }, {\n    key: \"setSubscription\",\n    value: function setSubscription(e, t) {\n      this.subscriptions.has(e) || (this.logger.debug(\"Setting subscription\"), this.logger.trace({\n        type: \"method\",\n        method: \"setSubscription\",\n        id: e,\n        subscription: t\n      }), this.addSubscription(e, t));\n    }\n  }, {\n    key: \"addSubscription\",\n    value: function addSubscription(e, t) {\n      this.subscriptions.set(e, k({}, t)), this.topicMap.set(t.topic, e), this.events.emit(O.created, t);\n    }\n  }, {\n    key: \"getSubscription\",\n    value: function getSubscription(e) {\n      this.logger.debug(\"Getting subscription\"), this.logger.trace({\n        type: \"method\",\n        method: \"getSubscription\",\n        id: e\n      });\n      var t = this.subscriptions.get(e);\n      if (!t) {\n        var _m5 = m(\"NO_MATCHING_KEY\", \"\".concat(this.name, \": \").concat(e)),\n          i = _m5.message;\n        throw new Error(i);\n      }\n      return t;\n    }\n  }, {\n    key: \"deleteSubscription\",\n    value: function deleteSubscription(e, t) {\n      this.logger.debug(\"Deleting subscription\"), this.logger.trace({\n        type: \"method\",\n        method: \"deleteSubscription\",\n        id: e,\n        reason: t\n      });\n      var i = this.getSubscription(e);\n      this.subscriptions.delete(e), this.topicMap.delete(i.topic, e), this.events.emit(O.deleted, Q(k({}, i), {\n        reason: t\n      }));\n    }\n  }, {\n    key: \"persist\",\n    value: function () {\n      var _persist3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee37() {\n        return _regeneratorRuntime().wrap(function _callee37$(_context37) {\n          while (1) {\n            switch (_context37.prev = _context37.next) {\n              case 0:\n                _context37.next = 2;\n                return this.setRelayerSubscriptions(this.values);\n              case 2:\n                this.events.emit(O.sync);\n              case 3:\n              case \"end\":\n                return _context37.stop();\n            }\n          }\n        }, _callee37, this);\n      }));\n      function persist() {\n        return _persist3.apply(this, arguments);\n      }\n      return persist;\n    }()\n  }, {\n    key: \"reset\",\n    value: function () {\n      var _reset = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee39() {\n        var _this11 = this;\n        return _regeneratorRuntime().wrap(function _callee39$(_context39) {\n          while (1) {\n            switch (_context39.prev = _context39.next) {\n              case 0:\n                _context39.t0 = !this.cached.length;\n                if (_context39.t0) {\n                  _context39.next = 4;\n                  break;\n                }\n                _context39.next = 4;\n                return Promise.all(this.cached.map( /*#__PURE__*/function () {\n                  var _ref29 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee38(e) {\n                    return _regeneratorRuntime().wrap(function _callee38$(_context38) {\n                      while (1) {\n                        switch (_context38.prev = _context38.next) {\n                          case 0:\n                            _context38.next = 2;\n                            return _this11.resubscribe(e);\n                          case 2:\n                            return _context38.abrupt(\"return\", _context38.sent);\n                          case 3:\n                          case \"end\":\n                            return _context38.stop();\n                        }\n                      }\n                    }, _callee38);\n                  }));\n                  return function (_x44) {\n                    return _ref29.apply(this, arguments);\n                  };\n                }()));\n              case 4:\n              case \"end\":\n                return _context39.stop();\n            }\n          }\n        }, _callee39, this);\n      }));\n      function reset() {\n        return _reset.apply(this, arguments);\n      }\n      return reset;\n    }()\n  }, {\n    key: \"restore\",\n    value: function () {\n      var _restore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee40() {\n        var e, _m6, t;\n        return _regeneratorRuntime().wrap(function _callee40$(_context40) {\n          while (1) {\n            switch (_context40.prev = _context40.next) {\n              case 0:\n                _context40.prev = 0;\n                _context40.next = 3;\n                return this.getRelayerSubscriptions();\n              case 3:\n                e = _context40.sent;\n                if (!(typeof e > \"u\" || !e.length)) {\n                  _context40.next = 6;\n                  break;\n                }\n                return _context40.abrupt(\"return\");\n              case 6:\n                if (!this.subscriptions.size) {\n                  _context40.next = 9;\n                  break;\n                }\n                _m6 = m(\"RESTORE_WILL_OVERRIDE\", this.name), t = _m6.message;\n                throw this.logger.error(t), new Error(t);\n              case 9:\n                this.cached = e, this.logger.debug(\"Successfully Restored subscriptions for \".concat(this.name)), this.logger.trace({\n                  type: \"method\",\n                  method: \"restore\",\n                  subscriptions: this.values\n                });\n                _context40.next = 15;\n                break;\n              case 12:\n                _context40.prev = 12;\n                _context40.t0 = _context40[\"catch\"](0);\n                this.logger.debug(\"Failed to Restore subscriptions for \".concat(this.name)), this.logger.error(_context40.t0);\n              case 15:\n              case \"end\":\n                return _context40.stop();\n            }\n          }\n        }, _callee40, this, [[0, 12]]);\n      }));\n      function restore() {\n        return _restore.apply(this, arguments);\n      }\n      return restore;\n    }()\n  }, {\n    key: \"resubscribe\",\n    value: function () {\n      var _resubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee41(e) {\n        var t, i, r, n;\n        return _regeneratorRuntime().wrap(function _callee41$(_context41) {\n          while (1) {\n            switch (_context41.prev = _context41.next) {\n              case 0:\n                if (this.ids.includes(e.id)) {\n                  _context41.next = 7;\n                  break;\n                }\n                t = e.topic, i = e.relay, r = {\n                  topic: t,\n                  relay: i\n                };\n                this.pending.set(r.topic, r);\n                _context41.next = 5;\n                return this.rpcSubscribe(r.topic, r.relay);\n              case 5:\n                n = _context41.sent;\n                this.onResubscribe(n, r);\n              case 7:\n              case \"end\":\n                return _context41.stop();\n            }\n          }\n        }, _callee41, this);\n      }));\n      function resubscribe(_x45) {\n        return _resubscribe.apply(this, arguments);\n      }\n      return resubscribe;\n    }()\n  }, {\n    key: \"onConnect\",\n    value: function () {\n      var _onConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee42() {\n        return _regeneratorRuntime().wrap(function _callee42$(_context42) {\n          while (1) {\n            switch (_context42.prev = _context42.next) {\n              case 0:\n                _context42.next = 2;\n                return this.reset();\n              case 2:\n                this.onEnable();\n              case 3:\n              case \"end\":\n                return _context42.stop();\n            }\n          }\n        }, _callee42, this);\n      }));\n      function onConnect() {\n        return _onConnect.apply(this, arguments);\n      }\n      return onConnect;\n    }()\n  }, {\n    key: \"onDisconnect\",\n    value: function onDisconnect() {\n      this.onDisable();\n    }\n  }, {\n    key: \"checkPending\",\n    value: function checkPending() {\n      var _this12 = this;\n      this.pending.forEach( /*#__PURE__*/function () {\n        var _ref30 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee43(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee43$(_context43) {\n            while (1) {\n              switch (_context43.prev = _context43.next) {\n                case 0:\n                  _context43.next = 2;\n                  return _this12.rpcSubscribe(e.topic, e.relay);\n                case 2:\n                  t = _context43.sent;\n                  _this12.onSubscribe(t, e);\n                case 4:\n                case \"end\":\n                  return _context43.stop();\n              }\n            }\n          }, _callee43);\n        }));\n        return function (_x46) {\n          return _ref30.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"registerEventListeners\",\n    value: function registerEventListeners() {\n      var _this13 = this;\n      this.relayer.core.heartbeat.on(te.pulse, function () {\n        _this13.checkPending();\n      }), this.relayer.provider.on(T.connect, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee44() {\n        return _regeneratorRuntime().wrap(function _callee44$(_context44) {\n          while (1) {\n            switch (_context44.prev = _context44.next) {\n              case 0:\n                _context44.next = 2;\n                return _this13.onConnect();\n              case 2:\n              case \"end\":\n                return _context44.stop();\n            }\n          }\n        }, _callee44);\n      }))), this.relayer.provider.on(T.disconnect, function () {\n        _this13.onDisconnect();\n      }), this.events.on(O.created, /*#__PURE__*/function () {\n        var _ref32 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee45(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee45$(_context45) {\n            while (1) {\n              switch (_context45.prev = _context45.next) {\n                case 0:\n                  t = O.created;\n                  _this13.logger.info(\"Emitting \".concat(t));\n                  _this13.logger.debug({\n                    type: \"event\",\n                    event: t,\n                    data: e\n                  });\n                  _context45.next = 5;\n                  return _this13.persist();\n                case 5:\n                case \"end\":\n                  return _context45.stop();\n              }\n            }\n          }, _callee45);\n        }));\n        return function (_x47) {\n          return _ref32.apply(this, arguments);\n        };\n      }()), this.events.on(O.deleted, /*#__PURE__*/function () {\n        var _ref33 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee46(e) {\n          var t;\n          return _regeneratorRuntime().wrap(function _callee46$(_context46) {\n            while (1) {\n              switch (_context46.prev = _context46.next) {\n                case 0:\n                  t = O.deleted;\n                  _this13.logger.info(\"Emitting \".concat(t));\n                  _this13.logger.debug({\n                    type: \"event\",\n                    event: t,\n                    data: e\n                  });\n                  _context46.next = 5;\n                  return _this13.persist();\n                case 5:\n                case \"end\":\n                  return _context46.stop();\n              }\n            }\n          }, _callee46);\n        }));\n        return function (_x48) {\n          return _ref33.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m7 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m7.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return Xe;\n}(ct);\nvar Ei = Object.defineProperty,\n  He = Object.getOwnPropertySymbols,\n  vi = Object.prototype.hasOwnProperty,\n  wi = Object.prototype.propertyIsEnumerable,\n  Ze = function Ze(s, e, t) {\n    return e in s ? Ei(s, e, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : s[e] = t;\n  },\n  Ci = function Ci(s, e) {\n    for (var t in e || (e = {})) {\n      vi.call(e, t) && Ze(s, t, e[t]);\n    }\n    if (He) {\n      var _iterator3 = _createForOfIteratorHelper(He(e)),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var t = _step3.value;\n          wi.call(e, t) && Ze(s, t, e[t]);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n    return s;\n  };\nvar Qe = /*#__PURE__*/function (_lt) {\n  _inherits(Qe, _lt);\n  var _super4 = _createSuper(Qe);\n  function Qe(e) {\n    var _this14;\n    _classCallCheck(this, Qe);\n    _this14 = _super4.call(this, e), _this14.protocol = \"wc\", _this14.version = 2, _this14.events = new M.EventEmitter(), _this14.name = Ne, _this14.initialized = !1, _this14.core = e.core, _this14.logger = typeof e.logger < \"u\" && typeof e.logger != \"string\" ? I(e.logger, _this14.name) : ee(se({\n      level: e.logger || Fe\n    })), _this14.messages = new qe(_this14.logger, e.core), _this14.subscriber = new Xe(_assertThisInitialized(_this14), _this14.logger), _this14.publisher = new di(_assertThisInitialized(_this14), _this14.logger), _this14.relayUrl = (e === null || e === void 0 ? void 0 : e.relayUrl) || Ue, _this14.projectId = e.projectId, _this14.provider = {};\n    return _this14;\n  }\n  _createClass(Qe, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee47() {\n        var e;\n        return _regeneratorRuntime().wrap(function _callee47$(_context47) {\n          while (1) {\n            switch (_context47.prev = _context47.next) {\n              case 0:\n                this.logger.trace(\"Initialized\");\n                _context47.next = 3;\n                return this.core.crypto.signJWT(this.relayUrl);\n              case 3:\n                e = _context47.sent;\n                this.provider = this.createProvider(e);\n                _context47.next = 7;\n                return Promise.all([this.messages.init(), this.provider.connect(), this.subscriber.init()]);\n              case 7:\n                this.registerEventListeners();\n                this.initialized = !0;\n              case 9:\n              case \"end\":\n                return _context47.stop();\n            }\n          }\n        }, _callee47, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return this.provider.connection.connected;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this.provider.connection.connecting;\n    }\n  }, {\n    key: \"publish\",\n    value: function () {\n      var _publish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee48(e, t, i) {\n        return _regeneratorRuntime().wrap(function _callee48$(_context48) {\n          while (1) {\n            switch (_context48.prev = _context48.next) {\n              case 0:\n                this.isInitialized();\n                _context48.next = 3;\n                return this.publisher.publish(e, t, i);\n              case 3:\n                _context48.next = 5;\n                return this.recordMessageEvent({\n                  topic: e,\n                  message: t\n                });\n              case 5:\n              case \"end\":\n                return _context48.stop();\n            }\n          }\n        }, _callee48, this);\n      }));\n      function publish(_x49, _x50, _x51) {\n        return _publish.apply(this, arguments);\n      }\n      return publish;\n    }()\n  }, {\n    key: \"subscribe\",\n    value: function () {\n      var _subscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee49(e, t) {\n        return _regeneratorRuntime().wrap(function _callee49$(_context49) {\n          while (1) {\n            switch (_context49.prev = _context49.next) {\n              case 0:\n                this.isInitialized();\n                _context49.next = 3;\n                return this.subscriber.subscribe(e, t);\n              case 3:\n                return _context49.abrupt(\"return\", _context49.sent);\n              case 4:\n              case \"end\":\n                return _context49.stop();\n            }\n          }\n        }, _callee49, this);\n      }));\n      function subscribe(_x52, _x53) {\n        return _subscribe.apply(this, arguments);\n      }\n      return subscribe;\n    }()\n  }, {\n    key: \"unsubscribe\",\n    value: function () {\n      var _unsubscribe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee50(e, t) {\n        return _regeneratorRuntime().wrap(function _callee50$(_context50) {\n          while (1) {\n            switch (_context50.prev = _context50.next) {\n              case 0:\n                this.isInitialized();\n                _context50.next = 3;\n                return this.subscriber.unsubscribe(e, t);\n              case 3:\n              case \"end\":\n                return _context50.stop();\n            }\n          }\n        }, _callee50, this);\n      }));\n      function unsubscribe(_x54, _x55) {\n        return _unsubscribe.apply(this, arguments);\n      }\n      return unsubscribe;\n    }()\n  }, {\n    key: \"on\",\n    value: function on(e, t) {\n      this.events.on(e, t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(e, t) {\n      this.events.once(e, t);\n    }\n  }, {\n    key: \"off\",\n    value: function off(e, t) {\n      this.events.off(e, t);\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(e, t) {\n      this.events.removeListener(e, t);\n    }\n  }, {\n    key: \"createProvider\",\n    value: function createProvider(e) {\n      return new Lt(new Nt(_t({\n        sdkVersion: Ke,\n        protocol: this.protocol,\n        version: this.version,\n        relayUrl: this.relayUrl,\n        projectId: this.projectId,\n        auth: e\n      })));\n    }\n  }, {\n    key: \"recordMessageEvent\",\n    value: function () {\n      var _recordMessageEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee51(e) {\n        var t, i;\n        return _regeneratorRuntime().wrap(function _callee51$(_context51) {\n          while (1) {\n            switch (_context51.prev = _context51.next) {\n              case 0:\n                t = e.topic, i = e.message;\n                _context51.next = 3;\n                return this.messages.set(t, i);\n              case 3:\n              case \"end\":\n                return _context51.stop();\n            }\n          }\n        }, _callee51, this);\n      }));\n      function recordMessageEvent(_x56) {\n        return _recordMessageEvent.apply(this, arguments);\n      }\n      return recordMessageEvent;\n    }()\n  }, {\n    key: \"shouldIgnoreMessageEvent\",\n    value: function () {\n      var _shouldIgnoreMessageEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee52(e) {\n        var t, i;\n        return _regeneratorRuntime().wrap(function _callee52$(_context52) {\n          while (1) {\n            switch (_context52.prev = _context52.next) {\n              case 0:\n                t = e.topic, i = e.message;\n                _context52.next = 3;\n                return this.subscriber.isSubscribed(t);\n              case 3:\n                if (!_context52.sent) {\n                  _context52.next = 7;\n                  break;\n                }\n                _context52.t0 = this.messages.has(t, i);\n                _context52.next = 8;\n                break;\n              case 7:\n                _context52.t0 = !0;\n              case 8:\n                return _context52.abrupt(\"return\", _context52.t0);\n              case 9:\n              case \"end\":\n                return _context52.stop();\n            }\n          }\n        }, _callee52, this);\n      }));\n      function shouldIgnoreMessageEvent(_x57) {\n        return _shouldIgnoreMessageEvent.apply(this, arguments);\n      }\n      return shouldIgnoreMessageEvent;\n    }()\n  }, {\n    key: \"onProviderPayload\",\n    value: function () {\n      var _onProviderPayload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee53(e) {\n        var t, _t$data, i, r, n;\n        return _regeneratorRuntime().wrap(function _callee53$(_context53) {\n          while (1) {\n            switch (_context53.prev = _context53.next) {\n              case 0:\n                if (!(this.logger.debug(\"Incoming Relay Payload\"), this.logger.trace({\n                  type: \"payload\",\n                  direction: \"incoming\",\n                  payload: e\n                }), Ft(e))) {\n                  _context53.next = 11;\n                  break;\n                }\n                if (e.method.endsWith(Be)) {\n                  _context53.next = 3;\n                  break;\n                }\n                return _context53.abrupt(\"return\");\n              case 3:\n                t = e.params, _t$data = t.data, i = _t$data.topic, r = _t$data.message, n = {\n                  topic: i,\n                  message: r\n                };\n                this.logger.debug(\"Emitting Relayer Payload\");\n                this.logger.trace(Ci({\n                  type: \"event\",\n                  event: t.id\n                }, n));\n                this.events.emit(t.id, n);\n                _context53.next = 9;\n                return this.acknowledgePayload(e);\n              case 9:\n                _context53.next = 11;\n                return this.onMessageEvent(n);\n              case 11:\n              case \"end\":\n                return _context53.stop();\n            }\n          }\n        }, _callee53, this);\n      }));\n      function onProviderPayload(_x58) {\n        return _onProviderPayload.apply(this, arguments);\n      }\n      return onProviderPayload;\n    }()\n  }, {\n    key: \"onMessageEvent\",\n    value: function () {\n      var _onMessageEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee54(e) {\n        return _regeneratorRuntime().wrap(function _callee54$(_context54) {\n          while (1) {\n            switch (_context54.prev = _context54.next) {\n              case 0:\n                _context54.next = 2;\n                return this.shouldIgnoreMessageEvent(e);\n              case 2:\n                _context54.t0 = _context54.sent;\n                if (_context54.t0) {\n                  _context54.next = 7;\n                  break;\n                }\n                this.events.emit(L.message, e);\n                _context54.next = 7;\n                return this.recordMessageEvent(e);\n              case 7:\n              case \"end\":\n                return _context54.stop();\n            }\n          }\n        }, _callee54, this);\n      }));\n      function onMessageEvent(_x59) {\n        return _onMessageEvent.apply(this, arguments);\n      }\n      return onMessageEvent;\n    }()\n  }, {\n    key: \"acknowledgePayload\",\n    value: function () {\n      var _acknowledgePayload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee55(e) {\n        var t;\n        return _regeneratorRuntime().wrap(function _callee55$(_context55) {\n          while (1) {\n            switch (_context55.prev = _context55.next) {\n              case 0:\n                t = Ut(e.id, !0);\n                _context55.next = 3;\n                return this.provider.connection.send(t);\n              case 3:\n              case \"end\":\n                return _context55.stop();\n            }\n          }\n        }, _callee55, this);\n      }));\n      function acknowledgePayload(_x60) {\n        return _acknowledgePayload.apply(this, arguments);\n      }\n      return acknowledgePayload;\n    }()\n  }, {\n    key: \"registerEventListeners\",\n    value: function registerEventListeners() {\n      var _this15 = this;\n      this.provider.on(T.payload, function (e) {\n        return _this15.onProviderPayload(e);\n      }), this.provider.on(T.connect, function () {\n        _this15.events.emit(L.connect);\n      }), this.provider.on(T.disconnect, function () {\n        _this15.events.emit(L.disconnect), setTimeout(function () {\n          _this15.provider.connect();\n        }, xt(Me));\n      }), this.provider.on(T.error, function (e) {\n        return _this15.events.emit(L.error, e);\n      });\n    }\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m8 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m8.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return Qe;\n}(lt);\nvar _i = Object.defineProperty,\n  et = Object.getOwnPropertySymbols,\n  Si = Object.prototype.hasOwnProperty,\n  Ii = Object.prototype.propertyIsEnumerable,\n  tt = function tt(s, e, t) {\n    return e in s ? _i(s, e, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : s[e] = t;\n  },\n  st = function st(s, e) {\n    for (var t in e || (e = {})) {\n      Si.call(e, t) && tt(s, t, e[t]);\n    }\n    if (et) {\n      var _iterator4 = _createForOfIteratorHelper(et(e)),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var t = _step4.value;\n          Ii.call(e, t) && tt(s, t, e[t]);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n    return s;\n  };\nvar Ai = /*#__PURE__*/function (_Dt) {\n  _inherits(Ai, _Dt);\n  var _super5 = _createSuper(Ai);\n  function Ai(e, t, i) {\n    var _this16;\n    var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : z;\n    var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : void 0;\n    _classCallCheck(this, Ai);\n    _this16 = _super5.call(this, e, t, i, r), _this16.core = e, _this16.logger = t, _this16.name = i, _this16.map = new Map(), _this16.version = $e, _this16.cached = [], _this16.initialized = !1, _this16.storagePrefix = z, _this16.init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee56() {\n      return _regeneratorRuntime().wrap(function _callee56$(_context56) {\n        while (1) {\n          switch (_context56.prev = _context56.next) {\n            case 0:\n              _context56.t0 = _this16.initialized;\n              if (_context56.t0) {\n                _context56.next = 8;\n                break;\n              }\n              _this16.logger.trace(\"Initialized\");\n              _context56.next = 5;\n              return _this16.restore();\n            case 5:\n              _this16.cached.forEach(function (a) {\n                St(a) ? _this16.map.set(a.id, a) : It(a) ? _this16.map.set(a.topic, a) : _this16.getKey && a !== null && !q(a) && _this16.map.set(_this16.getKey(a), a);\n              });\n              _this16.cached = [];\n              _this16.initialized = !0;\n            case 8:\n            case \"end\":\n              return _context56.stop();\n          }\n        }\n      }, _callee56);\n    })), _this16.set = /*#__PURE__*/function () {\n      var _ref35 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee57(a, o) {\n        return _regeneratorRuntime().wrap(function _callee57$(_context57) {\n          while (1) {\n            switch (_context57.prev = _context57.next) {\n              case 0:\n                _this16.isInitialized();\n                if (!_this16.map.has(a)) {\n                  _context57.next = 6;\n                  break;\n                }\n                _context57.next = 4;\n                return _this16.update(a, o);\n              case 4:\n                _context57.next = 11;\n                break;\n              case 6:\n                _this16.logger.debug(\"Setting value\");\n                _this16.logger.trace({\n                  type: \"method\",\n                  method: \"set\",\n                  key: a,\n                  value: o\n                });\n                _this16.map.set(a, o);\n                _context57.next = 11;\n                return _this16.persist();\n              case 11:\n              case \"end\":\n                return _context57.stop();\n            }\n          }\n        }, _callee57);\n      }));\n      return function (_x61, _x62) {\n        return _ref35.apply(this, arguments);\n      };\n    }(), _this16.get = function (a) {\n      return _this16.isInitialized(), _this16.logger.debug(\"Getting value\"), _this16.logger.trace({\n        type: \"method\",\n        method: \"get\",\n        key: a\n      }), _this16.getData(a);\n    }, _this16.getAll = function (a) {\n      return a ? _this16.values.filter(function (o) {\n        return Object.keys(a).every(function (u) {\n          return Bt(o[u], a[u]);\n        });\n      }) : _this16.values;\n    }, _this16.update = /*#__PURE__*/function () {\n      var _ref36 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee58(a, o) {\n        var u;\n        return _regeneratorRuntime().wrap(function _callee58$(_context58) {\n          while (1) {\n            switch (_context58.prev = _context58.next) {\n              case 0:\n                _this16.isInitialized(), _this16.logger.debug(\"Updating value\"), _this16.logger.trace({\n                  type: \"method\",\n                  method: \"update\",\n                  key: a,\n                  update: o\n                });\n                u = st(st({}, _this16.getData(a)), o);\n                _this16.map.set(a, u);\n                _context58.next = 5;\n                return _this16.persist();\n              case 5:\n              case \"end\":\n                return _context58.stop();\n            }\n          }\n        }, _callee58);\n      }));\n      return function (_x63, _x64) {\n        return _ref36.apply(this, arguments);\n      };\n    }(), _this16.delete = /*#__PURE__*/function () {\n      var _ref37 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee59(a, o) {\n        return _regeneratorRuntime().wrap(function _callee59$(_context59) {\n          while (1) {\n            switch (_context59.prev = _context59.next) {\n              case 0:\n                _this16.isInitialized();\n                _context59.t0 = _this16.map.has(a);\n                if (!_context59.t0) {\n                  _context59.next = 8;\n                  break;\n                }\n                _this16.logger.debug(\"Deleting value\");\n                _this16.logger.trace({\n                  type: \"method\",\n                  method: \"delete\",\n                  key: a,\n                  reason: o\n                });\n                _this16.map.delete(a);\n                _context59.next = 8;\n                return _this16.persist();\n              case 8:\n              case \"end\":\n                return _context59.stop();\n            }\n          }\n        }, _callee59);\n      }));\n      return function (_x65, _x66) {\n        return _ref37.apply(this, arguments);\n      };\n    }(), _this16.logger = I(t, _this16.name), _this16.storagePrefix = r, _this16.getKey = n;\n    return _this16;\n  }\n  _createClass(Ai, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"storageKey\",\n    get: function get() {\n      return this.storagePrefix + this.version + \"//\" + this.name;\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.map.size;\n    }\n  }, {\n    key: \"keys\",\n    get: function get() {\n      return Array.from(this.map.keys());\n    }\n  }, {\n    key: \"values\",\n    get: function get() {\n      return Array.from(this.map.values());\n    }\n  }, {\n    key: \"setDataStore\",\n    value: function () {\n      var _setDataStore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee60(e) {\n        return _regeneratorRuntime().wrap(function _callee60$(_context60) {\n          while (1) {\n            switch (_context60.prev = _context60.next) {\n              case 0:\n                _context60.next = 2;\n                return this.core.storage.setItem(this.storageKey, e);\n              case 2:\n              case \"end\":\n                return _context60.stop();\n            }\n          }\n        }, _callee60, this);\n      }));\n      function setDataStore(_x67) {\n        return _setDataStore.apply(this, arguments);\n      }\n      return setDataStore;\n    }()\n  }, {\n    key: \"getDataStore\",\n    value: function () {\n      var _getDataStore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee61() {\n        return _regeneratorRuntime().wrap(function _callee61$(_context61) {\n          while (1) {\n            switch (_context61.prev = _context61.next) {\n              case 0:\n                _context61.next = 2;\n                return this.core.storage.getItem(this.storageKey);\n              case 2:\n                return _context61.abrupt(\"return\", _context61.sent);\n              case 3:\n              case \"end\":\n                return _context61.stop();\n            }\n          }\n        }, _callee61, this);\n      }));\n      function getDataStore() {\n        return _getDataStore.apply(this, arguments);\n      }\n      return getDataStore;\n    }()\n  }, {\n    key: \"getData\",\n    value: function getData(e) {\n      var t = this.map.get(e);\n      if (!t) {\n        var _m9 = m(\"NO_MATCHING_KEY\", \"\".concat(this.name, \": \").concat(e)),\n          i = _m9.message;\n        throw this.logger.error(i), new Error(i);\n      }\n      return t;\n    }\n  }, {\n    key: \"persist\",\n    value: function () {\n      var _persist4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee62() {\n        return _regeneratorRuntime().wrap(function _callee62$(_context62) {\n          while (1) {\n            switch (_context62.prev = _context62.next) {\n              case 0:\n                _context62.next = 2;\n                return this.setDataStore(this.values);\n              case 2:\n              case \"end\":\n                return _context62.stop();\n            }\n          }\n        }, _callee62, this);\n      }));\n      function persist() {\n        return _persist4.apply(this, arguments);\n      }\n      return persist;\n    }()\n  }, {\n    key: \"restore\",\n    value: function () {\n      var _restore2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee63() {\n        var e, _m10, t;\n        return _regeneratorRuntime().wrap(function _callee63$(_context63) {\n          while (1) {\n            switch (_context63.prev = _context63.next) {\n              case 0:\n                _context63.prev = 0;\n                _context63.next = 3;\n                return this.getDataStore();\n              case 3:\n                e = _context63.sent;\n                if (!(typeof e > \"u\" || !e.length)) {\n                  _context63.next = 6;\n                  break;\n                }\n                return _context63.abrupt(\"return\");\n              case 6:\n                if (!this.map.size) {\n                  _context63.next = 9;\n                  break;\n                }\n                _m10 = m(\"RESTORE_WILL_OVERRIDE\", this.name), t = _m10.message;\n                throw this.logger.error(t), new Error(t);\n              case 9:\n                this.cached = e, this.logger.debug(\"Successfully Restored value for \".concat(this.name)), this.logger.trace({\n                  type: \"method\",\n                  method: \"restore\",\n                  value: this.values\n                });\n                _context63.next = 15;\n                break;\n              case 12:\n                _context63.prev = 12;\n                _context63.t0 = _context63[\"catch\"](0);\n                this.logger.debug(\"Failed to Restore value for \".concat(this.name)), this.logger.error(_context63.t0);\n              case 15:\n              case \"end\":\n                return _context63.stop();\n            }\n          }\n        }, _callee63, this, [[0, 12]]);\n      }));\n      function restore() {\n        return _restore2.apply(this, arguments);\n      }\n      return restore;\n    }()\n  }, {\n    key: \"isInitialized\",\n    value: function isInitialized() {\n      if (!this.initialized) {\n        var _m11 = m(\"NOT_INITIALIZED\", this.name),\n          e = _m11.message;\n        throw new Error(e);\n      }\n    }\n  }]);\n  return Ai;\n}(Dt);\nvar Oi = Object.defineProperty,\n  it = Object.getOwnPropertySymbols,\n  Ri = Object.prototype.hasOwnProperty,\n  Ti = Object.prototype.propertyIsEnumerable,\n  rt = function rt(s, e, t) {\n    return e in s ? Oi(s, e, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : s[e] = t;\n  },\n  nt = function nt(s, e) {\n    for (var t in e || (e = {})) {\n      Ri.call(e, t) && rt(s, t, e[t]);\n    }\n    if (it) {\n      var _iterator5 = _createForOfIteratorHelper(it(e)),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var t = _step5.value;\n          Ti.call(e, t) && rt(s, t, e[t]);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n    return s;\n  };\nvar j = /*#__PURE__*/function (_dt) {\n  _inherits(j, _dt);\n  var _super6 = _createSuper(j);\n  function j(e) {\n    var _this17;\n    _classCallCheck(this, j);\n    _this17 = _super6.call(this, e), _this17.protocol = H, _this17.version = _e, _this17.name = $, _this17.events = new M.EventEmitter(), _this17.initialized = !1, _this17.on = function (i, r) {\n      return _this17.events.on(i, r);\n    }, _this17.once = function (i, r) {\n      return _this17.events.once(i, r);\n    }, _this17.off = function (i, r) {\n      return _this17.events.off(i, r);\n    }, _this17.removeListener = function (i, r) {\n      return _this17.events.removeListener(i, r);\n    }, _this17.projectId = e === null || e === void 0 ? void 0 : e.projectId;\n    var t = typeof (e === null || e === void 0 ? void 0 : e.logger) < \"u\" && typeof (e === null || e === void 0 ? void 0 : e.logger) != \"string\" ? e.logger : ee(se({\n      level: (e === null || e === void 0 ? void 0 : e.logger) || Se.logger\n    }));\n    _this17.logger = I(t, _this17.name), _this17.heartbeat = new ot(), _this17.crypto = new Ge(_assertThisInitialized(_this17), _this17.logger, e === null || e === void 0 ? void 0 : e.keychain), _this17.storage = e != null && e.storage ? e.storage : new at(nt(nt({}, Ie), e === null || e === void 0 ? void 0 : e.storageOptions)), _this17.relayer = new Qe({\n      core: _assertThisInitialized(_this17),\n      logger: _this17.logger,\n      relayUrl: e === null || e === void 0 ? void 0 : e.relayUrl,\n      projectId: _this17.projectId\n    });\n    return _this17;\n  }\n  _createClass(j, [{\n    key: \"context\",\n    get: function get() {\n      return A(this.logger);\n    }\n  }, {\n    key: \"start\",\n    value: function () {\n      var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee64() {\n        return _regeneratorRuntime().wrap(function _callee64$(_context64) {\n          while (1) {\n            switch (_context64.prev = _context64.next) {\n              case 0:\n                _context64.t0 = this.initialized;\n                if (_context64.t0) {\n                  _context64.next = 4;\n                  break;\n                }\n                _context64.next = 4;\n                return this.initialize();\n              case 4:\n              case \"end\":\n                return _context64.stop();\n            }\n          }\n        }, _callee64, this);\n      }));\n      function start() {\n        return _start.apply(this, arguments);\n      }\n      return start;\n    }()\n  }, {\n    key: \"initialize\",\n    value: function () {\n      var _initialize = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee65() {\n        return _regeneratorRuntime().wrap(function _callee65$(_context65) {\n          while (1) {\n            switch (_context65.prev = _context65.next) {\n              case 0:\n                this.logger.trace(\"Initialized\");\n                _context65.prev = 1;\n                _context65.next = 4;\n                return this.crypto.init();\n              case 4:\n                _context65.next = 6;\n                return this.relayer.init();\n              case 6:\n                _context65.next = 8;\n                return this.heartbeat.init();\n              case 8:\n                this.initialized = !0;\n                this.logger.info(\"Core Initilization Success\");\n                _context65.next = 15;\n                break;\n              case 12:\n                _context65.prev = 12;\n                _context65.t0 = _context65[\"catch\"](1);\n                throw this.logger.warn(\"Core Initilization Failure at epoch \".concat(Date.now()), _context65.t0), this.logger.error(_context65.t0.message), _context65.t0;\n              case 15:\n              case \"end\":\n                return _context65.stop();\n            }\n          }\n        }, _callee65, this, [[1, 12]]);\n      }));\n      function initialize() {\n        return _initialize.apply(this, arguments);\n      }\n      return initialize;\n    }()\n  }], [{\n    key: \"init\",\n    value: function () {\n      var _init2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee66(e) {\n        var t;\n        return _regeneratorRuntime().wrap(function _callee66$(_context66) {\n          while (1) {\n            switch (_context66.prev = _context66.next) {\n              case 0:\n                t = new j(e);\n                _context66.next = 3;\n                return t.initialize();\n              case 3:\n                return _context66.abrupt(\"return\", t);\n              case 4:\n              case \"end\":\n                return _context66.stop();\n            }\n          }\n        }, _callee66);\n      }));\n      function init(_x68) {\n        return _init2.apply(this, arguments);\n      }\n      return init;\n    }()\n  }]);\n  return j;\n}(dt);\nvar zi = j;\nexport { $ as CORE_CONTEXT, Se as CORE_DEFAULT, H as CORE_PROTOCOL, Ie as CORE_STORAGE_OPTIONS, z as CORE_STORAGE_PREFIX, _e as CORE_VERSION, Z as CRYPTO_CLIENT_SEED, Ae as CRYPTO_CONTEXT, Oe as CRYPTO_JWT_TTL, zi as Core, Ge as Crypto, Re as KEYCHAIN_CONTEXT, Te as KEYCHAIN_STORAGE_VERSION, Ve as KeyChain, ze as MESSAGES_CONTEXT, Pe as MESSAGES_STORAGE_VERSION, qe as MessageTracker, Ye as PENDING_SUB_RESOLUTION_TIMEOUT, Le as PUBLISHER_CONTEXT, xe as PUBLISHER_DEFAULT_TTL, Ne as RELAYER_CONTEXT, Fe as RELAYER_DEFAULT_LOGGER, ci as RELAYER_DEFAULT_PROTOCOL, Ue as RELAYER_DEFAULT_RELAY_URL, L as RELAYER_EVENTS, T as RELAYER_PROVIDER_EVENTS, Me as RELAYER_RECONNECT_TIMEOUT, Ke as RELAYER_SDK_VERSION, li as RELAYER_STORAGE_OPTIONS, Be as RELAYER_SUBSCRIBER_SUFFIX, Qe as Relayer, $e as STORE_STORAGE_VERSION, ke as SUBSCRIBER_CONTEXT, Di as SUBSCRIBER_DEFAULT_TTL, O as SUBSCRIBER_EVENTS, je as SUBSCRIBER_STORAGE_VERSION, Ai as Store, Xe as Subscriber, j as default };","map":null,"metadata":{},"sourceType":"module"}