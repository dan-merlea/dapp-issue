{"ast":null,"code":"import _objectSpread from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/packages/client/src/gui/hud/SpaceshipCargo.tsx\";\nimport { Box } from 'gui/uielements';\nimport React from 'react';\nimport ObjectMap from 'storage/ObjectMap';\nimport { MaterialLinearComp } from './MaterialLinearComp';\n\n/**\n * Render the details about the current spaceship in control\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SpaceshipCargoView = /*#__PURE__*/function (_React$Component) {\n  _inherits(SpaceshipCargoView, _React$Component);\n  var _super = _createSuper(SpaceshipCargoView);\n  function SpaceshipCargoView(props) {\n    var _this;\n    _classCallCheck(this, SpaceshipCargoView);\n    _this = _super.call(this, props);\n    _this.materials = new ObjectMap();\n    _this.props.spaceship.cargo.forEach(function (material, key) {\n      _this.materials.add(key, material);\n    });\n    return _this;\n  }\n  _createClass(SpaceshipCargoView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      this.props.spaceship.cargo.onAdd = function (material, key) {\n        _this2.materials.add(key, material);\n        _this2.forceUpdate();\n      };\n      this.props.spaceship.cargo.onRemove = function (material, key) {\n        _this2.materials.remove(key);\n        _this2.forceUpdate();\n      };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n      if (prevProps.spaceship.nonce != this.props.spaceship.nonce) {\n        console.log('Component update');\n        this.materials = new ObjectMap();\n        this.props.spaceship.cargo.forEach(function (material, key) {\n          _this3.materials.add(key, material);\n        });\n        this.forceUpdate();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      return /*#__PURE__*/_jsxDEV(Box, {\n        style: _objectSpread(_objectSpread({}, this.props.style), styles.box),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Cargo Krogan #\", this.props.spaceship.nonce]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 4\n        }, this), this.materials.getAll().map(function (material, i) {\n          return /*#__PURE__*/_jsxDEV(MaterialLinearComp, {\n            material: material\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 5\n          }, _this4);\n        }), this.materials.length() == 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.text,\n          children: \"Empty. Mine asteroids to gather materials.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 3\n      }, this);\n    }\n  }]);\n  return SpaceshipCargoView;\n}(React.Component);\nexport var SpaceshipCargo = /*#__PURE__*/React.memo(SpaceshipCargoView);\n_c = SpaceshipCargo;\nvar styles = {\n  text: {\n    fontSize: '10px'\n  },\n  box: {\n    maxWidth: '250px'\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"SpaceshipCargo\");","map":{"version":3,"names":["Box","React","ObjectMap","MaterialLinearComp","SpaceshipCargoView","props","materials","spaceship","cargo","forEach","material","key","add","onAdd","forceUpdate","onRemove","remove","prevProps","nonce","console","log","style","styles","box","getAll","map","i","length","text","Component","SpaceshipCargo","memo","fontSize","maxWidth"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/packages/client/src/gui/hud/SpaceshipCargo.tsx"],"sourcesContent":["import { Box } from 'gui/uielements';\nimport React, { CSSProperties } from 'react';\nimport { Material } from 'state/Material';\nimport { Spaceship } from 'state/Spaceship';\nimport ObjectMap from 'storage/ObjectMap';\nimport { MaterialLinearComp } from './MaterialLinearComp';\n\n/**\n * Render the details about the current spaceship in control\n */\n\nexport interface SpaceshipCargoProps {\n\tstyle?: CSSProperties\n\tspaceship: Spaceship // map synced spaceship\n}\n\nexport interface SpaceshipCargoState {}\n\nclass SpaceshipCargoView extends React.Component<SpaceshipCargoProps, SpaceshipCargoState> {\n\n\tmaterials = new ObjectMap<Material>()\n\n\tconstructor(props: SpaceshipCargoProps) {\n\t\tsuper(props)\n\t\tthis.props.spaceship.cargo.forEach((material: Material, key: string) => {\n\t\t\tthis.materials.add(key, material)\n\t\t})\n\t}\n\n\tcomponentDidMount(): void {\n\t\tthis.props.spaceship.cargo.onAdd = (material: Material, key: string) => {\n\t\t\tthis.materials.add(key, material)\n\t\t\tthis.forceUpdate()\n\t\t}\n\n\t\tthis.props.spaceship.cargo.onRemove = (material: Material, key: string) => {\n\t\t\tthis.materials.remove(key)\n\t\t\tthis.forceUpdate()\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: SpaceshipCargoProps) {\n\t\tif (prevProps.spaceship.nonce != this.props.spaceship.nonce) {\n\t\t\tconsole.log('Component update')\n\t\t\tthis.materials = new ObjectMap<Material>()\n\t\t\tthis.props.spaceship.cargo.forEach((material: Material, key: string) => {\n\t\t\t\tthis.materials.add(key, material)\n\t\t\t})\n\t\t\tthis.forceUpdate()\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<Box\n\t\t\tstyle={{\n\t\t\t\t...this.props.style,\n\t\t\t\t...styles.box,\n\t\t\t}}\n\t\t>\n\t\t\t<p>Cargo Krogan #{this.props.spaceship.nonce}</p>\n\t\t\t{this.materials.getAll().map((material, i) => (\n\t\t\t\t<MaterialLinearComp key={i} material={material} />\n\t\t\t))}\n\t\t\t{this.materials.length() == 0 &&\n\t\t\t\t<p style={styles.text}>Empty. Mine asteroids to gather materials.</p>\n\t\t\t}\n\t\t</Box>\n\t\t)\n\t}\n\n}\n\nexport const SpaceshipCargo = React.memo(SpaceshipCargoView)\n\n\nconst styles: { [key: string]: CSSProperties } = {\n\ttext: {\n\t\tfontSize: '10px'\n\t},\n\tbox: {\n\t\tmaxWidth: '250px'\n\t}\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}