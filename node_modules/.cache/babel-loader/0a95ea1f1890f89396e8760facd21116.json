{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar dictionary_1 = require(\"./dictionary\");\nvar email_address = \"([a-z0-9!#$%&'*+=?^_`{|}~-]+(\\\\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*)\";\nvar domainWithTLD = \"([a-z0-9]+(-+[a-z0-9]+)*\\\\.)+(\" + dictionary_1.TLDs + \")\";\nvar domainWithAnyTLD = \"([a-z0-9]+(-+[a-z0-9]+)*\\\\.)+([a-z0-9][a-z0-9-]{0,\" + (Math.max.apply(this, dictionary_1.TLDs.split(\"|\").map(function (x) {\n  return x.length;\n})) - 2) + \"}[a-z0-9])\";\nvar allowedInPath = \"a-zA-Z\\\\d\\\\-._~\\\\!$&*+,;=:@%'\\\"\\\\[\\\\]()\";\nvar path = \"(((\\\\/(([\" + allowedInPath + \"]+(\\\\/[\" + allowedInPath + \"]*)*))?)?)((\\\\?([\" + allowedInPath + \"\\\\/?]*))?)((\\\\#([\" + allowedInPath + \"\\\\/?]*))?))?\";\nvar ipv4 = \"((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\";\nvar ipv6 = \"\\\\[(([a-f0-9:]+:+)+[a-f0-9]+)\\\\]\";\nvar port = \"(:(\\\\d{1,5}))?\";\nvar protocol = \"(https?:|ftps?:)\\\\/\\\\/\";\nvar confirmedByProtocol = \"(\" + protocol + \")\\\\S+\";\nvar additionalSlashes = \"(([\\\\/]?))+\";\nvar fqdn = \"(((\" + protocol + \")?(\" + domainWithTLD + \"|\" + ipv4 + \"|(\" + protocol + \")(\" + ipv6 + \"|\" + domainWithAnyTLD + \"))(?!@\\\\w)\" + port + \")|(\" + confirmedByProtocol + \"))\";\nvar nonLatinMatches = fqdn + \"((((\\\\/(([\" + allowedInPath + \"]+(\\\\/[\" + allowedInPath + dictionary_1.nonLatinAlphabetRanges + \"]*)*))?)?)((\\\\?([\" + allowedInPath + \"\\\\/?]*))?)((\\\\#([\" + allowedInPath + \"\\\\/?]*))?))?\\\\b((([\" + allowedInPath + \"\\\\/\" + dictionary_1.nonLatinAlphabetRanges + \"][a-zA-Z\\\\d\\\\-_~+=\\\\/\" + dictionary_1.nonLatinAlphabetRanges + \"]+)?))+)\";\nexports.email = \"\\\\b(mailto:)?\" + email_address + \"@(\" + domainWithTLD + \"|\" + ipv4 + \")\\\\b\";\nexports.url = \"(\" + nonLatinMatches + \")|(\\\\b\" + fqdn + path + \"\\\\b\" + additionalSlashes + \")\";\nexports.file = \"(file:\\\\/\\\\/\\\\/)([a-z]+:(\\\\/|\\\\\\\\)+)?([\\\\w.]+([\\\\/\\\\\\\\]?)+)+\";\nexports.final = \"(\" + exports.url + \")|(\" + exports.email + \")|(\" + exports.file + \")\";\nexports.finalRegex = new RegExp(exports.final, \"gi\");\n// for validation purposes\nexports.ipRegex = new RegExp(\"^(\" + ipv4 + \"|\" + ipv6 + \")$\", \"i\");\nexports.emailRegex = new RegExp(\"^(\" + exports.email + \")$\", \"i\");\nexports.fileRegex = new RegExp(\"^(\" + exports.file + \")$\", \"i\");\nexports.urlRegex = new RegExp(\"^(\" + exports.url + \")$\", \"i\");\n// identifying parts of the link\nvar iidxes = {\n  isURL: 0,\n  isEmail: 0,\n  isFile: 0,\n  file: {\n    fileName: 0,\n    protocol: 0\n  },\n  email: {\n    protocol: 0,\n    local: 0,\n    host: 0\n  },\n  url: {\n    ipv4: 0,\n    ipv6: 0,\n    ipv4Confirmation: 0,\n    byProtocol: 0,\n    port: 0,\n    // three places where protocol can appear\n    protocol1: 0,\n    protocol2: 0,\n    protocol3: 0,\n    protocolWithDomain: 0,\n    path: 0,\n    // sometimes path might be split into two parts\n    secondPartOfPath: 0,\n    query: 0,\n    fragment: 0\n  }\n};\nexports.iidxes = iidxes;\nvar testers = [\"file:///some/file/path/filename.pdf\", \"mailto:e+_mail.me@sub.domain.com\", \"http://sub.domain.co.uk:3000/p/a/t/h_(asd)/h?q=abc123#dfdf\", \"http://www.\\u0639\\u0631\\u0628\\u064A.com\", \"http://127.0.0.1:3000/p/a/t_(asd)/h?q=abc123#dfdf\", \"http://[2a00:1450:4025:401::67]/k/something\", \"a.org/abc/\\u10D8_\\u10D2\\u10D2\"].join(\" \");\nvar result = null;\nvar i = 0;\nwhile ((result = exports.finalRegex.exec(testers)) !== null) {\n  if (i === 0) {\n    iidxes.isFile = result.lastIndexOf(result[0]);\n    iidxes.file.fileName = result.indexOf(\"filename.pdf\");\n    iidxes.file.protocol = result.indexOf(\"file:///\");\n  }\n  if (i === 1) {\n    iidxes.isEmail = result.lastIndexOf(result[0]);\n    iidxes.email.protocol = result.indexOf(\"mailto:\");\n    iidxes.email.local = result.indexOf(\"e+_mail.me\");\n    iidxes.email.host = result.indexOf(\"sub.domain.com\");\n  }\n  if (i === 2) {\n    iidxes.isURL = result.lastIndexOf(result[0]);\n    iidxes.url.protocol1 = result.indexOf(\"http://\");\n    iidxes.url.protocolWithDomain = result.indexOf(\"http://sub.domain.co.uk:3000\");\n    iidxes.url.port = result.indexOf(\"3000\");\n    iidxes.url.path = result.indexOf(\"/p/a/t/h_(asd)/h\");\n    iidxes.url.query = result.indexOf(\"q=abc123\");\n    iidxes.url.fragment = result.indexOf(\"dfdf\");\n  }\n  if (i === 3) {\n    iidxes.url.byProtocol = result.lastIndexOf(\"http://www.عربي.com\");\n    iidxes.url.protocol2 = result.lastIndexOf(\"http://\");\n  }\n  if (i === 4) {\n    iidxes.url.ipv4 = result.indexOf(\"127.0.0.1\");\n    iidxes.url.ipv4Confirmation = result.indexOf(\"0.\");\n  }\n  if (i === 5) {\n    iidxes.url.ipv6 = result.indexOf(\"2a00:1450:4025:401::67\");\n    iidxes.url.protocol3 = result.lastIndexOf(\"http://\");\n  }\n  if (i === 6) {\n    iidxes.url.secondPartOfPath = result.indexOf(\"გგ\");\n  }\n  i++;\n}","map":null,"metadata":{},"sourceType":"script"}