{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _defineProperty from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as E } from \"./chunk-ARDCHFQD.js\";\nimport { a as R } from \"./chunk-7I7NVYZT.js\";\nimport { a as w, b as $ } from \"./chunk-NCV4QGRH.js\";\nimport { a as c, j as m, m as P } from \"./chunk-HBP5N4FR.js\";\nP();\nimport { useEffect as nn, useState as g } from \"react\";\n$();\nvar T = {};\nfunction ln(_ref) {\n  var _ref$isLedger = _ref.isLedger,\n    v = _ref$isLedger === void 0 ? !1 : _ref$isLedger,\n    U = _ref.transactionsToSign,\n    W = _ref.egldLabel,\n    B = _ref.address,\n    f = _ref.onCancel,\n    C = _ref.onSignTransaction,\n    N = _ref.onTransactionsSignError,\n    V = _ref.onTransactionsSignSuccess,\n    y = _ref.onGetScamAddressData;\n  var I, M, A;\n  var _g = g(0),\n    _g2 = _slicedToArray(_g, 2),\n    o = _g2[0],\n    a = _g2[1],\n    _g3 = g(),\n    _g4 = _slicedToArray(_g3, 2),\n    u = _g4[0],\n    x = _g4[1],\n    _g5 = g(null),\n    _g6 = _slicedToArray(_g5, 2),\n    t = _g6[0],\n    j = _g6[1],\n    _g7 = g(!1),\n    _g8 = _slicedToArray(_g7, 2),\n    O = _g8[0],\n    d = _g8[1],\n    _E = E({\n      transactions: U\n    }),\n    q = _E.getTxInfoByDataField,\n    s = _E.allTransactions,\n    p = o === s.length - 1;\n  nn(function () {\n    z();\n  }, [o, s]);\n  function z() {\n    return m(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var k, n, e, i, S, F, L, r, Y, Z, l, _;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              n = s[o];\n              if (!(n == null)) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              e = n.transaction, i = n.multiTxData, S = e.getData().toString(), F = q(e.getData().toString(), i), L = F.tokenId, r = e.getReceiver().toString(), Y = B !== r, Z = r in T;\n              if (!(Y && !Z && y != null)) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 7;\n              return y(r);\n            case 7:\n              l = _context.sent;\n              T = c(c({}, T), l != null && l.scamInfo ? _defineProperty({}, r, l.scamInfo) : {});\n            case 9:\n              _ = Boolean(L && R({\n                tokenId: L,\n                erdLabel: W\n              }));\n              j({\n                transaction: e,\n                receiverScamInfo: ((k = T[r]) == null ? void 0 : k.info) || null,\n                transactionTokenInfo: F,\n                isTokenTransaction: _,\n                dataField: S\n              });\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n  function b() {\n    a(0), x(void 0), d(!1);\n  }\n  function h() {\n    return m(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var n, e, i, _e2, _i;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(t == null)) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 3:\n              d(v);\n              _context2.next = 6;\n              return C(t.transaction);\n            case 6:\n              n = _context2.sent;\n              e = _defineProperty({}, o, n);\n              i = u ? c(c({}, u), e) : e;\n              x(i), p ? i && (V(Object.values(i)), b()) : (a(function (S) {\n                return S + 1;\n              }), d(!1));\n              _context2.next = 17;\n              break;\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0, \"sign error\");\n              _e2 = _context2.t0.message, _i = v ? w(_context2.t0).errorMessage : null;\n              b(), N(_i != null ? _i : _e2);\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n  }\n  function G() {\n    try {\n      if (t == null) return;\n      t.transaction.getSignature().hex() ? p || a(function (e) {\n        return e + 1;\n      }) : h();\n    } catch (n) {\n      h();\n    }\n  }\n  var H = o === 0;\n  function J() {\n    H ? f == null || f() : a(function (n) {\n      return n - 1;\n    });\n  }\n  var D = Boolean(((I = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : I.type) && ((M = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : M.multiTxData) && !(t != null && t.dataField.endsWith((A = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : A.multiTxData)));\n  function K() {\n    D ? a(function (n) {\n      return n + 1;\n    }) : G();\n  }\n  function Q() {\n    a(function (n) {\n      var e = n + 1;\n      return e > (s == null ? void 0 : s.length) ? n : e;\n    });\n  }\n  function X() {\n    a(function (n) {\n      var e = n - 1;\n      return e < 0 ? n : e;\n    });\n  }\n  return {\n    allTransactions: s,\n    onSignTransaction: K,\n    onNext: Q,\n    onPrev: X,\n    waitingForDevice: O,\n    onAbort: J,\n    isLastTransaction: p,\n    isFirstTransaction: o === 0,\n    hasMultipleTransactions: s.length > 1,\n    shouldContinueWithoutSigning: D,\n    currentStep: o,\n    signedTransactions: u,\n    currentTransaction: t\n  };\n}\nexport { ln as a };","map":{"version":3,"names":["a","E","R","w","b","$","c","j","m","P","useEffect","nn","useState","g","T","ln","isLedger","v","U","transactionsToSign","W","egldLabel","B","address","f","onCancel","C","onSignTransaction","N","onTransactionsSignError","V","onTransactionsSignSuccess","y","onGetScamAddressData","I","M","A","o","u","x","t","O","d","transactions","q","getTxInfoByDataField","s","allTransactions","p","length","z","n","e","transaction","i","multiTxData","S","getData","toString","F","L","tokenId","r","getReceiver","Y","Z","l","scamInfo","_","Boolean","erdLabel","receiverScamInfo","k","info","transactionTokenInfo","isTokenTransaction","dataField","h","Object","values","console","error","message","errorMessage","G","getSignature","hex","H","J","D","type","endsWith","K","Q","X","onNext","onPrev","waitingForDevice","onAbort","isLastTransaction","isFirstTransaction","hasMultipleTransactions","shouldContinueWithoutSigning","currentStep","signedTransactions","currentTransaction"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@elrondnetwork/dapp-core/__chunks__/chunk-7HXRGF6J.js"],"sourcesContent":["import{a as E}from\"./chunk-ARDCHFQD.js\";import{a as R}from\"./chunk-7I7NVYZT.js\";import{a as w,b as $}from\"./chunk-NCV4QGRH.js\";import{a as c,j as m,m as P}from\"./chunk-HBP5N4FR.js\";P();import{useEffect as nn,useState as g}from\"react\";$();var T={};function ln({isLedger:v=!1,transactionsToSign:U,egldLabel:W,address:B,onCancel:f,onSignTransaction:C,onTransactionsSignError:N,onTransactionsSignSuccess:V,onGetScamAddressData:y}){var I,M,A;let[o,a]=g(0),[u,x]=g(),[t,j]=g(null),[O,d]=g(!1),{getTxInfoByDataField:q,allTransactions:s}=E({transactions:U}),p=o===s.length-1;nn(()=>{z()},[o,s]);function z(){return m(this,null,function*(){var k;let n=s[o];if(n==null)return;let{transaction:e,multiTxData:i}=n,S=e.getData().toString(),F=q(e.getData().toString(),i),{tokenId:L}=F,r=e.getReceiver().toString(),Y=B!==r,Z=r in T;if(Y&&!Z&&y!=null){let l=yield y(r);T=c(c({},T),l!=null&&l.scamInfo?{[r]:l.scamInfo}:{})}let _=Boolean(L&&R({tokenId:L,erdLabel:W}));j({transaction:e,receiverScamInfo:((k=T[r])==null?void 0:k.info)||null,transactionTokenInfo:F,isTokenTransaction:_,dataField:S})})}function b(){a(0),x(void 0),d(!1)}function h(){return m(this,null,function*(){try{if(t==null)return;d(v);let n=yield C(t.transaction),e={[o]:n},i=u?c(c({},u),e):e;x(i),p?i&&(V(Object.values(i)),b()):(a(S=>S+1),d(!1))}catch(n){console.error(n,\"sign error\");let{message:e}=n,i=v?w(n).errorMessage:null;b(),N(i!=null?i:e)}})}function G(){try{if(t==null)return;t.transaction.getSignature().hex()?p||a(e=>e+1):h()}catch(n){h()}}let H=o===0;function J(){H?f==null||f():a(n=>n-1)}let D=Boolean(((I=t==null?void 0:t.transactionTokenInfo)==null?void 0:I.type)&&((M=t==null?void 0:t.transactionTokenInfo)==null?void 0:M.multiTxData)&&!(t!=null&&t.dataField.endsWith((A=t==null?void 0:t.transactionTokenInfo)==null?void 0:A.multiTxData)));function K(){D?a(n=>n+1):G()}function Q(){a(n=>{let e=n+1;return e>(s==null?void 0:s.length)?n:e})}function X(){a(n=>{let e=n-1;return e<0?n:e})}return{allTransactions:s,onSignTransaction:K,onNext:Q,onPrev:X,waitingForDevice:O,onAbort:J,isLastTransaction:p,isFirstTransaction:o===0,hasMultipleTransactions:s.length>1,shouldContinueWithoutSigning:D,currentStep:o,signedTransactions:u,currentTransaction:t}}export{ln as a};\n//# sourceMappingURL=chunk-7HXRGF6J.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}