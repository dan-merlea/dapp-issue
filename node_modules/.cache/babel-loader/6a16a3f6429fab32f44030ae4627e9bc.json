{"ast":null,"code":"import moment from 'moment';\nexport var setItem = function setItem(key, item) {\n  var ttl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3600;\n  var expires = moment().unix() + ttl;\n  localStorage.setItem(key, JSON.stringify({\n    expires: expires,\n    data: item\n  }));\n};\nexport var getItem = function getItem(key) {\n  var item = localStorage.getItem(key);\n  if (!item) {\n    return null;\n  }\n  var deserializedItem = JSON.parse(item);\n  if (!deserializedItem) {\n    return null;\n  }\n  if (!Object.prototype.hasOwnProperty.call(deserializedItem, 'expires') || !Object.prototype.hasOwnProperty.call(deserializedItem, 'data')) {\n    return null;\n  }\n  var expired = moment().unix() >= deserializedItem.expires;\n  if (expired) {\n    localStorage.removeItem(key);\n    return null;\n  }\n  return deserializedItem.data;\n};\nexport var removeItem = function removeItem(key) {\n  return localStorage.removeItem(key);\n};","map":{"version":3,"names":["moment","setItem","key","item","ttl","expires","unix","localStorage","JSON","stringify","data","getItem","deserializedItem","parse","Object","prototype","hasOwnProperty","call","expired","removeItem"],"sources":["/Users/merlea/Development/Crypto/Krogan/dapp-issue/src/core/helpers/session.ts"],"sourcesContent":["import moment from 'moment';\n\nexport const setItem = (key: string, item: any, ttl: number = 3600) => {\n\tconst expires = moment().unix() + ttl;\n\tlocalStorage.setItem(\n\t\tkey,\n\t\tJSON.stringify({\n\t\t\texpires,\n\t\t\tdata: item,\n\t\t})\n\t);\n};\n\nexport const getItem = (key: string): any => {\n\tconst item = localStorage.getItem(key);\n\tif (!item) {\n\t\treturn null;\n\t}\n\n\tconst deserializedItem = JSON.parse(item);\n\tif (!deserializedItem) {\n\t\treturn null;\n\t}\n\n\tif (!Object.prototype.hasOwnProperty.call(deserializedItem, 'expires') || !Object.prototype.hasOwnProperty.call(deserializedItem, 'data')) {\n\t\treturn null;\n\t}\n\n\tconst expired = moment().unix() >= deserializedItem.expires;\n\tif (expired) {\n\t\tlocalStorage.removeItem(key);\n\t\treturn null;\n\t}\n\n\treturn deserializedItem.data;\n};\n\nexport const removeItem = (key: string) => localStorage.removeItem(key);\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,QAAQ;AAE3B,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIC,GAAW,EAAEC,IAAS,EAAyB;EAAA,IAAvBC,GAAW,uEAAG,IAAI;EACjE,IAAMC,OAAO,GAAGL,MAAM,EAAE,CAACM,IAAI,EAAE,GAAGF,GAAG;EACrCG,YAAY,CAACN,OAAO,CACnBC,GAAG,EACHM,IAAI,CAACC,SAAS,CAAC;IACdJ,OAAO,EAAPA,OAAO;IACPK,IAAI,EAAEP;EACP,CAAC,CAAC,CACF;AACF,CAAC;AAED,OAAO,IAAMQ,OAAO,GAAG,SAAVA,OAAO,CAAIT,GAAW,EAAU;EAC5C,IAAMC,IAAI,GAAGI,YAAY,CAACI,OAAO,CAACT,GAAG,CAAC;EACtC,IAAI,CAACC,IAAI,EAAE;IACV,OAAO,IAAI;EACZ;EAEA,IAAMS,gBAAgB,GAAGJ,IAAI,CAACK,KAAK,CAACV,IAAI,CAAC;EACzC,IAAI,CAACS,gBAAgB,EAAE;IACtB,OAAO,IAAI;EACZ;EAEA,IAAI,CAACE,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACL,gBAAgB,EAAE,SAAS,CAAC,IAAI,CAACE,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACL,gBAAgB,EAAE,MAAM,CAAC,EAAE;IAC1I,OAAO,IAAI;EACZ;EAEA,IAAMM,OAAO,GAAGlB,MAAM,EAAE,CAACM,IAAI,EAAE,IAAIM,gBAAgB,CAACP,OAAO;EAC3D,IAAIa,OAAO,EAAE;IACZX,YAAY,CAACY,UAAU,CAACjB,GAAG,CAAC;IAC5B,OAAO,IAAI;EACZ;EAEA,OAAOU,gBAAgB,CAACF,IAAI;AAC7B,CAAC;AAED,OAAO,IAAMS,UAAU,GAAG,SAAbA,UAAU,CAAIjB,GAAW;EAAA,OAAKK,YAAY,CAACY,UAAU,CAACjB,GAAG,CAAC;AAAA"},"metadata":{},"sourceType":"module"}