{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction applyOption(string, props, option) {\n  // conditional\n  if (typeof option === \"function\") {\n    return option(string, props);\n  }\n  // all\n  else {\n    return option;\n  }\n}\nfunction transform(input, options) {\n  var protocol = \"\";\n  var truncation = Infinity;\n  var attributes = {};\n  var truncateFromTheMiddle = false;\n  // special transformation\n  if (options && options.specialTransform) {\n    for (var index = 0; index < options.specialTransform.length; index++) {\n      var transformer = options.specialTransform[index];\n      if (transformer.test.test(input.string)) {\n        return transformer.transform(input.string, input);\n      }\n    }\n  }\n  // exclude\n  if (options && options.exclude) {\n    if (applyOption(input.string, input, options.exclude)) return input.string;\n  }\n  // protocol\n  if (options && options.protocol) {\n    protocol = applyOption(input.string, input, options.protocol);\n  }\n  if (input.protocol) {\n    protocol = \"\";\n  } else if (!protocol) {\n    protocol = input.isEmail ? \"mailto:\" : input.isFile ? \"file:///\" : \"http://\";\n  }\n  // truncation\n  if (options && options.truncate) {\n    truncation = applyOption(input.string, input, options.truncate);\n  }\n  if (options && options.middleTruncation) {\n    truncateFromTheMiddle = applyOption(input.string, input, options.middleTruncation);\n  }\n  // attributes\n  if (options && options.attributes) {\n    attributes = applyOption(input.string, input, options.attributes);\n  }\n  return \"<a \" + Object.keys(attributes).map(function (key) {\n    return attributes[key] === true ? key : key + \"=\\\"\" + attributes[key] + \"\\\" \";\n  }).join(\" \") + \"href=\\\"\" + protocol + input.string + \"\\\">\" + (input.string.length > truncation ? truncateFromTheMiddle ? input.string.substring(0, Math.floor(truncation / 2)) + \"…\" + input.string.substring(input.string.length - Math.ceil(truncation / 2), input.string.length) : input.string.substring(0, truncation) + \"…\" : input.string) + \"</a>\";\n}\nexports.transform = transform;","map":{"version":3,"names":["Object","defineProperty","exports","value","applyOption","string","props","option","transform","input","options","protocol","truncation","Infinity","attributes","truncateFromTheMiddle","specialTransform","index","length","transformer","test","exclude","isEmail","isFile","truncate","middleTruncation","keys","map","key","join","substring","Math","floor","ceil"],"sources":["/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/anchorme/dist/node/transform.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction applyOption(string, props, option) {\n    // conditional\n    if (typeof option === \"function\") {\n        return option(string, props);\n    }\n    // all\n    else {\n        return option;\n    }\n}\nfunction transform(input, options) {\n    var protocol = \"\";\n    var truncation = Infinity;\n    var attributes = {};\n    var truncateFromTheMiddle = false;\n    // special transformation\n    if (options && options.specialTransform) {\n        for (var index = 0; index < options.specialTransform.length; index++) {\n            var transformer = options.specialTransform[index];\n            if (transformer.test.test(input.string)) {\n                return transformer.transform(input.string, input);\n            }\n        }\n    }\n    // exclude\n    if (options && options.exclude) {\n        if (applyOption(input.string, input, options.exclude))\n            return input.string;\n    }\n    // protocol\n    if (options && options.protocol) {\n        protocol = applyOption(input.string, input, options.protocol);\n    }\n    if (input.protocol) {\n        protocol = \"\";\n    }\n    else if (!protocol) {\n        protocol = input.isEmail\n            ? \"mailto:\"\n            : input.isFile\n                ? \"file:///\"\n                : \"http://\";\n    }\n    // truncation\n    if (options && options.truncate) {\n        truncation = applyOption(input.string, input, options.truncate);\n    }\n    if (options && options.middleTruncation) {\n        truncateFromTheMiddle = applyOption(input.string, input, options.middleTruncation);\n    }\n    // attributes\n    if (options && options.attributes) {\n        attributes = applyOption(input.string, input, options.attributes);\n    }\n    return \"<a \" + Object.keys(attributes)\n        .map(function (key) {\n        return attributes[key] === true ? key : key + \"=\\\"\" + attributes[key] + \"\\\" \";\n    })\n        .join(\" \") + \"href=\\\"\" + protocol + input.string + \"\\\">\" + (input.string.length > truncation\n        ? truncateFromTheMiddle\n            ? input.string.substring(0, Math.floor(truncation / 2)) +\n                \"…\" +\n                input.string.substring(input.string.length - Math.ceil(truncation / 2), input.string.length)\n            : input.string.substring(0, truncation) + \"…\"\n        : input.string) + \"</a>\";\n}\nexports.transform = transform;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,SAASC,WAAW,CAACC,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAE;EACxC;EACA,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAE;IAC9B,OAAOA,MAAM,CAACF,MAAM,EAAEC,KAAK,CAAC;EAChC;EACA;EAAA,KACK;IACD,OAAOC,MAAM;EACjB;AACJ;AACA,SAASC,SAAS,CAACC,KAAK,EAAEC,OAAO,EAAE;EAC/B,IAAIC,QAAQ,GAAG,EAAE;EACjB,IAAIC,UAAU,GAAGC,QAAQ;EACzB,IAAIC,UAAU,GAAG,CAAC,CAAC;EACnB,IAAIC,qBAAqB,GAAG,KAAK;EACjC;EACA,IAAIL,OAAO,IAAIA,OAAO,CAACM,gBAAgB,EAAE;IACrC,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGP,OAAO,CAACM,gBAAgB,CAACE,MAAM,EAAED,KAAK,EAAE,EAAE;MAClE,IAAIE,WAAW,GAAGT,OAAO,CAACM,gBAAgB,CAACC,KAAK,CAAC;MACjD,IAAIE,WAAW,CAACC,IAAI,CAACA,IAAI,CAACX,KAAK,CAACJ,MAAM,CAAC,EAAE;QACrC,OAAOc,WAAW,CAACX,SAAS,CAACC,KAAK,CAACJ,MAAM,EAAEI,KAAK,CAAC;MACrD;IACJ;EACJ;EACA;EACA,IAAIC,OAAO,IAAIA,OAAO,CAACW,OAAO,EAAE;IAC5B,IAAIjB,WAAW,CAACK,KAAK,CAACJ,MAAM,EAAEI,KAAK,EAAEC,OAAO,CAACW,OAAO,CAAC,EACjD,OAAOZ,KAAK,CAACJ,MAAM;EAC3B;EACA;EACA,IAAIK,OAAO,IAAIA,OAAO,CAACC,QAAQ,EAAE;IAC7BA,QAAQ,GAAGP,WAAW,CAACK,KAAK,CAACJ,MAAM,EAAEI,KAAK,EAAEC,OAAO,CAACC,QAAQ,CAAC;EACjE;EACA,IAAIF,KAAK,CAACE,QAAQ,EAAE;IAChBA,QAAQ,GAAG,EAAE;EACjB,CAAC,MACI,IAAI,CAACA,QAAQ,EAAE;IAChBA,QAAQ,GAAGF,KAAK,CAACa,OAAO,GAClB,SAAS,GACTb,KAAK,CAACc,MAAM,GACR,UAAU,GACV,SAAS;EACvB;EACA;EACA,IAAIb,OAAO,IAAIA,OAAO,CAACc,QAAQ,EAAE;IAC7BZ,UAAU,GAAGR,WAAW,CAACK,KAAK,CAACJ,MAAM,EAAEI,KAAK,EAAEC,OAAO,CAACc,QAAQ,CAAC;EACnE;EACA,IAAId,OAAO,IAAIA,OAAO,CAACe,gBAAgB,EAAE;IACrCV,qBAAqB,GAAGX,WAAW,CAACK,KAAK,CAACJ,MAAM,EAAEI,KAAK,EAAEC,OAAO,CAACe,gBAAgB,CAAC;EACtF;EACA;EACA,IAAIf,OAAO,IAAIA,OAAO,CAACI,UAAU,EAAE;IAC/BA,UAAU,GAAGV,WAAW,CAACK,KAAK,CAACJ,MAAM,EAAEI,KAAK,EAAEC,OAAO,CAACI,UAAU,CAAC;EACrE;EACA,OAAO,KAAK,GAAGd,MAAM,CAAC0B,IAAI,CAACZ,UAAU,CAAC,CACjCa,GAAG,CAAC,UAAUC,GAAG,EAAE;IACpB,OAAOd,UAAU,CAACc,GAAG,CAAC,KAAK,IAAI,GAAGA,GAAG,GAAGA,GAAG,GAAG,KAAK,GAAGd,UAAU,CAACc,GAAG,CAAC,GAAG,KAAK;EACjF,CAAC,CAAC,CACGC,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,GAAGlB,QAAQ,GAAGF,KAAK,CAACJ,MAAM,GAAG,KAAK,IAAII,KAAK,CAACJ,MAAM,CAACa,MAAM,GAAGN,UAAU,GAC1FG,qBAAqB,GACjBN,KAAK,CAACJ,MAAM,CAACyB,SAAS,CAAC,CAAC,EAAEC,IAAI,CAACC,KAAK,CAACpB,UAAU,GAAG,CAAC,CAAC,CAAC,GACnD,GAAG,GACHH,KAAK,CAACJ,MAAM,CAACyB,SAAS,CAACrB,KAAK,CAACJ,MAAM,CAACa,MAAM,GAAGa,IAAI,CAACE,IAAI,CAACrB,UAAU,GAAG,CAAC,CAAC,EAAEH,KAAK,CAACJ,MAAM,CAACa,MAAM,CAAC,GAC9FT,KAAK,CAACJ,MAAM,CAACyB,SAAS,CAAC,CAAC,EAAElB,UAAU,CAAC,GAAG,GAAG,GAC/CH,KAAK,CAACJ,MAAM,CAAC,GAAG,MAAM;AAChC;AACAH,OAAO,CAACM,SAAS,GAAGA,SAAS"},"metadata":{},"sourceType":"script"}