{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as q } from \"./chunk-LPXTFZID.js\";\nimport { a as T } from \"./chunk-HSZIKABD.js\";\nimport { d as j } from \"./chunk-HJKYSMBV.js\";\nimport { c as B, d as V } from \"./chunk-HXERYGOO.js\";\nimport { g as $ } from \"./chunk-HGGYZF27.js\";\nimport { a as le } from \"./chunk-E37GJNPW.js\";\nimport { g as S, h as _ } from \"./chunk-PV7M7QZ7.js\";\nimport { d as U, e as W } from \"./chunk-K45F7SFK.js\";\nimport { a as ce } from \"./chunk-MDICBPXF.js\";\nimport { a as y } from \"./chunk-MP7NBSJV.js\";\nimport { b as w, c as de } from \"./chunk-NPGLEYL5.js\";\nimport { a as l } from \"./chunk-NCV4QGRH.js\";\nimport { g as O, h as ae } from \"./chunk-C32UB6VS.js\";\nimport { k as ie } from \"./chunk-P6M5SGWP.js\";\nimport { a as M, b as R, j as c, k as F, m as N } from \"./chunk-HBP5N4FR.js\";\nN();\nae();\nimport { useEffect as ge, useState as s } from \"react\";\nimport { HWProvider as x } from \"@elrondnetwork/erdjs-hw-provider\";\nde();\nle();\nie();\nce();\nvar d = \"Could not initialise ledger app, make sure Elrond app is open\",\n  ue = 10;\nfunction be(_ref) {\n  var h = _ref.callbackRoute,\n    u = _ref.token,\n    _ref$addressesPerPage = _ref.addressesPerPage,\n    J = _ref$addressesPerPage === void 0 ? ue : _ref$addressesPerPage,\n    E = _ref.onLoginRedirect;\n  var P = V($),\n    i = B(),\n    v = q(),\n    _s = s(\"\"),\n    _s2 = _slicedToArray(_s, 2),\n    I = _s2[0],\n    a = _s2[1],\n    _s3 = s(!1),\n    _s4 = _slicedToArray(_s3, 2),\n    K = _s4[0],\n    t = _s4[1],\n    f = new x(),\n    _s5 = s(0),\n    _s6 = _slicedToArray(_s5, 2),\n    p = _s6[0],\n    b = _s6[1],\n    _s7 = s([]),\n    _s8 = _slicedToArray(_s7, 2),\n    g = _s8[0],\n    Q = _s8[1],\n    _s9 = s(\"\"),\n    _s10 = _slicedToArray(_s9, 2),\n    k = _s10[0],\n    X = _s10[1],\n    _s11 = s(!1),\n    _s12 = _slicedToArray(_s11, 2),\n    C = _s12[0],\n    Y = _s12[1],\n    _s13 = s(null),\n    _s14 = _slicedToArray(_s13, 2),\n    r = _s14[0],\n    L = _s14[1],\n    _s15 = s(!1),\n    _s16 = _slicedToArray(_s15, 2),\n    Z = _s16[0],\n    m = _s16[1];\n  function H(_ref2) {\n    var e = _ref2.provider,\n      n = _ref2.address,\n      o = _ref2.index,\n      G = _ref2.signature;\n    T(e), i(U({\n      index: o,\n      loginType: \"ledger\"\n    })), G && i(W({\n      loginToken: String(u),\n      signature: G\n    })), i(w({\n      address: n,\n      loginMethod: \"ledger\"\n    })), y(h, E);\n  }\n  var z = function z(e) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var _l = l(e),\n      o = _l.errorMessage;\n    o && a(\"\".concat(o, \".\").concat(n)), t(!1), console.warn(e), i(S(null));\n  };\n  function ee(e) {\n    return c(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var n, o, _o;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(r == null)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\", !1);\n            case 2:\n              n = r.index;\n              if (!u) {\n                _context.next = 16;\n                break;\n              }\n              _context.prev = 4;\n              _context.next = 7;\n              return e.tokenLogin({\n                token: F.Buffer.from(\"\".concat(u, \"{}\")),\n                addressIndex: n\n              });\n            case 7:\n              o = _context.sent;\n              H({\n                address: o.address,\n                provider: e,\n                index: n,\n                signature: o.signature.hex()\n              });\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](4);\n              z(_context.t0, \". Update Elrond App to continue.\");\n            case 14:\n              _context.next = 26;\n              break;\n            case 16:\n              _context.prev = 16;\n              _context.next = 19;\n              return e.login({\n                addressIndex: n\n              });\n            case 19:\n              _o = _context.sent;\n              H({\n                address: _o,\n                provider: e,\n                index: n\n              });\n              _context.next = 26;\n              break;\n            case 23:\n              _context.prev = 23;\n              _context.t1 = _context[\"catch\"](16);\n              return _context.abrupt(\"return\", (z(_context.t1), !1));\n            case 26:\n              return _context.abrupt(\"return\", !0);\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 11], [16, 23]]);\n    }));\n  }\n  function ne() {\n    return c(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var e, _l2, n;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(t(!0), r == null)) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\", !1);\n            case 3:\n              i(P ? _(r) : S(R(M({}, r), {\n                version: k,\n                hasContractDataEnabled: C\n              })));\n              e = new x();\n              _context2.next = 7;\n              return e.init();\n            case 7:\n              if (_context2.sent) {\n                _context2.next = 9;\n                break;\n              }\n              return _context2.abrupt(\"return\", (a(d), console.warn(d), !1));\n            case 9:\n              t(!1);\n              _context2.next = 12;\n              return ee(e);\n            case 12:\n              _context2.next = 18;\n              break;\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              _l2 = l(_context2.t0), n = _l2.errorMessage;\n              n && a(n), console.warn(d, _context2.t0);\n            case 18:\n              _context2.prev = 18;\n              t(!1);\n              return _context2.finish(18);\n            case 21:\n              return _context2.abrupt(\"return\", (m(!1), !0));\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14, 18, 21]]);\n    }));\n  }\n  function D() {\n    return c(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var n, o, _l3, _n, _o2;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              t(!0);\n              _context3.next = 4;\n              return f.init();\n            case 4:\n              if (_context3.sent) {\n                _context3.next = 7;\n                break;\n              }\n              a(d), console.warn(d), t(!1);\n              return _context3.abrupt(\"return\");\n            case 7:\n              _context3.next = 9;\n              return f.getAccounts(p, J);\n            case 9:\n              n = _context3.sent;\n              _context3.next = 12;\n              return j(f);\n            case 12:\n              o = _context3.sent;\n              X(o.version), Y(o.dataEnabled), Q(n), t(!1);\n              _context3.next = 20;\n              break;\n            case 16:\n              _context3.prev = 16;\n              _context3.t0 = _context3[\"catch\"](0);\n              _l3 = l(_context3.t0), _n = _l3.errorMessage, _o2 = _l3.defaultErrorMessage;\n              a(_n != null ? _n : _o2), console.error(\"error\", _context3.t0), t(!1);\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 16]]);\n    }));\n  }\n  function oe() {\n    return c(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var e, o, _l4, n;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!v) {\n                _context4.next = 2;\n                break;\n              }\n              throw new Error(O);\n            case 2:\n              a(\"\");\n              _context4.prev = 3;\n              if (!(t(!0), P != null)) {\n                _context4.next = 23;\n                break;\n              }\n              e = new x();\n              _context4.next = 8;\n              return e.init();\n            case 8:\n              _context4.t0 = !_context4.sent;\n              if (_context4.t0) {\n                _context4.next = 11;\n                break;\n              }\n              _context4.t0 = !r;\n            case 11:\n              if (!_context4.t0) {\n                _context4.next = 14;\n                break;\n              }\n              console.warn(d);\n              return _context4.abrupt(\"return\");\n            case 14:\n              _context4.next = 16;\n              return e.login({\n                addressIndex: r.index.valueOf()\n              });\n            case 16:\n              o = _context4.sent;\n              if (!(T(e), !o)) {\n                _context4.next = 20;\n                break;\n              }\n              t(!1), console.warn(\"Login cancelled.\");\n              return _context4.abrupt(\"return\");\n            case 20:\n              i(w({\n                address: o,\n                loginMethod: \"ledger\"\n              })), y(h, E);\n              _context4.next = 28;\n              break;\n            case 23:\n              _context4.t1 = (g == null ? void 0 : g.length) > 0;\n              if (_context4.t1) {\n                _context4.next = 27;\n                break;\n              }\n              _context4.next = 27;\n              return D();\n            case 27:\n              m(!0);\n            case 28:\n              _context4.next = 35;\n              break;\n            case 30:\n              _context4.prev = 30;\n              _context4.t2 = _context4[\"catch\"](3);\n              console.error(\"error \", _context4.t2);\n              _l4 = l(), n = _l4.defaultErrorMessage;\n              a(n);\n            case 35:\n              _context4.prev = 35;\n              t(!1);\n              return _context4.finish(35);\n            case 38:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[3, 30, 35, 38]]);\n    }));\n  }\n  function te(e) {\n    L(e);\n  }\n  function re() {\n    L(null), b(function (e) {\n      return e + 1;\n    });\n  }\n  function se() {\n    L(null), b(function (e) {\n      return e === 0 ? 0 : e - 1;\n    });\n  }\n  ge(function () {\n    D();\n  }, [p]);\n  var A = Boolean(I);\n  return [oe, {\n    loginFailed: A,\n    isLoggedIn: v && !A,\n    error: I,\n    isLoading: K && !A\n  }, {\n    accounts: g,\n    showAddressList: Z,\n    startIndex: p,\n    selectedAddress: r,\n    version: k,\n    contractDataEnabled: C,\n    onGoToPrevPage: se,\n    onGoToNextPage: re,\n    onSelectAddress: te,\n    onConfirmSelectedAddress: ne\n  }];\n}\nexport { be as a };","map":null,"metadata":{},"sourceType":"module"}