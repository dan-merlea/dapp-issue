{"ast":null,"code":"import _regeneratorRuntime from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _defineProperty from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/merlea/Development/Crypto/Krogan/kroganverse-com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { a as E } from \"./chunk-JNRMREOV.js\";\nimport { a as R } from \"./chunk-7I7NVYZT.js\";\nimport { a as w, b as $ } from \"./chunk-NCV4QGRH.js\";\nimport { a as c, j as m, m as P } from \"./chunk-HBP5N4FR.js\";\nP();\nimport { useEffect as nn, useState as g } from \"react\";\n$();\nvar T = {};\nfunction ln(_ref) {\n  var _ref$isLedger = _ref.isLedger,\n    v = _ref$isLedger === void 0 ? !1 : _ref$isLedger,\n    U = _ref.transactionsToSign,\n    W = _ref.egldLabel,\n    B = _ref.address,\n    f = _ref.onCancel,\n    C = _ref.onSignTransaction,\n    N = _ref.onTransactionsSignError,\n    V = _ref.onTransactionsSignSuccess,\n    y = _ref.onGetScamAddressData;\n  var I, M, A;\n  var _g = g(0),\n    _g2 = _slicedToArray(_g, 2),\n    o = _g2[0],\n    a = _g2[1],\n    _g3 = g(),\n    _g4 = _slicedToArray(_g3, 2),\n    u = _g4[0],\n    x = _g4[1],\n    _g5 = g(null),\n    _g6 = _slicedToArray(_g5, 2),\n    t = _g6[0],\n    j = _g6[1],\n    _g7 = g(!1),\n    _g8 = _slicedToArray(_g7, 2),\n    O = _g8[0],\n    d = _g8[1],\n    _E = E({\n      transactions: U\n    }),\n    q = _E.getTxInfoByDataField,\n    s = _E.allTransactions,\n    p = o === s.length - 1;\n  nn(function () {\n    z();\n  }, [o, s]);\n  function z() {\n    return m(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var k, n, e, i, S, F, L, r, Y, Z, l, _;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              n = s[o];\n              if (!(n == null)) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              e = n.transaction, i = n.multiTxData, S = e.getData().toString(), F = q(e.getData().toString(), i), L = F.tokenId, r = e.getReceiver().toString(), Y = B !== r, Z = r in T;\n              if (!(Y && !Z && y != null)) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 7;\n              return y(r);\n            case 7:\n              l = _context.sent;\n              T = c(c({}, T), l != null && l.scamInfo ? _defineProperty({}, r, l.scamInfo) : {});\n            case 9:\n              _ = Boolean(L && R({\n                tokenId: L,\n                erdLabel: W\n              }));\n              j({\n                transaction: e,\n                receiverScamInfo: ((k = T[r]) == null ? void 0 : k.info) || null,\n                transactionTokenInfo: F,\n                isTokenTransaction: _,\n                dataField: S\n              });\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n  function b() {\n    a(0), x(void 0), d(!1);\n  }\n  function h() {\n    return m(this, null, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var n, e, i, _e2, _i;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(t == null)) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 3:\n              d(v);\n              _context2.next = 6;\n              return C(t.transaction);\n            case 6:\n              n = _context2.sent;\n              e = _defineProperty({}, o, n);\n              i = u ? c(c({}, u), e) : e;\n              x(i), p ? i && (V(Object.values(i)), b()) : (a(function (S) {\n                return S + 1;\n              }), d(!1));\n              _context2.next = 17;\n              break;\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0, \"sign error\");\n              _e2 = _context2.t0.message, _i = v ? w(_context2.t0).errorMessage : null;\n              b(), N(_i != null ? _i : _e2);\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n  }\n  function G() {\n    try {\n      if (t == null) return;\n      t.transaction.getSignature().hex() ? p || a(function (e) {\n        return e + 1;\n      }) : h();\n    } catch (n) {\n      h();\n    }\n  }\n  var H = o === 0;\n  function J() {\n    H ? f == null || f() : a(function (n) {\n      return n - 1;\n    });\n  }\n  var D = Boolean(((I = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : I.type) && ((M = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : M.multiTxData) && !(t != null && t.dataField.endsWith((A = t == null ? void 0 : t.transactionTokenInfo) == null ? void 0 : A.multiTxData)));\n  function K() {\n    D ? a(function (n) {\n      return n + 1;\n    }) : G();\n  }\n  function Q() {\n    a(function (n) {\n      var e = n + 1;\n      return e > (s == null ? void 0 : s.length) ? n : e;\n    });\n  }\n  function X() {\n    a(function (n) {\n      var e = n - 1;\n      return e < 0 ? n : e;\n    });\n  }\n  return {\n    allTransactions: s,\n    onSignTransaction: K,\n    onNext: Q,\n    onPrev: X,\n    waitingForDevice: O,\n    onAbort: J,\n    isLastTransaction: p,\n    isFirstTransaction: o === 0,\n    hasMultipleTransactions: s.length > 1,\n    shouldContinueWithoutSigning: D,\n    currentStep: o,\n    signedTransactions: u,\n    currentTransaction: t\n  };\n}\nexport { ln as a };","map":null,"metadata":{},"sourceType":"module"}