{"ast":null,"code":"\"use strict\";\n\n// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar browser_1 = require(\"./browser\");\nvar node_1 = require(\"./node\");\nvar SystemRandomSource = /** @class */function () {\n  function SystemRandomSource() {\n    this.isAvailable = false;\n    this.name = \"\";\n    // Try browser.\n    this._source = new browser_1.BrowserRandomSource();\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Browser\";\n      return;\n    }\n    // If no browser source, try Node.\n    this._source = new node_1.NodeRandomSource();\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Node\";\n      return;\n    }\n    // No sources, we're out of options.\n  }\n\n  SystemRandomSource.prototype.randomBytes = function (length) {\n    if (!this.isAvailable) {\n      throw new Error(\"System random byte generator is not available.\");\n    }\n    return this._source.randomBytes(length);\n  };\n  return SystemRandomSource;\n}();\nexports.SystemRandomSource = SystemRandomSource;","map":null,"metadata":{},"sourceType":"script"}